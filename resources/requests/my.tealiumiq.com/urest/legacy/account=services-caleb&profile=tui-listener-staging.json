{"profile_action_type":"SaveAs","account":"services-caleb","history":"[ { \"action\" : \"updated_extension\" , \"data\" : { \"id\" : \"25\" , \"name\" : \"Test Alternative to DOM Ready (to solve timing issues)\" , \"type\" : \"100036\" , \"kind\" : \"Extension\" , \"operation\" : \"updated\" , \"container\" : \"customizations_25\" , \"tab_name\" : \"customizations\"}}]","lastcustomizeid":"0","publish_history":{"202101141208":{"202101141208":{"publishedConsent":"[ ]","versionorigin":"202101140953","notes":"Update","action":"Published to dev","lastmanageid":"2","status":"dev","operator":"caleb.jaquith@tealium.com","publishedTags":"[ \"2\"]","lastcustomizeid":"0","title":"Version 2021.01.14.1208","history":"[ { \"action\" : \"updated_tag\" , \"data\" : { \"id\" : \"2\" , \"tag_name\" : \"Adobe Analytics AppMeasurement for JS\" , \"name\" : \"Adobe Analytics AppMeasurement for JS\" , \"kind\" : \"Tag\" , \"operation\" : \"updated\" , \"container\" : \"manage_content_161062544628600003\" , \"tab_name\" : \"manage\"}}]","datacloudLinkedProfiles":"{&quot;main&quot;:{&quot;rev&quot;:&quot;1605528129252&quot;,&quot;env&quot;:&quot;AudienceStream&quot;}}","publishedExtensions":"[ \"10\" , \"11\" , \"12\" , \"13\" , \"14\" , \"18\"]","linkedProfiles":"{ }"},"title":"Version 2021.01.14.1208","size":"125","status":"Not Published"},"202101191105":{"size":"469","status":"prod,dev","202101191105":{"datacloudLinkedProfiles":"{&quot;main&quot;:{&quot;rev&quot;:&quot;1605528129252&quot;,&quot;env&quot;:&quot;AudienceStream&quot;}}","title":"Version 2021.01.19.1105","history":"[ { \"action\" : \"added_extension\" , \"data\" : { \"id\" : \"23\" , \"name\" : \"No Title\" , \"type\" : \"100040\" , \"library\" : \"\" , \"kind\" : \"Extension\" , \"operation\" : \"added\" , \"container\" : \"customizations_23\" , \"tab_name\" : \"customizations\"}}]","lastcustomizeid":"0","linkedProfiles":"{ }","publishedExtensions":"[ \"10\" , \"11\" , \"12\" , \"13\" , \"14\" , \"17\" , \"18\" , \"21\" , \"23\"]","action":"Published to dev","publishedConsent":"[ ]","versionorigin":"202101151330","notes":"Add plugins from TUI UK to test","operator":"caleb.jaquith@tealium.com","publishedTags":"[ \"3\" , \"5\" , \"6\"]","lastmanageid":"6","status":"dev"},"title":"Version 2021.01.19.1105"},"202101140951":{"title":"Version 2021.01.14.0950","size":"126","status":"Not Published","202101140951":{"linkedProfiles":"{ }","publishedExtensions":"[ \"10\" , \"11\" , \"12\" , \"13\" , \"14\" , \"18\"]","datacloudLinkedProfiles":"{&quot;main&quot;:{&quot;rev&quot;:&quot;1605528129252&quot;,&quot;env&quot;:&quot;AudienceStream&quot;}}","history":"[ { \"action\" : \"added_variable\" , \"data\" : { \"id\" : \"226\" , \"name\" : \"map_eVar232\" , \"type\" : \"js\" , \"library\" : \"\" , \"kind\" : \"Variable\" , \"operation\" : \"added\" , \"container\" : \"defineObjectsList\" , \"tab_name\" : \"define\"}} , { \"action\" : \"added_variable\" , \"data\" : { \"id\" : \"227\" , \"name\" : \"map_prop232\" , \"type\" : \"js\" , \"library\" : \"\" , \"kind\" : \"Variable\" , \"operation\" : \"added\" , \"container\" : \"defineObjectsList\" , \"tab_name\" : \"define\"}} , { \"action\" : \"updated_tag\" , \"data\" : { \"id\" : \"2\" , \"tag_name\" : \"Adobe Analytics AppMeasurement for JS\" , \"name\" : \"Adobe Analytics AppMeasurement for JS\" , \"kind\" : \"Tag\" , \"operation\" : \"updated\" , \"container\" : \"manage_content_161061633636300884\" , \"tab_name\" : \"manage\"}}]","lastcustomizeid":"0","title":"Version 2021.01.14.0950","operator":"caleb.jaquith@tealium.com","publishedTags":"[ \"2\"]","lastmanageid":"2","status":"dev","action":"Published to dev","notes":"Update","publishedConsent":"[ ]","versionorigin":"202101140948"}},"202101071727":{"title":"Version 2021.01.07.1727","size":"38","202101071727":{"publishedTags":"[ \"1\"]","operator":"caleb.jaquith@tealium.com","lastmanageid":"1","status":"dev","action":"Published to dev","publishedConsent":"[ ]","notes":"Update","versionorigin":"202101071713","linkedProfiles":"{ }","publishedExtensions":"[ \"10\" , \"11\" , \"12\" , \"13\" , \"14\"]","datacloudLinkedProfiles":"{&quot;main&quot;:{&quot;rev&quot;:&quot;1605528129252&quot;,&quot;env&quot;:&quot;AudienceStream&quot;}}","history":"[ { \"action\" : \"updated_extension\" , \"data\" : { \"id\" : \"13\" , \"name\" : \"GTM Listener (4/5) - Data Layer Listener Function\" , \"type\" : \"100040\" , \"kind\" : \"Extension\" , \"operation\" : \"updated\" , \"container\" : \"customizations_13\" , \"tab_name\" : \"customizations\"}}]","lastcustomizeid":"0","title":"Version 2021.01.07.1727"},"status":"Not Published"},"202101151302":{"status":"Not Published","202101151302":{"versionorigin":"202101151252","publishedConsent":"[ ]","notes":"Add fix","action":"Published to dev","lastmanageid":"6","status":"prod,qa,dev","operator":"caleb.jaquith@tealium.com","publishedTags":"[ \"3\" , \"5\" , \"6\"]","title":"Version 2021.01.15.1302","lastcustomizeid":"0","history":"[ { \"action\" : \"updated_template\" , \"data\" : { \"id\" : \"6\" , \"kind\" : \"Template\" , \"operation\" : \"updated\" , \"name\" : \"Adobe Analytics AppMeasurement for JS - Fixed\" , \"tag_name\" : \"Adobe Analytics AppMeasurement for JS\" , \"container\" : \"manage_content_161071468341600047\" , \"tab_name\" : \"Template\"}}]","datacloudLinkedProfiles":"{&quot;main&quot;:{&quot;rev&quot;:&quot;1605528129252&quot;,&quot;env&quot;:&quot;AudienceStream&quot;}}","linkedProfiles":"{ }","publishedExtensions":"[ \"10\" , \"11\" , \"12\" , \"13\" , \"14\" , \"17\" , \"21\"]"},"size":"348","title":"Version 2021.01.15.1302"},"202101131210":{"title":"Version 2021.01.13.1210","202101131210":{"history":"[ { \"action\" : \"updated_tag\" , \"data\" : { \"id\" : \"2\" , \"tag_name\" : \"Adobe Analytics AppMeasurement for JS\" , \"name\" : \"Adobe Analytics AppMeasurement for JS\" , \"kind\" : \"Tag\" , \"operation\" : \"updated\" , \"container\" : \"manage_content_161053932051602015\" , \"tab_name\" : \"manage\"}} , { \"action\" : \"toggled_tag\" , \"data\" : { \"id\" : \"1\" , \"tag_name\" : \"Uniqodo\" , \"name\" : \"Uniqodo\" , \"status\" : \"inactive\" , \"kind\" : \"Tag\" , \"operation\" : \"toggled\" , \"container\" : \"manage_content_161053932051502014\" , \"tab_name\" : \"manage\"}} , { \"action\" : \"updated_extension\" , \"data\" : { \"id\" : \"13\" , \"name\" : \"GTM Listener (4/5) - Data Layer Listener Function\" , \"type\" : \"100040\" , \"kind\" : \"Extension\" , \"operation\" : \"updated\" , \"container\" : \"customizations_13\" , \"tab_name\" : \"customizations\"}}]","lastcustomizeid":"0","title":"Version 2021.01.13.1210","datacloudLinkedProfiles":"{&quot;main&quot;:{&quot;rev&quot;:&quot;1605528129252&quot;,&quot;env&quot;:&quot;AudienceStream&quot;}}","linkedProfiles":"{ }","publishedExtensions":"[ \"10\" , \"11\" , \"12\" , \"13\" , \"14\"]","notes":"Update for test","publishedConsent":"[ ]","versionorigin":"202101111126","action":"Published to dev","status":"dev","lastmanageid":"2","operator":"caleb.jaquith@tealium.com","publishedTags":"[ \"2\"]"},"status":"Not Published","size":"91"},"202104211044":{"size":"610","status":"Not Published","202104211044":{"linkedProfiles":"{ }","publishedExtensions":"[ \"10\" , \"11\" , \"12\" , \"13\" , \"14\" , \"17\" , \"18\" , \"21\" , \"23\" , \"25\" , \"26\"]","history":"[ { \"action\" : \"added_variable\" , \"data\" : { \"id\" : \"323\" , \"name\" : \"event\" , \"type\" : \"js\" , \"library\" : \"\" , \"kind\" : \"Variable\" , \"operation\" : \"added\" , \"container\" : \"defineObjectsList\" , \"tab_name\" : \"define\"}} , { \"action\" : \"updated_extension\" , \"data\" : { \"id\" : \"25\" , \"name\" : \"Aternative to DOM Ready (to solve timing issues)\" , \"type\" : \"100036\" , \"kind\" : \"Extension\" , \"operation\" : \"updated\" , \"container\" : \"customizations_25\" , \"tab_name\" : \"customizations\"}}]","title":"Version 2021.04.21.1044","lastcustomizeid":"0","datacloudLinkedProfiles":"{&quot;main&quot;:{&quot;rev&quot;:&quot;1618837227526&quot;,&quot;env&quot;:&quot;AudienceStream&quot;}}","lastmanageid":"13","status":"dev","publishedTags":"[ \"3\" , \"5\" , \"6\" , \"9\" , \"10\" , \"11\" , \"12\" , \"13\"]","operator":"caleb.jaquith@tealium.com","publishedConsent":"[ ]","notes":"Updateeee","versionorigin":"202104211040","action":"Published to dev"},"title":"Version 2021.04.21.1044"},"202101061243":{"title":"Version 2021.01.06.1243","202101061243":{"operator":"caleb.jaquith@tealium.com","publishedTags":"[ \"1\"]","lastmanageid":"1","status":"dev","action":"Published to dev","versionorigin":"202101060851","notes":"Update listener function","publishedConsent":"[ ]","publishedExtensions":"[ \"10\" , \"11\" , \"12\" , \"13\" , \"14\"]","linkedProfiles":"{ }","datacloudLinkedProfiles":"{&quot;main&quot;:{&quot;rev&quot;:&quot;1605528129252&quot;,&quot;env&quot;:&quot;AudienceStream&quot;}}","history":"[ { \"action\" : \"updated_extension\" , \"data\" : { \"id\" : \"11\" , \"name\" : \"GTM Listener (2/5) - Data Layer Helper Library (provided by Google)\" , \"type\" : \"100040\" , \"kind\" : \"Extension\" , \"operation\" : \"updated\" , \"container\" : \"customizations_11\" , \"tab_name\" : \"customizations\"}}]","lastcustomizeid":"0","title":"Version 2021.01.06.1243"},"status":"Not Published","size":"36"},"202104211033":{"size":"610","status":"Not Published","202104211033":{"operator":"caleb.jaquith@tealium.com","publishedTags":"[ \"3\" , \"5\" , \"6\" , \"9\" , \"10\" , \"11\" , \"12\" , \"13\"]","status":"dev","lastmanageid":"13","action":"Published to dev","versionorigin":"202104210846","notes":"Update","publishedConsent":"[ ]","publishedExtensions":"[ \"10\" , \"11\" , \"12\" , \"13\" , \"14\" , \"17\" , \"18\" , \"21\" , \"23\" , \"24\" , \"25\"]","linkedProfiles":"{ }","datacloudLinkedProfiles":"{&quot;main&quot;:{&quot;rev&quot;:&quot;1618837227526&quot;,&quot;env&quot;:&quot;AudienceStream&quot;}}","history":"[ { \"action\" : \"updated_extension\" , \"data\" : { \"id\" : \"25\" , \"name\" : \"DOM Ready b output (AFTER LOAD RULES, RUN ONCE)\" , \"type\" : \"100036\" , \"kind\" : \"Extension\" , \"operation\" : \"updated\" , \"container\" : \"customizations_25\" , \"tab_name\" : \"customizations\"}}]","title":"Version 2021.04.21.1033","lastcustomizeid":"0"},"title":"Version 2021.04.21.1033"},"202101141319":{"title":"Version 2021.01.14.1319","202101141319":{"lastcustomizeid":"0","history":"[ { \"action\" : \"updated_tag\" , \"data\" : { \"id\" : \"2\" , \"tag_name\" : \"Adobe Analytics AppMeasurement for JS\" , \"name\" : \"Adobe Analytics AppMeasurement for JS\" , \"kind\" : \"Tag\" , \"operation\" : \"updated\" , \"container\" : \"manage_content_161062544628600003\" , \"tab_name\" : \"manage\"}}]","title":"Version 2021.01.14.1319","datacloudLinkedProfiles":"{&quot;main&quot;:{&quot;rev&quot;:&quot;1605528129252&quot;,&quot;env&quot;:&quot;AudienceStream&quot;}}","publishedExtensions":"[ \"10\" , \"11\" , \"12\" , \"13\" , \"14\" , \"18\"]","linkedProfiles":"{ }","publishedConsent":"[ ]","versionorigin":"202101141318","notes":"Readd mapping","action":"Published to dev","lastmanageid":"2","status":"dev","operator":"caleb.jaquith@tealium.com","publishedTags":"[ \"2\"]"},"size":"126","status":"Not Published"},"202101071730":{"status":"Not Published","size":"38","title":"Version 2021.01.07.1730","202101071730":{"notes":"Update","versionorigin":"202101071727","publishedConsent":"[ ]","action":"Published to dev","lastmanageid":"1","status":"dev","operator":"caleb.jaquith@tealium.com","publishedTags":"[ \"1\"]","title":"Version 2021.01.07.1730","history":"[ { \"action\" : \"updated_extension\" , \"data\" : { \"id\" : \"13\" , \"name\" : \"GTM Listener (4/5) - Data Layer Listener Function\" , \"type\" : \"100040\" , \"kind\" : \"Extension\" , \"operation\" : \"updated\" , \"container\" : \"customizations_13\" , \"tab_name\" : \"customizations\"}}]","lastcustomizeid":"0","datacloudLinkedProfiles":"{&quot;main&quot;:{&quot;rev&quot;:&quot;1605528129252&quot;,&quot;env&quot;:&quot;AudienceStream&quot;}}","linkedProfiles":"{ }","publishedExtensions":"[ \"10\" , \"11\" , \"12\" , \"13\" , \"14\"]"}},"202101141335":{"202101141335":{"publishedExtensions":"[ \"10\" , \"11\" , \"12\" , \"13\" , \"14\" , \"18\"]","linkedProfiles":"{ }","history":"[ { \"action\" : \"updated_tag\" , \"data\" : { \"id\" : \"2\" , \"tag_name\" : \"Adobe Analytics AppMeasurement for JS\" , \"name\" : \"Adobe Analytics AppMeasurement for JS\" , \"kind\" : \"Tag\" , \"operation\" : \"updated\" , \"container\" : \"manage_content_161062544628600003\" , \"tab_name\" : \"manage\"}} , { \"action\" : \"updated_variable\" , \"data\" : { \"id\" : 226 , \"name\" : \"map_eVar230\" , \"type\" : \"js\" , \"kind\" : \"Variable\" , \"operation\" : \"updated\" , \"container\" : \"defineObjectsList\" , \"tab_name\" : \"define\"}} , { \"action\" : \"updated_variable\" , \"data\" : { \"id\" : 227 , \"name\" : \"map_prop230\" , \"type\" : \"js\" , \"kind\" : \"Variable\" , \"operation\" : \"updated\" , \"container\" : \"defineObjectsList\" , \"tab_name\" : \"define\"}}]","lastcustomizeid":"0","title":"Version 2021.01.14.1335","datacloudLinkedProfiles":"{&quot;main&quot;:{&quot;rev&quot;:&quot;1605528129252&quot;,&quot;env&quot;:&quot;AudienceStream&quot;}}","status":"dev","lastmanageid":"3","operator":"caleb.jaquith@tealium.com","publishedTags":"[ \"2\" , \"3\"]","notes":"Update","versionorigin":"202101141334","publishedConsent":"[ ]","action":"Published to dev"},"title":"Version 2021.01.14.1335","size":"272","status":"Not Published"},"202101151252":{"202101151252":{"lastcustomizeid":"0","title":"Version 2021.01.15.1252","history":"[ { \"action\" : \"added_tag\" , \"data\" : { \"id\" : \"6\" , \"tag_name\" : \"Adobe Analytics AppMeasurement for JS\" , \"library\" : \"\" , \"name\" : \"Adobe Analytics AppMeasurement for JS\" , \"kind\" : \"Tag\" , \"operation\" : \"added\" , \"container\" : \"manage_content_161071468341600047\" , \"tab_name\" : \"manage\"}} , { \"action\" : \"added_variable\" , \"data\" : { \"id\" : \"230\" , \"name\" : \"adobe_template_version\" , \"type\" : \"qp\" , \"library\" : \"\" , \"kind\" : \"Variable\" , \"operation\" : \"added\" , \"container\" : \"defineObjectsList\" , \"tab_name\" : \"define\"}} , { \"action\" : \"added_loadrule\" , \"data\" : { \"id\" : \"2\" , \"name\" : \"Adobe Marketplace Tag\" , \"library\" : \"\" , \"kind\" : \"Loadrule\" , \"operation\" : \"added\" , \"container\" : \"loadrules_content_161071478946900075\" , \"tab_name\" : \"loadrules\"}} , { \"action\" : \"added_loadrule\" , \"data\" : { \"id\" : \"3\" , \"name\" : \"Adobe Fixed Tag\" , \"library\" : \"\" , \"kind\" : \"Loadrule\" , \"operation\" : \"added\" , \"container\" : \"loadrules_content_161071483118900096\" , \"tab_name\" : \"loadrules\"}} , { \"action\" : \"updated_template\" , \"data\" : { \"id\" : \"5\" , \"kind\" : \"Template\" , \"operation\" : \"updated\" , \"name\" : \"Adobe Analytics AppMeasurement for JS - Marketplace\" , \"tag_name\" : \"Adobe Analytics AppMeasurement for JS\" , \"container\" : \"manage_content_161071235214600020\" , \"tab_name\" : \"Template\"}} , { \"action\" : \"toggled_extension\" , \"data\" : { \"id\" : \"18\" , \"name\" : \"Add some test events\" , \"type\" : \"100040\" , \"status\" : \"inactive\" , \"kind\" : \"Extension\" , \"operation\" : \"toggled\" , \"container\" : \"customizations_18\" , \"tab_name\" : \"customizations\"}} , { \"action\" : \"updated_extension\" , \"data\" : { \"id\" : \"10\" , \"name\" : \"GTM Listener (1/5) - Disable automatic utag.view call\" , \"type\" : \"100040\" , \"kind\" : \"Extension\" , \"operation\" : \"updated\" , \"container\" : \"customizations_10\" , \"tab_name\" : \"customizations\"}} , { \"action\" : \"updated_extension\" , \"data\" : { \"id\" : 21 , \"name\" : \"Intermediate mappings to test \" , \"type\" : \"100003\" , \"kind\" : \"Extension\" , \"operation\" : \"updated\" , \"container\" : \"customizations_21\" , \"tab_name\" : \"customizations\"}} , { \"action\" : \"updated_extension\" , \"data\" : { \"id\" : \"11\" , \"name\" : \"GTM Listener (2/5) - Data Layer Helper Library (provided by Google)\" , \"type\" : \"100040\" , \"kind\" : \"Extension\" , \"operation\" : \"updated\" , \"container\" : \"customizations_11\" , \"tab_name\" : \"customizations\"}} , { \"action\" : \"updated_extension\" , \"data\" : { \"id\" : \"12\" , \"name\" : \"GTM Listener (3/5) - Tealium Flattener Definitions\" , \"type\" : \"100040\" , \"kind\" : \"Extension\" , \"operation\" : \"updated\" , \"container\" : \"customizations_12\" , \"tab_name\" : \"customizations\"}} , { \"action\" : \"updated_extension\" , \"data\" : { \"id\" : \"13\" , \"name\" : \"GTM Listener (4/5) - Data Layer Listener Function\" , \"type\" : \"100040\" , \"kind\" : \"Extension\" , \"operation\" : \"updated\" , \"container\" : \"customizations_13\" , \"tab_name\" : \"customizations\"}} , { \"action\" : \"updated_extension\" , \"data\" : { \"id\" : \"17\" , \"name\" : \"Fire u.addEvent as needed for specific events\" , \"type\" : \"100040\" , \"kind\" : \"Extension\" , \"operation\" : \"updated\" , \"container\" : \"customizations_17\" , \"tab_name\" : \"customizations\"}} , { \"action\" : \"updated_tag\" , \"data\" : { \"id\" : \"5\" , \"tag_name\" : \"Adobe Analytics AppMeasurement for JS\" , \"name\" : \"Adobe Analytics AppMeasurement for JS - Marketplace\" , \"kind\" : \"Tag\" , \"operation\" : \"updated\" , \"container\" : \"manage_content_161071235214600020\" , \"tab_name\" : \"manage\"}} , { \"action\" : \"updated_extension\" , \"data\" : { \"id\" : \"18\" , \"name\" : \"Add some test events\" , \"type\" : \"100040\" , \"kind\" : \"Extension\" , \"operation\" : \"updated\" , \"container\" : \"customizations_18\" , \"tab_name\" : \"customizations\"}}]","datacloudLinkedProfiles":"{&quot;main&quot;:{&quot;rev&quot;:&quot;1605528129252&quot;,&quot;env&quot;:&quot;AudienceStream&quot;}}","publishedExtensions":"[ \"10\" , \"11\" , \"12\" , \"13\" , \"14\" , \"17\" , \"21\"]","linkedProfiles":"{ }","publishedConsent":"[ ]","versionorigin":"202101151225","notes":"update","action":"Published to dev","lastmanageid":"6","status":"prod,qa,dev","publishedTags":"[ \"3\" , \"5\" , \"6\"]","operator":"caleb.jaquith@tealium.com"},"size":"348","status":"Not Published","title":"Version 2021.01.15.1252"},"202104211035":{"size":"610","status":"Not Published","202104211035":{"lastcustomizeid":"0","history":"[ { \"action\" : \"updated_extension\" , \"data\" : { \"id\" : \"25\" , \"name\" : \"DOM Ready b output (AFTER LOAD RULES, RUN ONCE)\" , \"type\" : \"100036\" , \"kind\" : \"Extension\" , \"operation\" : \"updated\" , \"container\" : \"customizations_25\" , \"tab_name\" : \"customizations\"}}]","title":"Version 2021.04.21.1035","datacloudLinkedProfiles":"{&quot;main&quot;:{&quot;rev&quot;:&quot;1618837227526&quot;,&quot;env&quot;:&quot;AudienceStream&quot;}}","publishedExtensions":"[ \"10\" , \"11\" , \"12\" , \"13\" , \"14\" , \"17\" , \"18\" , \"21\" , \"23\" , \"24\" , \"25\"]","linkedProfiles":"{ }","versionorigin":"202104211033","publishedConsent":"[ ]","notes":"Update","action":"Published to dev","lastmanageid":"13","status":"dev","publishedTags":"[ \"3\" , \"5\" , \"6\" , \"9\" , \"10\" , \"11\" , \"12\" , \"13\"]","operator":"caleb.jaquith@tealium.com"},"title":"Version 2021.04.21.1035"},"202101140934":{"size":"133","status":"Not Published","202101140934":{"datacloudLinkedProfiles":"{&quot;main&quot;:{&quot;rev&quot;:&quot;1605528129252&quot;,&quot;env&quot;:&quot;AudienceStream&quot;}}","lastcustomizeid":"0","history":"[ { \"action\" : \"updated_tag\" , \"data\" : { \"id\" : \"2\" , \"tag_name\" : \"Adobe Analytics AppMeasurement for JS\" , \"name\" : \"Adobe Analytics AppMeasurement for JS\" , \"kind\" : \"Tag\" , \"operation\" : \"updated\" , \"container\" : \"manage_content_161061633636300884\" , \"tab_name\" : \"manage\"}}]","title":"Version 2021.01.14.0933","publishedExtensions":"[ \"10\" , \"11\" , \"12\" , \"13\" , \"14\" , \"18\"]","linkedProfiles":"{ }","action":"Published to dev","notes":"Update code version","versionorigin":"202101140931","publishedConsent":"[ ]","publishedTags":"[ \"2\"]","operator":"caleb.jaquith@tealium.com","status":"dev","lastmanageid":"2"},"title":"Version 2021.01.14.0933"},"202101060851":{"title":"Version 2021.01.06.0851","202101060851":{"lastmanageid":"1","status":"dev","publishedTags":"[ \"1\"]","operator":"caleb.jaquith@tealium.com","notes":"Update to 'window.addEventListener' instead of 'document.addEventListener'","versionorigin":"202101060841","publishedConsent":"[ ]","action":"Published to dev","linkedProfiles":"{ }","publishedExtensions":"[ \"10\" , \"11\" , \"12\" , \"13\" , \"14\"]","title":"Version 2021.01.06.0851","lastcustomizeid":"0","history":"[ { \"action\" : \"updated_extension\" , \"data\" : { \"id\" : \"14\" , \"name\" : \"GTM Listener (5/5) - Add 'tiq.load' and 'tiq.dom' pushes to dataLayer \" , \"type\" : \"100036\" , \"kind\" : \"Extension\" , \"operation\" : \"updated\" , \"container\" : \"customizations_14\" , \"tab_name\" : \"customizations\"}}]","datacloudLinkedProfiles":"{&quot;main&quot;:{&quot;rev&quot;:&quot;1605528129252&quot;,&quot;env&quot;:&quot;AudienceStream&quot;}}"},"status":"Not Published","size":"35"},"202101071352":{"title":"Version 2021.01.07.1352","202101071352":{"datacloudLinkedProfiles":"{&quot;main&quot;:{&quot;rev&quot;:&quot;1605528129252&quot;,&quot;env&quot;:&quot;AudienceStream&quot;}}","title":"Version 2021.01.07.1352","history":"[ { \"action\" : \"updated_extension\" , \"data\" : { \"id\" : \"14\" , \"name\" : \"GTM Listener (5/5) - Add 'tiq.load' and 'tiq.dom' pushes to dataLayer \" , \"type\" : \"100036\" , \"kind\" : \"Extension\" , \"operation\" : \"updated\" , \"container\" : \"customizations_14\" , \"tab_name\" : \"customizations\"}} , { \"action\" : \"added_extension\" , \"data\" : { \"id\" : \"16\" , \"name\" : \"No Title\" , \"type\" : \"100036\" , \"library\" : \"\" , \"kind\" : \"Extension\" , \"operation\" : \"added\" , \"container\" : \"customizations_16\" , \"tab_name\" : \"customizations\"}} , { \"action\" : \"updated_extension\" , \"data\" : { \"id\" : \"13\" , \"name\" : \"GTM Listener (4/5) - Data Layer Listener Function\" , \"type\" : \"100040\" , \"kind\" : \"Extension\" , \"operation\" : \"updated\" , \"container\" : \"customizations_13\" , \"tab_name\" : \"customizations\"}} , { \"action\" : \"toggled_extension\" , \"data\" : { \"id\" : 16 , \"name\" : \"ENSIGHTEN PORT - check for issue reproducibility\" , \"type\" : \"100036\" , \"status\" : \"inactive\" , \"kind\" : \"Extension\" , \"operation\" : \"toggled\" , \"container\" : \"customizations_16\" , \"tab_name\" : \"customizations\"}}]","lastcustomizeid":"0","publishedExtensions":"[ \"10\" , \"11\" , \"12\" , \"13\" , \"14\"]","linkedProfiles":"{ }","action":"Published to dev","versionorigin":"202101061314","publishedConsent":"[ ]","notes":"Update","operator":"caleb.jaquith@tealium.com","publishedTags":"[ \"1\"]","lastmanageid":"1","status":"dev"},"size":"38","status":"Not Published"},"202101141249":{"202101141249":{"lastmanageid":"2","status":"dev","publishedTags":"[ \"2\"]","operator":"caleb.jaquith@tealium.com","versionorigin":"202101141208","publishedConsent":"[ ]","notes":"Add mappings","action":"Published to dev","linkedProfiles":"{ }","publishedExtensions":"[ \"10\" , \"11\" , \"12\" , \"13\" , \"14\" , \"18\"]","history":"[ { \"action\" : \"updated_tag\" , \"data\" : { \"id\" : \"2\" , \"tag_name\" : \"Adobe Analytics AppMeasurement for JS\" , \"name\" : \"Adobe Analytics AppMeasurement for JS\" , \"kind\" : \"Tag\" , \"operation\" : \"updated\" , \"container\" : \"manage_content_161062544628600003\" , \"tab_name\" : \"manage\"}}]","title":"Version 2021.01.14.1249","lastcustomizeid":"0","datacloudLinkedProfiles":"{&quot;main&quot;:{&quot;rev&quot;:&quot;1605528129252&quot;,&quot;env&quot;:&quot;AudienceStream&quot;}}"},"title":"Version 2021.01.14.1249","size":"126","status":"Not Published"},"202101140946":{"title":"Version 2021.01.14.0945","status":"Not Published","size":"125","202101140946":{"notes":"Update mapping","versionorigin":"202101140943","publishedConsent":"[ ]","action":"Published to dev","lastmanageid":"2","status":"dev","publishedTags":"[ \"2\"]","operator":"caleb.jaquith@tealium.com","history":"[ { \"action\" : \"updated_tag\" , \"data\" : { \"id\" : \"2\" , \"tag_name\" : \"Adobe Analytics AppMeasurement for JS\" , \"name\" : \"Adobe Analytics AppMeasurement for JS\" , \"kind\" : \"Tag\" , \"operation\" : \"updated\" , \"container\" : \"manage_content_161061633636300884\" , \"tab_name\" : \"manage\"}}]","lastcustomizeid":"0","title":"Version 2021.01.14.0945","datacloudLinkedProfiles":"{&quot;main&quot;:{&quot;rev&quot;:&quot;1605528129252&quot;,&quot;env&quot;:&quot;AudienceStream&quot;}}","publishedExtensions":"[ \"10\" , \"11\" , \"12\" , \"13\" , \"14\" , \"18\"]","linkedProfiles":"{ }"}},"202101271135":{"title":"Version 2021.01.27.1135","202101271135":{"linkedProfiles":"{ }","publishedExtensions":"[ \"10\" , \"11\" , \"12\" , \"13\" , \"14\" , \"17\" , \"18\" , \"21\" , \"23\"]","lastcustomizeid":"0","title":"Version 2021.01.27.1135","history":"[ { \"action\" : \"added_tag\" , \"data\" : { \"id\" : \"9\" , \"tag_name\" : \"Google Analytics 4 (gtag.js) (BETA)\" , \"library\" : \"\" , \"name\" : \"Google Analytics 4 (gtag.js) (BETA)\" , \"kind\" : \"Tag\" , \"operation\" : \"added\" , \"container\" : \"manage_content_161174701278400015\" , \"tab_name\" : \"manage\"}} , { \"action\" : \"added_tag\" , \"data\" : { \"id\" : \"10\" , \"tag_name\" : \"Google Analytics (gtag.js)\" , \"library\" : \"\" , \"name\" : \"Google Analytics (gtag.js)\" , \"kind\" : \"Tag\" , \"operation\" : \"added\" , \"container\" : \"manage_content_161174703298400016\" , \"tab_name\" : \"manage\"}} , { \"action\" : \"updated_tag_order\" , \"data\" : { \"name\" : \"Tag Order\" , \"kind\" : \"Tag\" , \"operation\" : \"updated\" , \"tab_name\" : \"manage\"}} , { \"action\" : \"added_tag\" , \"data\" : { \"id\" : \"11\" , \"tag_name\" : \"Google Analytics (gtag.js)\" , \"library\" : \"\" , \"name\" : \"Google Analytics (gtag.js)\" , \"kind\" : \"Tag\" , \"operation\" : \"added\" , \"container\" : \"manage_content_161174729825300017\" , \"tab_name\" : \"manage\"}} , { \"action\" : \"updated_tag_order\" , \"data\" : { \"name\" : \"Tag Order\" , \"kind\" : \"Tag\" , \"operation\" : \"updated\" , \"tab_name\" : \"manage\"}}]","datacloudLinkedProfiles":"{&quot;main&quot;:{&quot;rev&quot;:&quot;1605528129252&quot;,&quot;env&quot;:&quot;AudienceStream&quot;}}","status":"dev","lastmanageid":"11","publishedTags":"[ \"3\" , \"5\" , \"6\" , \"9\" , \"10\" , \"11\"]","operator":"caleb.jaquith@tealium.com","publishedConsent":"[ ]","notes":"Update, first look","versionorigin":"202101191346","action":"Published to dev"},"status":"Not Published","size":"547"},"202101131228":{"title":"Version 2021.01.13.1228","202101131228":{"title":"Version 2021.01.13.1228","history":"[ { \"action\" : \"added_variable\" , \"data\" : { \"id\" : \"223\" , \"name\" : \"adobeLinkTrackVars\" , \"type\" : \"js\" , \"library\" : \"\" , \"kind\" : \"Variable\" , \"operation\" : \"added\" , \"container\" : \"defineObjectsList\" , \"tab_name\" : \"define\"}} , { \"action\" : \"added_variable\" , \"data\" : { \"id\" : \"224\" , \"name\" : \"adobeLinkTrackEvents\" , \"type\" : \"js\" , \"library\" : \"\" , \"kind\" : \"Variable\" , \"operation\" : \"added\" , \"container\" : \"defineObjectsList\" , \"tab_name\" : \"define\"}} , { \"action\" : \"updated_tag\" , \"data\" : { \"id\" : \"2\" , \"tag_name\" : \"Adobe Analytics AppMeasurement for JS\" , \"name\" : \"Adobe Analytics AppMeasurement for JS\" , \"kind\" : \"Tag\" , \"operation\" : \"updated\" , \"container\" : \"manage_content_161053932051602015\" , \"tab_name\" : \"manage\"}}]","lastcustomizeid":"0","datacloudLinkedProfiles":"{&quot;main&quot;:{&quot;rev&quot;:&quot;1605528129252&quot;,&quot;env&quot;:&quot;AudienceStream&quot;}}","publishedExtensions":"[ \"10\" , \"11\" , \"12\" , \"13\" , \"14\" , \"17\" , \"18\"]","linkedProfiles":"{ }","publishedConsent":"[ ]","notes":"Add mapping","versionorigin":"202101131222","action":"Published to dev","lastmanageid":"2","status":"dev","operator":"caleb.jaquith@tealium.com","publishedTags":"[ \"2\"]"},"size":"92","status":"Not Published"},"202101141339":{"title":"Version 2021.01.14.1339","202101141339":{"datacloudLinkedProfiles":"{&quot;main&quot;:{&quot;rev&quot;:&quot;1605528129252&quot;,&quot;env&quot;:&quot;AudienceStream&quot;}}","title":"Version 2021.01.14.1339","history":"[ { \"action\" : \"updated_tag\" , \"data\" : { \"id\" : \"2\" , \"tag_name\" : \"Adobe Analytics AppMeasurement for JS\" , \"name\" : \"Adobe Analytics AppMeasurement for JS\" , \"kind\" : \"Tag\" , \"operation\" : \"updated\" , \"container\" : \"manage_content_161062544628600003\" , \"tab_name\" : \"manage\"}} , { \"action\" : \"removed_variable\" , \"data\" : { \"id\" : 227 , \"name\" : \"map_prop230\" , \"type\" : \"js\" , \"library\" : \"\" , \"kind\" : \"Variable\" , \"operation\" : \"removed\" , \"tab_name\" : \"define\"}}]","lastcustomizeid":"0","linkedProfiles":"{ }","publishedExtensions":"[ \"10\" , \"11\" , \"12\" , \"13\" , \"14\" , \"18\"]","action":"Published to dev","publishedConsent":"[ ]","versionorigin":"202101141335","notes":"UPdate","publishedTags":"[ \"2\" , \"3\"]","operator":"caleb.jaquith@tealium.com","status":"dev","lastmanageid":"3"},"size":"272","status":"Not Published"},"202101131245":{"202101131245":{"title":"Version 2021.01.13.1245","lastcustomizeid":"0","history":"[ { \"action\" : \"updated_template\" , \"data\" : { \"id\" : \"2\" , \"kind\" : \"Template\" , \"operation\" : \"updated\" , \"name\" : \"Adobe Analytics AppMeasurement for JS\" , \"tag_name\" : \"Adobe Analytics AppMeasurement for JS\" , \"container\" : \"manage_content_161053932051602015\" , \"tab_name\" : \"Template\"}}]","datacloudLinkedProfiles":"{&quot;main&quot;:{&quot;rev&quot;:&quot;1605528129252&quot;,&quot;env&quot;:&quot;AudienceStream&quot;}}","linkedProfiles":"{ }","publishedExtensions":"[ \"10\" , \"11\" , \"12\" , \"13\" , \"14\" , \"17\" , \"18\"]","publishedConsent":"[ ]","notes":"Update position","versionorigin":"202101131243","action":"Published to dev","status":"dev","lastmanageid":"2","publishedTags":"[ \"2\"]","operator":"caleb.jaquith@tealium.com"},"status":"Not Published","size":"133","title":"Version 2021.01.13.1245"},"202104211040":{"size":"610","status":"Not Published","202104211040":{"action":"Published to dev","versionorigin":"202104211038","publishedConsent":"[ ]","notes":"UPdateeeeee","publishedTags":"[ \"3\" , \"5\" , \"6\" , \"9\" , \"10\" , \"11\" , \"12\" , \"13\"]","operator":"caleb.jaquith@tealium.com","lastmanageid":"13","status":"dev","datacloudLinkedProfiles":"{&quot;main&quot;:{&quot;rev&quot;:&quot;1618837227526&quot;,&quot;env&quot;:&quot;AudienceStream&quot;}}","title":"Version 2021.04.21.1040","history":"[ { \"action\" : \"updated_extension\" , \"data\" : { \"id\" : \"25\" , \"name\" : \"Aternative to DOM Ready (to solve timing issues)\" , \"type\" : \"100036\" , \"kind\" : \"Extension\" , \"operation\" : \"updated\" , \"container\" : \"customizations_25\" , \"tab_name\" : \"customizations\"}}]","lastcustomizeid":"0","linkedProfiles":"{ }","publishedExtensions":"[ \"10\" , \"11\" , \"12\" , \"13\" , \"14\" , \"17\" , \"18\" , \"21\" , \"23\" , \"25\" , \"26\"]"},"title":"Version 2021.04.21.1040"},"202101271235":{"size":"609","status":"prod,qa,dev","202101271235":{"action":"Published to dev","versionorigin":"202101271214","notes":"Update to prod","publishedConsent":"[ ]","operator":"caleb.jaquith@tealium.com","publishedTags":"[ \"3\" , \"5\" , \"6\" , \"9\" , \"10\" , \"11\" , \"12\" , \"13\"]","lastmanageid":"13","status":"prod,qa,dev","datacloudLinkedProfiles":"{&quot;main&quot;:{&quot;rev&quot;:&quot;1605528129252&quot;,&quot;env&quot;:&quot;AudienceStream&quot;}}","history":"[ ]","lastcustomizeid":"0","title":"Version 2021.01.27.1235","publishedExtensions":"[ \"10\" , \"11\" , \"12\" , \"13\" , \"14\" , \"17\" , \"18\" , \"21\" , \"23\"]","linkedProfiles":"{ }"},"title":"Version 2021.01.27.1235"},"202101131442":{"status":"Not Published","size":"133","202101131442":{"datacloudLinkedProfiles":"{&quot;main&quot;:{&quot;rev&quot;:&quot;1605528129252&quot;,&quot;env&quot;:&quot;AudienceStream&quot;}}","lastcustomizeid":"0","history":"[ { \"action\" : \"toggled_extension\" , \"data\" : { \"id\" : \"17\" , \"name\" : \"Fire u.addEvent as needed for specific events\" , \"type\" : \"100040\" , \"status\" : \"inactive\" , \"kind\" : \"Extension\" , \"operation\" : \"toggled\" , \"container\" : \"customizations_17\" , \"tab_name\" : \"customizations\"}} , { \"action\" : \"updated_tag\" , \"data\" : { \"id\" : \"2\" , \"tag_name\" : \"Adobe Analytics AppMeasurement for JS\" , \"name\" : \"Adobe Analytics AppMeasurement for JS\" , \"kind\" : \"Tag\" , \"operation\" : \"updated\" , \"container\" : \"manage_content_161054852573600003\" , \"tab_name\" : \"manage\"}}]","title":"Version 2021.01.13.1442","publishedExtensions":"[ \"10\" , \"11\" , \"12\" , \"13\" , \"14\" , \"18\"]","linkedProfiles":"{ }","action":"Published to dev","versionorigin":"202101131245","notes":"Update","publishedConsent":"[ ]","publishedTags":"[ \"2\"]","operator":"caleb.jaquith@tealium.com","lastmanageid":"2","status":"dev"},"title":"Version 2021.01.13.1442"},"202101131233":{"status":"Not Published","size":"92","202101131233":{"publishedTags":"[ \"2\"]","operator":"caleb.jaquith@tealium.com","lastmanageid":"2","status":"dev","action":"Published to dev","publishedConsent":"[ ]","notes":"Add mapping","versionorigin":"202101131228","linkedProfiles":"{ }","publishedExtensions":"[ \"10\" , \"11\" , \"12\" , \"13\" , \"14\" , \"17\" , \"18\"]","datacloudLinkedProfiles":"{&quot;main&quot;:{&quot;rev&quot;:&quot;1605528129252&quot;,&quot;env&quot;:&quot;AudienceStream&quot;}}","title":"Version 2021.01.13.1233","history":"[ { \"action\" : \"added_variable\" , \"data\" : { \"id\" : \"225\" , \"name\" : \"event_name\" , \"type\" : \"js\" , \"library\" : \"\" , \"kind\" : \"Variable\" , \"operation\" : \"added\" , \"container\" : \"defineObjectsList\" , \"tab_name\" : \"define\"}} , { \"action\" : \"updated_tag\" , \"data\" : { \"id\" : \"2\" , \"tag_name\" : \"Adobe Analytics AppMeasurement for JS\" , \"name\" : \"Adobe Analytics AppMeasurement for JS\" , \"kind\" : \"Tag\" , \"operation\" : \"updated\" , \"container\" : \"manage_content_161053932051602015\" , \"tab_name\" : \"manage\"}}]","lastcustomizeid":"0"},"title":"Version 2021.01.13.1233"},"202101151322":{"title":"Version 2021.01.15.1322","202101151322":{"action":"Published to dev","notes":"Actually push","publishedConsent":"[ ]","versionorigin":"202101151319","publishedTags":"[ \"3\" , \"5\" , \"6\"]","operator":"caleb.jaquith@tealium.com","status":"prod,qa,dev","lastmanageid":"6","datacloudLinkedProfiles":"{&quot;main&quot;:{&quot;rev&quot;:&quot;1605528129252&quot;,&quot;env&quot;:&quot;AudienceStream&quot;}}","title":"Version 2021.01.15.1322","history":"[ { \"action\" : \"toggled_extension\" , \"data\" : { \"id\" : \"18\" , \"name\" : \"Add some test events\" , \"type\" : \"100040\" , \"status\" : \"active\" , \"kind\" : \"Extension\" , \"operation\" : \"toggled\" , \"container\" : \"customizations_18\" , \"tab_name\" : \"customizations\"}}]","lastcustomizeid":"0","linkedProfiles":"{ }","publishedExtensions":"[ \"10\" , \"11\" , \"12\" , \"13\" , \"14\" , \"17\" , \"18\" , \"21\"]"},"status":"Not Published","size":"348"},"202104211047":{"202104211047":{"linkedProfiles":"{ }","publishedExtensions":"[ \"10\" , \"11\" , \"12\" , \"13\" , \"14\" , \"17\" , \"18\" , \"21\" , \"23\" , \"25\" , \"26\"]","lastcustomizeid":"0","title":"Version 2021.04.21.1047","history":"[ { \"action\" : \"updated_extension\" , \"data\" : { \"id\" : \"25\" , \"name\" : \"Alternative to DOM Ready (to solve timing issues)\" , \"type\" : \"100036\" , \"kind\" : \"Extension\" , \"operation\" : \"updated\" , \"container\" : \"customizations_25\" , \"tab_name\" : \"customizations\"}}]","datacloudLinkedProfiles":"{&quot;main&quot;:{&quot;rev&quot;:&quot;1618837227526&quot;,&quot;env&quot;:&quot;AudienceStream&quot;}}","status":"dev","lastmanageid":"13","publishedTags":"[ \"3\" , \"5\" , \"6\" , \"9\" , \"10\" , \"11\" , \"12\" , \"13\"]","operator":"caleb.jaquith@tealium.com","publishedConsent":"[ ]","notes":"Update","versionorigin":"202104211045","action":"Published to dev"},"size":"610","status":"Not Published","title":"Version 2021.04.21.1047"},"202101151212":{"title":"Version 2021.01.15.1211","202101151212":{"datacloudLinkedProfiles":"{&quot;main&quot;:{&quot;rev&quot;:&quot;1605528129252&quot;,&quot;env&quot;:&quot;AudienceStream&quot;}}","lastcustomizeid":"0","history":"[ { \"action\" : \"added_extension\" , \"data\" : { \"id\" : \"21\" , \"name\" : \"No Title\" , \"type\" : \"100003\" , \"library\" : \"\" , \"kind\" : \"Extension\" , \"operation\" : \"added\" , \"container\" : \"customizations_21\" , \"tab_name\" : \"customizations\"}} , { \"action\" : \"added_variable\" , \"data\" : { \"id\" : \"228\" , \"name\" : \"mapToAdobeLinkTrackVars\" , \"type\" : \"js\" , \"library\" : \"\" , \"kind\" : \"Variable\" , \"operation\" : \"added\" , \"container\" : \"defineObjectsList\" , \"tab_name\" : \"define\"}} , { \"action\" : \"added_variable\" , \"data\" : { \"id\" : \"229\" , \"name\" : \"mapToAdobeLinkTrackEvents\" , \"type\" : \"js\" , \"library\" : \"\" , \"kind\" : \"Variable\" , \"operation\" : \"added\" , \"container\" : \"defineObjectsList\" , \"tab_name\" : \"define\"}}]","title":"Version 2021.01.15.1211","linkedProfiles":"{ }","publishedExtensions":"[ \"10\" , \"11\" , \"12\" , \"13\" , \"14\" , \"17\" , \"18\" , \"21\"]","action":"Published to dev","versionorigin":"202101151209","notes":"Update","publishedConsent":"[ ]","publishedTags":"[ \"3\" , \"5\"]","operator":"caleb.jaquith@tealium.com","status":"dev","lastmanageid":"5"},"size":"280","status":"Not Published"},"202101131222":{"title":"Version 2021.01.13.1222","202101131222":{"title":"Version 2021.01.13.1222","lastcustomizeid":"0","history":"[ { \"action\" : \"updated_extension\" , \"data\" : { \"id\" : 18 , \"name\" : \"Add some test events\" , \"type\" : \"100040\" , \"kind\" : \"Extension\" , \"operation\" : \"updated\" , \"container\" : \"customizations_18\" , \"tab_name\" : \"customizations\"}}]","datacloudLinkedProfiles":"{&quot;main&quot;:{&quot;rev&quot;:&quot;1605528129252&quot;,&quot;env&quot;:&quot;AudienceStream&quot;}}","publishedExtensions":"[ \"10\" , \"11\" , \"12\" , \"13\" , \"14\" , \"17\" , \"18\"]","linkedProfiles":"{ }","publishedConsent":"[ ]","notes":"Update","versionorigin":"202101131222","action":"Published to dev","status":"dev","lastmanageid":"2","operator":"caleb.jaquith@tealium.com","publishedTags":"[ \"2\"]"},"size":"92","status":"Not Published"},"202104211038":{"title":"Version 2021.04.21.1038","202104211038":{"datacloudLinkedProfiles":"{&quot;main&quot;:{&quot;rev&quot;:&quot;1618837227526&quot;,&quot;env&quot;:&quot;AudienceStream&quot;}}","history":"[ { \"action\" : \"added_extension\" , \"data\" : { \"id\" : \"26\" , \"name\" : \"No Title\" , \"type\" : \"100003\" , \"library\" : \"\" , \"kind\" : \"Extension\" , \"operation\" : \"added\" , \"container\" : \"customizations_26\" , \"tab_name\" : \"customizations\"}} , { \"action\" : \"added_variable\" , \"data\" : { \"id\" : \"322\" , \"name\" : \"pageCategory\" , \"type\" : \"js\" , \"library\" : \"\" , \"kind\" : \"Variable\" , \"operation\" : \"added\" , \"container\" : \"defineObjectsList\" , \"tab_name\" : \"define\"}} , { \"action\" : \"toggled_extension\" , \"data\" : { \"id\" : \"24\" , \"name\" : \"Copy b to utag.data when possible\" , \"type\" : \"100036\" , \"status\" : \"inactive\" , \"kind\" : \"Extension\" , \"operation\" : \"toggled\" , \"container\" : \"customizations_24\" , \"tab_name\" : \"customizations\"}} , { \"action\" : \"updated_extension_order\" , \"data\" : { \"name\" : \"Extension Order\" , \"kind\" : \"Extension\" , \"operation\" : \"updated\" , \"tab_name\" : \"customizations\"}} , { \"action\" : \"updated_extension\" , \"data\" : { \"id\" : \"25\" , \"name\" : \"Aternative to DOM Ready (to solve timing issues)\" , \"type\" : \"100036\" , \"kind\" : \"Extension\" , \"operation\" : \"updated\" , \"container\" : \"customizations_25\" , \"tab_name\" : \"customizations\"}}]","title":"Version 2021.04.21.1038","lastcustomizeid":"0","publishedExtensions":"[ \"10\" , \"11\" , \"12\" , \"13\" , \"14\" , \"17\" , \"18\" , \"21\" , \"23\" , \"25\" , \"26\"]","linkedProfiles":"{ }","action":"Published to dev","notes":"Update","publishedConsent":"[ ]","versionorigin":"202104211035","operator":"caleb.jaquith@tealium.com","publishedTags":"[ \"3\" , \"5\" , \"6\" , \"9\" , \"10\" , \"11\" , \"12\" , \"13\"]","status":"dev","lastmanageid":"13"},"size":"610","status":"Not Published"},"202101060841":{"status":"Not Published","size":"35","title":"Version 2021.01.06.0841","202101060841":{"linkedProfiles":"{ }","publishedExtensions":"[ \"10\" , \"11\" , \"12\" , \"13\" , \"14\"]","datacloudLinkedProfiles":"{&quot;main&quot;:{&quot;rev&quot;:&quot;1605528129252&quot;,&quot;env&quot;:&quot;AudienceStream&quot;}}","title":"Version 2021.01.06.0841","history":"[ { \"action\" : \"updated_extension\" , \"data\" : { \"id\" : \"14\" , \"name\" : \"GTM Listener (5/5) - Add 'tiq.load' and 'tiq.dom' pushes to dataLayer \" , \"type\" : \"100036\" , \"kind\" : \"Extension\" , \"operation\" : \"updated\" , \"container\" : \"customizations_14\" , \"tab_name\" : \"customizations\"}}]","lastcustomizeid":"0","operator":"caleb.jaquith@tealium.com","publishedTags":"[ \"1\"]","status":"dev","lastmanageid":"1","action":"Published to dev","publishedConsent":"[ ]","notes":"Fix typo","versionorigin":"202101060831"}},"202101271201":{"202101271201":{"notes":"Add fixed templates","publishedConsent":"[ ]","versionorigin":"202101271150","action":"Published to dev","lastmanageid":"13","status":"dev","publishedTags":"[ \"3\" , \"5\" , \"6\" , \"9\" , \"10\" , \"11\" , \"12\" , \"13\"]","operator":"caleb.jaquith@tealium.com","title":"Version 2021.01.27.1200","lastcustomizeid":"0","history":"[ { \"action\" : \"updated_template\" , \"data\" : { \"id\" : \"12\" , \"kind\" : \"Template\" , \"operation\" : \"updated\" , \"name\" : \"Google Analytics (gtag.js) - Tag 1, Fixed\" , \"tag_name\" : \"Google Analytics (gtag.js)\" , \"container\" : \"manage_content_161174794413500018\" , \"tab_name\" : \"Template\"}} , { \"action\" : \"updated_template\" , \"data\" : { \"id\" : \"13\" , \"kind\" : \"Template\" , \"operation\" : \"updated\" , \"name\" : \"Google Analytics (gtag.js) - Tag 2, Fixed\" , \"tag_name\" : \"Google Analytics (gtag.js)\" , \"container\" : \"manage_content_161174796387100019\" , \"tab_name\" : \"Template\"}}]","datacloudLinkedProfiles":"{&quot;main&quot;:{&quot;rev&quot;:&quot;1605528129252&quot;,&quot;env&quot;:&quot;AudienceStream&quot;}}","publishedExtensions":"[ \"10\" , \"11\" , \"12\" , \"13\" , \"14\" , \"17\" , \"18\" , \"21\" , \"23\"]","linkedProfiles":"{ }"},"size":"608","status":"Not Published","title":"Version 2021.01.27.1200"},"202101140948":{"title":"Version 2021.01.14.0948","size":"125","status":"Not Published","202101140948":{"action":"Published to dev","publishedConsent":"[ ]","notes":"Force","versionorigin":"202101140946","publishedTags":"[ \"2\"]","operator":"caleb.jaquith@tealium.com","status":"dev","lastmanageid":"2","datacloudLinkedProfiles":"{&quot;main&quot;:{&quot;rev&quot;:&quot;1605528129252&quot;,&quot;env&quot;:&quot;AudienceStream&quot;}}","history":"[ { \"action\" : \"updated_tag\" , \"data\" : { \"id\" : \"2\" , \"tag_name\" : \"Adobe Analytics AppMeasurement for JS\" , \"name\" : \"Adobe Analytics AppMeasurement for JS\" , \"kind\" : \"Tag\" , \"operation\" : \"updated\" , \"container\" : \"manage_content_161061633636300884\" , \"tab_name\" : \"manage\"}}]","lastcustomizeid":"0","title":"Version 2021.01.14.0948","publishedExtensions":"[ \"10\" , \"11\" , \"12\" , \"13\" , \"14\" , \"18\"]","linkedProfiles":"{ }"}},"202101271141":{"size":"547","status":"Not Published","title":"Version 2021.01.27.1140","202101271141":{"action":"Published to dev","versionorigin":"202101271135","notes":"Fix","publishedConsent":"[ ]","publishedTags":"[ \"3\" , \"5\" , \"6\" , \"9\" , \"10\" , \"11\"]","operator":"caleb.jaquith@tealium.com","lastmanageid":"11","status":"dev","datacloudLinkedProfiles":"{&quot;main&quot;:{&quot;rev&quot;:&quot;1605528129252&quot;,&quot;env&quot;:&quot;AudienceStream&quot;}}","lastcustomizeid":"0","history":"[ { \"action\" : \"updated_tag\" , \"data\" : { \"id\" : \"11\" , \"tag_name\" : \"Google Analytics (gtag.js)\" , \"name\" : \"Google Analytics (gtag.js)\" , \"kind\" : \"Tag\" , \"operation\" : \"updated\" , \"container\" : \"manage_content_161174729825300017\" , \"tab_name\" : \"manage\"}}]","title":"Version 2021.01.27.1140","linkedProfiles":"{ }","publishedExtensions":"[ \"10\" , \"11\" , \"12\" , \"13\" , \"14\" , \"17\" , \"18\" , \"21\" , \"23\"]"}},"202101141332":{"202101141332":{"action":"Published to dev","publishedConsent":"[ ]","versionorigin":"202101141330","notes":"Update","publishedTags":"[ \"2\" , \"3\"]","operator":"caleb.jaquith@tealium.com","status":"dev","lastmanageid":"3","datacloudLinkedProfiles":"{&quot;main&quot;:{&quot;rev&quot;:&quot;1605528129252&quot;,&quot;env&quot;:&quot;AudienceStream&quot;}}","history":"[ { \"action\" : \"updated_tag\" , \"data\" : { \"id\" : \"2\" , \"tag_name\" : \"Adobe Analytics AppMeasurement for JS\" , \"name\" : \"Adobe Analytics AppMeasurement for JS\" , \"kind\" : \"Tag\" , \"operation\" : \"updated\" , \"container\" : \"manage_content_161062544628600003\" , \"tab_name\" : \"manage\"}}]","lastcustomizeid":"0","title":"Version 2021.01.14.1332","linkedProfiles":"{ }","publishedExtensions":"[ \"10\" , \"11\" , \"12\" , \"13\" , \"14\" , \"18\"]"},"title":"Version 2021.01.14.1332","size":"272","status":"Not Published"},"202009281219":{"status":"Not Published","size":"33","title":"Initial publish","202009281219":{"versionorigin":"","publishedConsent":"","notes":"Initial publish on profile creation","action":"Published to dev","lastmanageid":"","status":"prod,qa,dev","publishedTags":"[ ]","operator":"caleb.jaquith@tealium.com","title":"Initial publish","lastcustomizeid":"","history":"","datacloudLinkedProfiles":"{}","linkedProfiles":"{ }","publishedExtensions":"[ \"2\" , \"3\" , \"4\" , \"8\"]"}},"202104211136":{"status":"qa,dev","size":"610","202104211136":{"action":"Published to dev","publishedConsent":"[ ]","notes":"UPdate","versionorigin":"202104211120","operator":"caleb.jaquith@tealium.com","publishedTags":"[ \"3\" , \"5\" , \"6\" , \"9\" , \"10\" , \"11\" , \"12\" , \"13\"]","status":"qa,dev","lastmanageid":"13","datacloudLinkedProfiles":"{&quot;main&quot;:{&quot;rev&quot;:&quot;1618837227526&quot;,&quot;env&quot;:&quot;AudienceStream&quot;}}","history":"[ { \"action\" : \"updated_extension\" , \"data\" : { \"id\" : \"25\" , \"name\" : \"Test Alternative to DOM Ready (to solve timing issues)\" , \"type\" : \"100036\" , \"kind\" : \"Extension\" , \"operation\" : \"updated\" , \"container\" : \"customizations_25\" , \"tab_name\" : \"customizations\"}}]","title":"Version 2021.04.21.1135","lastcustomizeid":"0","linkedProfiles":"{ }","publishedExtensions":"[ \"10\" , \"11\" , \"12\" , \"13\" , \"14\" , \"17\" , \"18\" , \"21\" , \"23\" , \"25\" , \"26\"]"},"title":"Version 2021.04.21.1135"},"202101271214":{"title":"Version 2021.01.27.1214","202101271214":{"notes":"Add load rules and reorder","versionorigin":"202101271201","publishedConsent":"[ ]","action":"Published to dev","status":"dev","lastmanageid":"13","operator":"caleb.jaquith@tealium.com","publishedTags":"[ \"3\" , \"5\" , \"6\" , \"9\" , \"10\" , \"11\" , \"12\" , \"13\"]","history":"[ { \"action\" : \"updated_tag_order\" , \"data\" : { \"name\" : \"Tag Order\" , \"kind\" : \"Tag\" , \"operation\" : \"updated\" , \"tab_name\" : \"manage\"}} , { \"action\" : \"updated_tag\" , \"data\" : { \"id\" : \"11\" , \"tag_name\" : \"Google Analytics (gtag.js)\" , \"name\" : \"Google Analytics (gtag.js) - Tag 2, Marketplace\" , \"kind\" : \"Tag\" , \"operation\" : \"updated\" , \"container\" : \"manage_content_161174729825300017\" , \"tab_name\" : \"manage\"}} , { \"action\" : \"updated_tag\" , \"data\" : { \"id\" : \"12\" , \"tag_name\" : \"Google Analytics (gtag.js)\" , \"name\" : \"Google Analytics (gtag.js) - Tag 1, Fixed\" , \"kind\" : \"Tag\" , \"operation\" : \"updated\" , \"container\" : \"manage_content_161174794413500018\" , \"tab_name\" : \"manage\"}} , { \"action\" : \"updated_tag\" , \"data\" : { \"id\" : \"13\" , \"tag_name\" : \"Google Analytics (gtag.js)\" , \"name\" : \"Google Analytics (gtag.js) - Tag 2, Fixed\" , \"kind\" : \"Tag\" , \"operation\" : \"updated\" , \"container\" : \"manage_content_161174796387100019\" , \"tab_name\" : \"manage\"}}]","lastcustomizeid":"0","title":"Version 2021.01.27.1214","datacloudLinkedProfiles":"{&quot;main&quot;:{&quot;rev&quot;:&quot;1605528129252&quot;,&quot;env&quot;:&quot;AudienceStream&quot;}}","publishedExtensions":"[ \"10\" , \"11\" , \"12\" , \"13\" , \"14\" , \"17\" , \"18\" , \"21\" , \"23\"]","linkedProfiles":"{ }"},"status":"prod,qa","size":"609"},"202101141330":{"status":"Not Published","202101141330":{"datacloudLinkedProfiles":"{&quot;main&quot;:{&quot;rev&quot;:&quot;1605528129252&quot;,&quot;env&quot;:&quot;AudienceStream&quot;}}","history":"[ { \"action\" : \"updated_tag\" , \"data\" : { \"id\" : \"2\" , \"tag_name\" : \"Adobe Analytics AppMeasurement for JS\" , \"name\" : \"Adobe Analytics AppMeasurement for JS\" , \"kind\" : \"Tag\" , \"operation\" : \"updated\" , \"container\" : \"manage_content_161062544628600003\" , \"tab_name\" : \"manage\"}}]","lastcustomizeid":"0","title":"Version 2021.01.14.1330","publishedExtensions":"[ \"10\" , \"11\" , \"12\" , \"13\" , \"14\" , \"18\"]","linkedProfiles":"{ }","action":"Published to dev","notes":"Update","versionorigin":"202101141323","publishedConsent":"[ ]","publishedTags":"[ \"2\" , \"3\"]","operator":"caleb.jaquith@tealium.com","lastmanageid":"3","status":"dev"},"size":"273","title":"Version 2021.01.14.1330"},"202104211045":{"size":"610","status":"Not Published","202104211045":{"status":"dev","lastmanageid":"13","operator":"caleb.jaquith@tealium.com","publishedTags":"[ \"3\" , \"5\" , \"6\" , \"9\" , \"10\" , \"11\" , \"12\" , \"13\"]","publishedConsent":"[ ]","notes":"Update to always run","versionorigin":"202104211044","action":"Published to dev","publishedExtensions":"[ \"10\" , \"11\" , \"12\" , \"13\" , \"14\" , \"17\" , \"18\" , \"21\" , \"23\" , \"25\" , \"26\"]","linkedProfiles":"{ }","lastcustomizeid":"0","history":"[ { \"action\" : \"updated_extension\" , \"data\" : { \"id\" : \"25\" , \"name\" : \"Alternative to DOM Ready (to solve timing issues)\" , \"type\" : \"100036\" , \"kind\" : \"Extension\" , \"operation\" : \"updated\" , \"container\" : \"customizations_25\" , \"tab_name\" : \"customizations\"}}]","title":"Version 2021.04.21.1045","datacloudLinkedProfiles":"{&quot;main&quot;:{&quot;rev&quot;:&quot;1618837227526&quot;,&quot;env&quot;:&quot;AudienceStream&quot;}}"},"title":"Version 2021.04.21.1045"},"202101151150":{"title":"Version 2021.01.15.1150","size":"273","202101151150":{"action":"Published to dev","versionorigin":"202101151149","notes":"FIx typo in template","publishedConsent":"[ ]","operator":"caleb.jaquith@tealium.com","publishedTags":"[ \"2\" , \"3\"]","lastmanageid":"3","status":"dev","datacloudLinkedProfiles":"{&quot;main&quot;:{&quot;rev&quot;:&quot;1605528129252&quot;,&quot;env&quot;:&quot;AudienceStream&quot;}}","history":"[ { \"action\" : \"updated_template\" , \"data\" : { \"id\" : \"2\" , \"kind\" : \"Template\" , \"operation\" : \"updated\" , \"name\" : \"Adobe Analytics AppMeasurement for JS\" , \"tag_name\" : \"Adobe Analytics AppMeasurement for JS\" , \"container\" : \"manage_content_161071068866400012\" , \"tab_name\" : \"Template\"}}]","lastcustomizeid":"0","title":"Version 2021.01.15.1150","publishedExtensions":"[ \"10\" , \"11\" , \"12\" , \"13\" , \"14\" , \"17\" , \"18\"]","linkedProfiles":"{ }"},"status":"Not Published"},"202101111126":{"title":"Version 2021.01.11.1126","status":"Not Published","202101111126":{"datacloudLinkedProfiles":"{&quot;main&quot;:{&quot;rev&quot;:&quot;1605528129252&quot;,&quot;env&quot;:&quot;AudienceStream&quot;}}","history":"[ { \"action\" : \"added_tag\" , \"data\" : { \"id\" : \"2\" , \"tag_name\" : \"Adobe Analytics AppMeasurement for JS\" , \"library\" : \"\" , \"name\" : \"Adobe Analytics AppMeasurement for JS\" , \"kind\" : \"Tag\" , \"operation\" : \"added\" , \"container\" : \"manage_content_161036440217601229\" , \"tab_name\" : \"manage\"}}]","lastcustomizeid":"0","linkedProfiles":"{ }","action":"Save profile","versionorigin":"202101071730","notes":"Save for template","operator":"caleb.jaquith@tealium.com","lastmanageid":"2"}},"202104210843":{"title":"Version 2021.04.21.0843","status":"Not Published","size":"610","202104210843":{"notes":"Add DOM Ready dump","publishedConsent":"[ ]","versionorigin":"202104210840","action":"Published to dev","status":"dev","lastmanageid":"13","operator":"caleb.jaquith@tealium.com","publishedTags":"[ \"3\" , \"5\" , \"6\" , \"9\" , \"10\" , \"11\" , \"12\" , \"13\"]","title":"Version 2021.04.21.0843","history":"[ { \"action\" : \"added_extension\" , \"data\" : { \"id\" : \"25\" , \"name\" : \"No Title\" , \"type\" : \"100036\" , \"library\" : \"\" , \"kind\" : \"Extension\" , \"operation\" : \"added\" , \"container\" : \"customizations_25\" , \"tab_name\" : \"customizations\"}}]","lastcustomizeid":"0","datacloudLinkedProfiles":"{&quot;main&quot;:{&quot;rev&quot;:&quot;1618837227526&quot;,&quot;env&quot;:&quot;AudienceStream&quot;}}","publishedExtensions":"[ \"10\" , \"11\" , \"12\" , \"13\" , \"14\" , \"17\" , \"18\" , \"21\" , \"23\" , \"24\" , \"25\"]","linkedProfiles":"{ }"}},"202101140943":{"size":"125","status":"Not Published","title":"Version 2021.01.14.0942","202101140943":{"datacloudLinkedProfiles":"{&quot;main&quot;:{&quot;rev&quot;:&quot;1605528129252&quot;,&quot;env&quot;:&quot;AudienceStream&quot;}}","title":"Version 2021.01.14.0942","lastcustomizeid":"0","history":"[ { \"action\" : \"updated_tag\" , \"data\" : { \"id\" : \"2\" , \"tag_name\" : \"Adobe Analytics AppMeasurement for JS\" , \"name\" : \"Adobe Analytics AppMeasurement for JS\" , \"kind\" : \"Tag\" , \"operation\" : \"updated\" , \"container\" : \"manage_content_161061633636300884\" , \"tab_name\" : \"manage\"}} , { \"action\" : \"updated_template\" , \"data\" : { \"id\" : \"2\" , \"kind\" : \"Template\" , \"operation\" : \"updated\" , \"name\" : \"Adobe Analytics AppMeasurement for JS\" , \"tag_name\" : \"Adobe Analytics AppMeasurement for JS\" , \"container\" : \"manage_content_161061633636300884\" , \"tab_name\" : \"Template\"}}]","publishedExtensions":"[ \"10\" , \"11\" , \"12\" , \"13\" , \"14\" , \"18\"]","linkedProfiles":"{ }","action":"Published to dev","versionorigin":"202101140934","notes":"AA template restored to 2.14","publishedConsent":"[ ]","operator":"caleb.jaquith@tealium.com","publishedTags":"[ \"2\"]","status":"dev","lastmanageid":"2"}},"202104210840":{"202104210840":{"notes":"Update","versionorigin":"202101271235","publishedConsent":"[ ]","action":"Published to dev","status":"dev","lastmanageid":"13","operator":"caleb.jaquith@tealium.com","publishedTags":"[ \"3\" , \"5\" , \"6\" , \"9\" , \"10\" , \"11\" , \"12\" , \"13\"]","lastcustomizeid":"0","title":"Version 2021.04.21.0840","history":"[ { \"action\" : \"added_extension\" , \"data\" : { \"id\" : \"24\" , \"name\" : \"No Title\" , \"type\" : \"100036\" , \"library\" : \"\" , \"kind\" : \"Extension\" , \"operation\" : \"added\" , \"container\" : \"customizations_24\" , \"tab_name\" : \"customizations\"}}]","datacloudLinkedProfiles":"{&quot;main&quot;:{&quot;rev&quot;:&quot;1618837227526&quot;,&quot;env&quot;:&quot;AudienceStream&quot;}}","publishedExtensions":"[ \"10\" , \"11\" , \"12\" , \"13\" , \"14\" , \"17\" , \"18\" , \"21\" , \"23\" , \"24\"]","linkedProfiles":"{ }"},"title":"Version 2021.04.21.0840","size":"610","status":"Not Published"},"202101061314":{"title":"Version 2021.01.06.1314","size":"37","202101061314":{"action":"Published to dev","notes":"Update listener helper constructor","versionorigin":"202101061308","publishedConsent":"[ ]","operator":"caleb.jaquith@tealium.com","publishedTags":"[ \"1\"]","lastmanageid":"1","status":"qa,dev","datacloudLinkedProfiles":"{&quot;main&quot;:{&quot;rev&quot;:&quot;1605528129252&quot;,&quot;env&quot;:&quot;AudienceStream&quot;}}","lastcustomizeid":"0","history":"[ { \"action\" : \"updated_extension\" , \"data\" : { \"id\" : \"13\" , \"name\" : \"GTM Listener (4/5) - Data Layer Listener Function\" , \"type\" : \"100040\" , \"kind\" : \"Extension\" , \"operation\" : \"updated\" , \"container\" : \"customizations_13\" , \"tab_name\" : \"customizations\"}}]","title":"Version 2021.01.06.1314","linkedProfiles":"{ }","publishedExtensions":"[ \"10\" , \"11\" , \"12\" , \"13\" , \"14\"]"},"status":"Not Published"},"202101151225":{"title":"Version 2021.01.15.1225","size":"280","202101151225":{"publishedTags":"[ \"3\" , \"5\"]","operator":"caleb.jaquith@tealium.com","lastmanageid":"5","status":"dev","action":"Published to dev","versionorigin":"202101151213","notes":"Reverse assignment","publishedConsent":"[ ]","linkedProfiles":"{ }","publishedExtensions":"[ \"10\" , \"11\" , \"12\" , \"13\" , \"14\" , \"17\" , \"18\" , \"21\"]","datacloudLinkedProfiles":"{&quot;main&quot;:{&quot;rev&quot;:&quot;1605528129252&quot;,&quot;env&quot;:&quot;AudienceStream&quot;}}","lastcustomizeid":"0","history":"[ { \"action\" : \"updated_extension\" , \"data\" : { \"id\" : 21 , \"name\" : \"Intermediate mappings to test \" , \"type\" : \"100003\" , \"kind\" : \"Extension\" , \"operation\" : \"updated\" , \"container\" : \"customizations_21\" , \"tab_name\" : \"customizations\"}}]","title":"Version 2021.01.15.1225"},"status":"Not Published"},"202101061251":{"status":"Not Published","size":"37","202101061251":{"linkedProfiles":"{ }","publishedExtensions":"[ \"10\" , \"11\" , \"12\" , \"13\" , \"14\"]","datacloudLinkedProfiles":"{&quot;main&quot;:{&quot;rev&quot;:&quot;1605528129252&quot;,&quot;env&quot;:&quot;AudienceStream&quot;}}","history":"[ { \"action\" : \"updated_extension\" , \"data\" : { \"id\" : \"14\" , \"name\" : \"GTM Listener (5/5) - Add 'tiq.load' and 'tiq.dom' pushes to dataLayer \" , \"type\" : \"100036\" , \"kind\" : \"Extension\" , \"operation\" : \"updated\" , \"container\" : \"customizations_14\" , \"tab_name\" : \"customizations\"}}]","lastcustomizeid":"0","title":"Version 2021.01.06.1251","publishedTags":"[ \"1\"]","operator":"caleb.jaquith@tealium.com","status":"dev","lastmanageid":"1","action":"Published to dev","versionorigin":"202101061243","publishedConsent":"[ ]","notes":"Update"},"title":"Version 2021.01.06.1251"},"202101140953":{"status":"Not Published","size":"126","202101140953":{"lastcustomizeid":"0","history":"[ { \"action\" : \"updated_tag\" , \"data\" : { \"id\" : \"2\" , \"tag_name\" : \"Adobe Analytics AppMeasurement for JS\" , \"name\" : \"Adobe Analytics AppMeasurement for JS\" , \"kind\" : \"Tag\" , \"operation\" : \"updated\" , \"container\" : \"manage_content_161061633636300884\" , \"tab_name\" : \"manage\"}}]","title":"Version 2021.01.14.0953","datacloudLinkedProfiles":"{&quot;main&quot;:{&quot;rev&quot;:&quot;1605528129252&quot;,&quot;env&quot;:&quot;AudienceStream&quot;}}","publishedExtensions":"[ \"10\" , \"11\" , \"12\" , \"13\" , \"14\" , \"18\"]","linkedProfiles":"{ }","notes":"Force","versionorigin":"202101140951","publishedConsent":"[ ]","action":"Published to dev","status":"dev","lastmanageid":"2","operator":"caleb.jaquith@tealium.com","publishedTags":"[ \"2\"]"},"title":"Version 2021.01.14.0953"},"202101191346":{"title":"Version 2021.01.19.1345","202101191346":{"action":"Published to dev","publishedConsent":"[ ]","notes":"Staging to QA","versionorigin":"202101191105","operator":"caleb.jaquith@tealium.com","publishedTags":"[ \"3\" , \"5\" , \"6\"]","status":"qa,dev","lastmanageid":"6","datacloudLinkedProfiles":"{&quot;main&quot;:{&quot;rev&quot;:&quot;1605528129252&quot;,&quot;env&quot;:&quot;AudienceStream&quot;}}","title":"Version 2021.01.19.1345","history":"[ { \"action\" : \"updated_extension\" , \"data\" : { \"id\" : \"23\" , \"name\" : \"TUI UK Plugin staging\" , \"type\" : \"100040\" , \"kind\" : \"Extension\" , \"operation\" : \"updated\" , \"container\" : \"customizations_23\" , \"tab_name\" : \"customizations\"}}]","lastcustomizeid":"0","linkedProfiles":"{ }","publishedExtensions":"[ \"10\" , \"11\" , \"12\" , \"13\" , \"14\" , \"17\" , \"18\" , \"21\" , \"23\"]"},"size":"469","status":"prod"},"202101141301":{"size":"126","202101141301":{"publishedExtensions":"[ \"10\" , \"11\" , \"12\" , \"13\" , \"14\" , \"18\"]","linkedProfiles":"{ }","datacloudLinkedProfiles":"{&quot;main&quot;:{&quot;rev&quot;:&quot;1605528129252&quot;,&quot;env&quot;:&quot;AudienceStream&quot;}}","history":"[ { \"action\" : \"updated_tag\" , \"data\" : { \"id\" : \"2\" , \"tag_name\" : \"Adobe Analytics AppMeasurement for JS\" , \"name\" : \"Adobe Analytics AppMeasurement for JS\" , \"kind\" : \"Tag\" , \"operation\" : \"updated\" , \"container\" : \"manage_content_161062544628600003\" , \"tab_name\" : \"manage\"}}]","lastcustomizeid":"0","title":"Version 2021.01.14.1300","publishedTags":"[ \"2\"]","operator":"caleb.jaquith@tealium.com","lastmanageid":"2","status":"dev","action":"Published to dev","publishedConsent":"[ ]","notes":"Update setting","versionorigin":"202101141249"},"status":"Not Published","title":"Version 2021.01.14.1300"},"202101140931":{"202101140931":{"operator":"caleb.jaquith@tealium.com","publishedTags":"[ \"2\"]","status":"dev","lastmanageid":"2","action":"Published to dev","notes":"Restore template","versionorigin":"202101131442","publishedConsent":"[ ]","publishedExtensions":"[ \"10\" , \"11\" , \"12\" , \"13\" , \"14\" , \"18\"]","linkedProfiles":"{ }","datacloudLinkedProfiles":"{&quot;main&quot;:{&quot;rev&quot;:&quot;1605528129252&quot;,&quot;env&quot;:&quot;AudienceStream&quot;}}","history":"[ ]","lastcustomizeid":"0","title":"Version 2021.01.14.0931"},"status":"Not Published","size":"133","title":"Version 2021.01.14.0931"},"202101061308":{"title":"Version 2021.01.06.1308","status":"Not Published","size":"37","202101061308":{"publishedExtensions":"[ \"10\" , \"11\" , \"12\" , \"13\" , \"14\"]","linkedProfiles":"{ }","datacloudLinkedProfiles":"{&quot;main&quot;:{&quot;rev&quot;:&quot;1605528129252&quot;,&quot;env&quot;:&quot;AudienceStream&quot;}}","lastcustomizeid":"0","title":"Version 2021.01.06.1308","history":"[ { \"action\" : \"updated_extension\" , \"data\" : { \"id\" : \"11\" , \"name\" : \"GTM Listener (2/5) - Data Layer Helper Library (provided by Google)\" , \"type\" : \"100040\" , \"kind\" : \"Extension\" , \"operation\" : \"updated\" , \"container\" : \"customizations_11\" , \"tab_name\" : \"customizations\"}}]","operator":"caleb.jaquith@tealium.com","publishedTags":"[ \"1\"]","lastmanageid":"1","status":"qa,dev","action":"Published to dev","publishedConsent":"[ ]","versionorigin":"202101061251","notes":"use debug library instead"}},"202101060829":{"202101060829":{"status":"dev","lastmanageid":"1","publishedTags":"[ \"1\"]","operator":"caleb.jaquith@tealium.com","publishedConsent":"[ ]","notes":"Update to delay loading","versionorigin":"202101060733","action":"Published to dev","publishedExtensions":"[ \"10\" , \"11\" , \"12\" , \"13\" , \"14\"]","linkedProfiles":"{ }","history":"[ { \"action\" : \"updated_extension\" , \"data\" : { \"id\" : \"14\" , \"name\" : \"GTM Listener (5/5) - Add 'tiq.load' and 'tiq.dom' pushes to dataLayer \" , \"type\" : \"100036\" , \"kind\" : \"Extension\" , \"operation\" : \"updated\" , \"container\" : \"customizations_14\" , \"tab_name\" : \"customizations\"}}]","lastcustomizeid":"0","title":"Version 2021.01.06.0829","datacloudLinkedProfiles":"{&quot;main&quot;:{&quot;rev&quot;:&quot;1605528129252&quot;,&quot;env&quot;:&quot;AudienceStream&quot;}}"},"size":"36","status":"Not Published","title":"Version 2021.01.06.0829"},"202101071703":{"202101071703":{"datacloudLinkedProfiles":"{&quot;main&quot;:{&quot;rev&quot;:&quot;1605528129252&quot;,&quot;env&quot;:&quot;AudienceStream&quot;}}","history":"[ { \"action\" : \"updated_extension\" , \"data\" : { \"id\" : \"13\" , \"name\" : \"GTM Listener (4/5) - Data Layer Listener Function\" , \"type\" : \"100040\" , \"kind\" : \"Extension\" , \"operation\" : \"updated\" , \"container\" : \"customizations_13\" , \"tab_name\" : \"customizations\"}}]","lastcustomizeid":"0","title":"Version 2021.01.07.1703","linkedProfiles":"{ }","publishedExtensions":"[ \"10\" , \"11\" , \"12\" , \"13\" , \"14\"]","action":"Published to dev","notes":"Update","versionorigin":"202101071637","publishedConsent":"[ ]","publishedTags":"[ \"1\"]","operator":"caleb.jaquith@tealium.com","status":"dev","lastmanageid":"1"},"title":"Version 2021.01.07.1703","status":"Not Published","size":"38"},"202101041942":{"202101041942":{"action":"Save profile","versionorigin":"202009281219","notes":"Save for template","operator":"caleb.jaquith@tealium.com","lastmanageid":"1","datacloudLinkedProfiles":"{&quot;main&quot;:{&quot;rev&quot;:&quot;1605528129252&quot;,&quot;env&quot;:&quot;AudienceStream&quot;}}","history":"[ { \"action\" : \"added_tag\" , \"data\" : { \"id\" : \"1\" , \"tag_name\" : \"Uniqodo\" , \"library\" : \"\" , \"name\" : \"Uniqodo\" , \"kind\" : \"Tag\" , \"operation\" : \"added\" , \"container\" : \"manage_content_160978933666500548\" , \"tab_name\" : \"manage\"}}]","lastcustomizeid":"0","linkedProfiles":"{ }"},"title":"Version 2021.01.04.1942","status":"Not Published"},"202104211120":{"size":"610","status":"Not Published","title":"Version 2021.04.21.1120","202104211120":{"datacloudLinkedProfiles":"{&quot;main&quot;:{&quot;rev&quot;:&quot;1618837227526&quot;,&quot;env&quot;:&quot;AudienceStream&quot;}}","title":"Version 2021.04.21.1120","lastcustomizeid":"0","history":"[ { \"action\" : \"updated_extension\" , \"data\" : { \"id\" : \"14\" , \"name\" : \"GTM Listener (5/5) - Add 'tiq.load' and 'tiq.dom' pushes to dataLayer \" , \"type\" : \"100036\" , \"kind\" : \"Extension\" , \"operation\" : \"updated\" , \"container\" : \"customizations_14\" , \"tab_name\" : \"customizations\"}} , { \"action\" : \"updated_extension\" , \"data\" : { \"id\" : \"13\" , \"name\" : \"GTM Listener (4/5) - Data Layer Listener Function\" , \"type\" : \"100040\" , \"kind\" : \"Extension\" , \"operation\" : \"updated\" , \"container\" : \"customizations_13\" , \"tab_name\" : \"customizations\"}} , { \"action\" : \"updated_extension\" , \"data\" : { \"id\" : \"25\" , \"name\" : \"Test Alternative to DOM Ready (to solve timing issues)\" , \"type\" : \"100036\" , \"kind\" : \"Extension\" , \"operation\" : \"updated\" , \"container\" : \"customizations_25\" , \"tab_name\" : \"customizations\"}}]","linkedProfiles":"{ }","publishedExtensions":"[ \"10\" , \"11\" , \"12\" , \"13\" , \"14\" , \"17\" , \"18\" , \"21\" , \"23\" , \"25\" , \"26\"]","action":"Published to dev","versionorigin":"202104211047","notes":"Update with custom event","publishedConsent":"[ ]","operator":"caleb.jaquith@tealium.com","publishedTags":"[ \"3\" , \"5\" , \"6\" , \"9\" , \"10\" , \"11\" , \"12\" , \"13\"]","lastmanageid":"13","status":"qa,dev"}},"202101131216":{"size":"91","status":"Not Published","202101131216":{"linkedProfiles":"{ }","publishedExtensions":"[ \"10\" , \"11\" , \"12\" , \"13\" , \"14\" , \"17\"]","history":"[ { \"action\" : \"added_extension\" , \"data\" : { \"id\" : \"17\" , \"name\" : \"No Title\" , \"type\" : \"100040\" , \"library\" : \"\" , \"kind\" : \"Extension\" , \"operation\" : \"added\" , \"container\" : \"customizations_17\" , \"tab_name\" : \"customizations\"}}]","lastcustomizeid":"0","title":"Version 2021.01.13.1216","datacloudLinkedProfiles":"{&quot;main&quot;:{&quot;rev&quot;:&quot;1605528129252&quot;,&quot;env&quot;:&quot;AudienceStream&quot;}}","status":"dev","lastmanageid":"2","operator":"caleb.jaquith@tealium.com","publishedTags":"[ \"2\"]","publishedConsent":"[ ]","notes":"Update","versionorigin":"202101131216","action":"Published to dev"},"title":"Version 2021.01.13.1216"},"202101060733":{"size":"36","status":"Not Published","title":"Version 2021.01.06.0733","202101060733":{"status":"qa,dev","lastmanageid":"1","publishedTags":"[ \"1\"]","operator":"caleb.jaquith@tealium.com","notes":"Copy listener for debugging","publishedConsent":"[ ]","versionorigin":"202101041942","action":"Published to dev","linkedProfiles":"{ }","publishedExtensions":"[ \"10\" , \"11\" , \"12\" , \"13\" , \"14\"]","history":"[ { \"action\" : \"added_extension\" , \"data\" : { \"id\" : \"10\" , \"name\" : \"GTM Listener (1/5) - Disable automatic utag.view call\" , \"type\" : \"100040\" , \"library\" : \"\" , \"kind\" : \"Extension\" , \"operation\" : \"added\" , \"container\" : \"customizations_10\" , \"tab_name\" : \"customizations\"}} , { \"action\" : \"added_extension\" , \"data\" : { \"id\" : \"11\" , \"name\" : \"GTM Listener (2/5) - Data Layer Helper Library (provided by Google)\" , \"type\" : \"100040\" , \"library\" : \"\" , \"kind\" : \"Extension\" , \"operation\" : \"added\" , \"container\" : \"customizations_11\" , \"tab_name\" : \"customizations\"}} , { \"action\" : \"added_extension\" , \"data\" : { \"id\" : \"12\" , \"name\" : \"GTM Listener (3/5) - Tealium Flattener Definitions\" , \"type\" : \"100040\" , \"library\" : \"\" , \"kind\" : \"Extension\" , \"operation\" : \"added\" , \"container\" : \"customizations_12\" , \"tab_name\" : \"customizations\"}} , { \"action\" : \"added_extension\" , \"data\" : { \"id\" : \"13\" , \"name\" : \"GTM Listener (4/5) - Data Layer Listener Function\" , \"type\" : \"100040\" , \"library\" : \"\" , \"kind\" : \"Extension\" , \"operation\" : \"added\" , \"container\" : \"customizations_13\" , \"tab_name\" : \"customizations\"}} , { \"action\" : \"added_extension\" , \"data\" : { \"id\" : \"14\" , \"name\" : \"GTM Listener (5/5) - Add 'tiq.load' and 'tiq.dom' pushes to dataLayer \" , \"type\" : \"100036\" , \"library\" : \"\" , \"kind\" : \"Extension\" , \"operation\" : \"added\" , \"container\" : \"customizations_14\" , \"tab_name\" : \"customizations\"}} , { \"action\" : \"removed_extension\" , \"data\" : { \"id\" : \"3\" , \"name\" : \"GTM Listener (4/4) - Data Layer Listener Function\" , \"type\" : \"100040\" , \"library\" : \"\" , \"kind\" : \"Extension\" , \"operation\" : \"removed\" , \"tab_name\" : \"customizations\"}} , { \"action\" : \"removed_extension\" , \"data\" : { \"id\" : \"8\" , \"name\" : \"GTM Listener (3/4) - Tealium Flattener Definitions\" , \"type\" : \"100040\" , \"library\" : \"\" , \"kind\" : \"Extension\" , \"operation\" : \"removed\" , \"tab_name\" : \"customizations\"}} , { \"action\" : \"removed_extension\" , \"data\" : { \"id\" : \"4\" , \"name\" : \"GTM Listener (1/4) - Disable automatic utag.view call\" , \"type\" : \"100040\" , \"library\" : \"\" , \"kind\" : \"Extension\" , \"operation\" : \"removed\" , \"tab_name\" : \"customizations\"}} , { \"action\" : \"removed_extension\" , \"data\" : { \"id\" : \"2\" , \"name\" : \"GTM Listener (2/4) - Data Layer Helper Library (provided by Google)\" , \"type\" : \"100040\" , \"library\" : \"\" , \"kind\" : \"Extension\" , \"operation\" : \"removed\" , \"tab_name\" : \"customizations\"}}]","title":"Version 2021.01.06.0733","lastcustomizeid":"0","datacloudLinkedProfiles":"{&quot;main&quot;:{&quot;rev&quot;:&quot;1605528129252&quot;,&quot;env&quot;:&quot;AudienceStream&quot;}}"}},"202104210846":{"size":"610","202104210846":{"action":"Published to dev","versionorigin":"202104210843","notes":"Update","publishedConsent":"[ ]","operator":"caleb.jaquith@tealium.com","publishedTags":"[ \"3\" , \"5\" , \"6\" , \"9\" , \"10\" , \"11\" , \"12\" , \"13\"]","lastmanageid":"13","status":"dev","datacloudLinkedProfiles":"{&quot;main&quot;:{&quot;rev&quot;:&quot;1618837227526&quot;,&quot;env&quot;:&quot;AudienceStream&quot;}}","history":"[ { \"action\" : \"updated_extension\" , \"data\" : { \"id\" : 24 , \"name\" : \"Copy b to utag.data when possible\" , \"type\" : \"100036\" , \"kind\" : \"Extension\" , \"operation\" : \"updated\" , \"container\" : \"customizations_24\" , \"tab_name\" : \"customizations\"}} , { \"action\" : \"updated_extension_order\" , \"data\" : { \"name\" : \"Extension Order\" , \"kind\" : \"Extension\" , \"operation\" : \"updated\" , \"tab_name\" : \"customizations\"}}]","lastcustomizeid":"0","title":"Version 2021.04.21.0846","linkedProfiles":"{ }","publishedExtensions":"[ \"10\" , \"11\" , \"12\" , \"13\" , \"14\" , \"17\" , \"18\" , \"21\" , \"23\" , \"24\" , \"25\"]"},"status":"Not Published","title":"Version 2021.04.21.0846"},"202101141323":{"title":"Version 2021.01.14.1323","status":"Not Published","202101141323":{"title":"Version 2021.01.14.1323","lastcustomizeid":"0","history":"[ { \"action\" : \"updated_tag\" , \"data\" : { \"id\" : \"2\" , \"tag_name\" : \"Adobe Analytics AppMeasurement for JS\" , \"name\" : \"Adobe Analytics AppMeasurement for JS\" , \"kind\" : \"Tag\" , \"operation\" : \"updated\" , \"container\" : \"manage_content_161062544628600003\" , \"tab_name\" : \"manage\"}} , { \"action\" : \"added_tag\" , \"data\" : { \"id\" : \"3\" , \"tag_name\" : \"Adobe Experience Cloud ID Service\" , \"library\" : \"\" , \"name\" : \"Adobe Experience Cloud ID Service\" , \"kind\" : \"Tag\" , \"operation\" : \"added\" , \"container\" : \"manage_content_161063055881700202\" , \"tab_name\" : \"manage\"}}]","datacloudLinkedProfiles":"{&quot;main&quot;:{&quot;rev&quot;:&quot;1605528129252&quot;,&quot;env&quot;:&quot;AudienceStream&quot;}}","linkedProfiles":"{ }","publishedExtensions":"[ \"10\" , \"11\" , \"12\" , \"13\" , \"14\" , \"18\"]","publishedConsent":"[ ]","versionorigin":"202101141320","notes":"Update","action":"Published to dev","lastmanageid":"3","status":"dev","operator":"caleb.jaquith@tealium.com","publishedTags":"[ \"2\" , \"3\"]"},"size":"273"},"202101151149":{"size":"273","202101151149":{"history":"[ { \"action\" : \"toggled_extension\" , \"data\" : { \"id\" : \"17\" , \"name\" : \"Fire u.addEvent as needed for specific events\" , \"type\" : \"100040\" , \"status\" : \"active\" , \"kind\" : \"Extension\" , \"operation\" : \"toggled\" , \"container\" : \"customizations_17\" , \"tab_name\" : \"customizations\"}} , { \"action\" : \"updated_extension\" , \"data\" : { \"id\" : \"17\" , \"name\" : \"Fire u.addEvent as needed for specific events\" , \"type\" : \"100040\" , \"kind\" : \"Extension\" , \"operation\" : \"updated\" , \"container\" : \"customizations_17\" , \"tab_name\" : \"customizations\"}}]","title":"Version 2021.01.15.1149","lastcustomizeid":"0","datacloudLinkedProfiles":"{&quot;main&quot;:{&quot;rev&quot;:&quot;1605528129252&quot;,&quot;env&quot;:&quot;AudienceStream&quot;}}","linkedProfiles":"{ }","publishedExtensions":"[ \"10\" , \"11\" , \"12\" , \"13\" , \"14\" , \"17\" , \"18\"]","notes":"Update","publishedConsent":"[ ]","versionorigin":"202101151141","action":"Published to dev","lastmanageid":"3","status":"dev","operator":"caleb.jaquith@tealium.com","publishedTags":"[ \"2\" , \"3\"]"},"status":"Not Published","title":"Version 2021.01.15.1149"},"202101060831":{"size":"35","status":"Not Published","202101060831":{"linkedProfiles":"{ }","publishedExtensions":"[ \"10\" , \"11\" , \"12\" , \"13\" , \"14\"]","datacloudLinkedProfiles":"{&quot;main&quot;:{&quot;rev&quot;:&quot;1605528129252&quot;,&quot;env&quot;:&quot;AudienceStream&quot;}}","history":"[ { \"action\" : \"updated_extension\" , \"data\" : { \"id\" : \"14\" , \"name\" : \"GTM Listener (5/5) - Add 'tiq.load' and 'tiq.dom' pushes to dataLayer \" , \"type\" : \"100036\" , \"kind\" : \"Extension\" , \"operation\" : \"updated\" , \"container\" : \"customizations_14\" , \"tab_name\" : \"customizations\"}}]","title":"Version 2021.01.06.0831","lastcustomizeid":"0","publishedTags":"[ \"1\"]","operator":"caleb.jaquith@tealium.com","status":"dev","lastmanageid":"1","action":"Published to dev","notes":"Remove timing event for now","publishedConsent":"[ ]","versionorigin":"202101060829"},"title":"Version 2021.01.06.0831"},"202101071713":{"title":"Version 2021.01.07.1713","202101071713":{"action":"Published to dev","publishedConsent":"[ ]","notes":"Update","versionorigin":"202101071703","operator":"caleb.jaquith@tealium.com","publishedTags":"[ \"1\"]","status":"dev","lastmanageid":"1","datacloudLinkedProfiles":"{&quot;main&quot;:{&quot;rev&quot;:&quot;1605528129252&quot;,&quot;env&quot;:&quot;AudienceStream&quot;}}","history":"[ { \"action\" : \"updated_extension\" , \"data\" : { \"id\" : \"13\" , \"name\" : \"GTM Listener (4/5) - Data Layer Listener Function\" , \"type\" : \"100040\" , \"kind\" : \"Extension\" , \"operation\" : \"updated\" , \"container\" : \"customizations_13\" , \"tab_name\" : \"customizations\"}}]","title":"Version 2021.01.07.1713","lastcustomizeid":"0","publishedExtensions":"[ \"10\" , \"11\" , \"12\" , \"13\" , \"14\"]","linkedProfiles":"{ }"},"size":"38","status":"Not Published"},"202101071354":{"title":"Version 2021.01.07.1354","202101071354":{"publishedConsent":"[ ]","notes":"Update","versionorigin":"202101071352","action":"Published to dev","lastmanageid":"1","status":"dev","publishedTags":"[ \"1\"]","operator":"caleb.jaquith@tealium.com","title":"Version 2021.01.07.1354","history":"[ { \"action\" : \"updated_extension\" , \"data\" : { \"id\" : \"14\" , \"name\" : \"GTM Listener (5/5) - Add 'tiq.load' and 'tiq.dom' pushes to dataLayer \" , \"type\" : \"100036\" , \"kind\" : \"Extension\" , \"operation\" : \"updated\" , \"container\" : \"customizations_14\" , \"tab_name\" : \"customizations\"}}]","lastcustomizeid":"0","datacloudLinkedProfiles":"{&quot;main&quot;:{&quot;rev&quot;:&quot;1605528129252&quot;,&quot;env&quot;:&quot;AudienceStream&quot;}}","publishedExtensions":"[ \"10\" , \"11\" , \"12\" , \"13\" , \"14\"]","linkedProfiles":"{ }"},"status":"Not Published","size":"38"},"202101151141":{"size":"273","status":"Not Published","202101151141":{"datacloudLinkedProfiles":"{&quot;main&quot;:{&quot;rev&quot;:&quot;1605528129252&quot;,&quot;env&quot;:&quot;AudienceStream&quot;}}","history":"[ { \"action\" : \"updated_template\" , \"data\" : { \"id\" : \"2\" , \"kind\" : \"Template\" , \"operation\" : \"updated\" , \"name\" : \"Adobe Analytics AppMeasurement for JS\" , \"tag_name\" : \"Adobe Analytics AppMeasurement for JS\" , \"container\" : \"manage_content_161071068866400012\" , \"tab_name\" : \"Template\"}}]","lastcustomizeid":"0","title":"Version 2021.01.15.1141","linkedProfiles":"{ }","publishedExtensions":"[ \"10\" , \"11\" , \"12\" , \"13\" , \"14\" , \"18\"]","action":"Published to dev","versionorigin":"202101141629","notes":"Update template","publishedConsent":"[ ]","operator":"caleb.jaquith@tealium.com","publishedTags":"[ \"2\" , \"3\"]","lastmanageid":"3","status":"dev"},"title":"Version 2021.01.15.1141"},"202101151155":{"size":"273","status":"Not Published","202101151155":{"datacloudLinkedProfiles":"{&quot;main&quot;:{&quot;rev&quot;:&quot;1605528129252&quot;,&quot;env&quot;:&quot;AudienceStream&quot;}}","title":"Version 2021.01.15.1155","lastcustomizeid":"0","history":"[ { \"action\" : \"updated_extension\" , \"data\" : { \"id\" : \"17\" , \"name\" : \"Fire u.addEvent as needed for specific events\" , \"type\" : \"100040\" , \"kind\" : \"Extension\" , \"operation\" : \"updated\" , \"container\" : \"customizations_17\" , \"tab_name\" : \"customizations\"}}]","publishedExtensions":"[ \"10\" , \"11\" , \"12\" , \"13\" , \"14\" , \"17\" , \"18\"]","linkedProfiles":"{ }","action":"Published to dev","publishedConsent":"[ ]","versionorigin":"202101151150","notes":"Fix linkTrackEvents order","publishedTags":"[ \"2\" , \"3\"]","operator":"caleb.jaquith@tealium.com","status":"dev","lastmanageid":"3"},"title":"Version 2021.01.15.1155"},"202101071637":{"202101071637":{"notes":"Update listener","versionorigin":"202101071354","publishedConsent":"[ ]","action":"Published to dev","lastmanageid":"1","status":"dev","publishedTags":"[ \"1\"]","operator":"caleb.jaquith@tealium.com","title":"Version 2021.01.07.1637","lastcustomizeid":"0","history":"[ { \"action\" : \"updated_extension\" , \"data\" : { \"id\" : \"14\" , \"name\" : \"GTM Listener (5/5) - Add 'tiq.load' and 'tiq.dom' pushes to dataLayer \" , \"type\" : \"100036\" , \"kind\" : \"Extension\" , \"operation\" : \"updated\" , \"container\" : \"customizations_14\" , \"tab_name\" : \"customizations\"}}]","datacloudLinkedProfiles":"{&quot;main&quot;:{&quot;rev&quot;:&quot;1605528129252&quot;,&quot;env&quot;:&quot;AudienceStream&quot;}}","linkedProfiles":"{ }","publishedExtensions":"[ \"10\" , \"11\" , \"12\" , \"13\" , \"14\"]"},"title":"Version 2021.01.07.1637","size":"37","status":"Not Published"},"202101151330":{"status":"Not Published","size":"349","202101151330":{"publishedExtensions":"[ \"10\" , \"11\" , \"12\" , \"13\" , \"14\" , \"17\" , \"18\" , \"21\"]","linkedProfiles":"{ }","lastcustomizeid":"0","history":"[ { \"action\" : \"updated_tag\" , \"data\" : { \"id\" : \"5\" , \"tag_name\" : \"Adobe Analytics AppMeasurement for JS\" , \"name\" : \"Adobe Analytics AppMeasurement for JS - Marketplace\" , \"kind\" : \"Tag\" , \"operation\" : \"updated\" , \"container\" : \"manage_content_161071235214600020\" , \"tab_name\" : \"manage\"}}]","title":"Version 2021.01.15.1330","datacloudLinkedProfiles":"{&quot;main&quot;:{&quot;rev&quot;:&quot;1605528129252&quot;,&quot;env&quot;:&quot;AudienceStream&quot;}}","status":"prod,qa,dev","lastmanageid":"6","publishedTags":"[ \"3\" , \"5\" , \"6\"]","operator":"caleb.jaquith@tealium.com","publishedConsent":"[ ]","versionorigin":"202101151322","notes":"Add event mappings","action":"Published to dev"},"title":"Version 2021.01.15.1330"},"202101141318":{"202101141318":{"datacloudLinkedProfiles":"{&quot;main&quot;:{&quot;rev&quot;:&quot;1605528129252&quot;,&quot;env&quot;:&quot;AudienceStream&quot;}}","history":"[ { \"action\" : \"updated_tag\" , \"data\" : { \"id\" : \"2\" , \"tag_name\" : \"Adobe Analytics AppMeasurement for JS\" , \"name\" : \"Adobe Analytics AppMeasurement for JS\" , \"kind\" : \"Tag\" , \"operation\" : \"updated\" , \"container\" : \"manage_content_161062544628600003\" , \"tab_name\" : \"manage\"}}]","lastcustomizeid":"0","title":"Version 2021.01.14.1317","publishedExtensions":"[ \"10\" , \"11\" , \"12\" , \"13\" , \"14\" , \"18\"]","linkedProfiles":"{ }","action":"Published to dev","versionorigin":"202101141301","publishedConsent":"[ ]","notes":"Update mappings","publishedTags":"[ \"2\"]","operator":"caleb.jaquith@tealium.com","lastmanageid":"2","status":"dev"},"title":"Version 2021.01.14.1317","status":"Not Published","size":"125"},"202101141341":{"202101141341":{"datacloudLinkedProfiles":"{&quot;main&quot;:{&quot;rev&quot;:&quot;1605528129252&quot;,&quot;env&quot;:&quot;AudienceStream&quot;}}","title":"Version 2021.01.14.1341","history":"[ { \"action\" : \"updated_tag\" , \"data\" : { \"id\" : \"2\" , \"tag_name\" : \"Adobe Analytics AppMeasurement for JS\" , \"name\" : \"Adobe Analytics AppMeasurement for JS\" , \"kind\" : \"Tag\" , \"operation\" : \"updated\" , \"container\" : \"manage_content_161062544628600003\" , \"tab_name\" : \"manage\"}}]","lastcustomizeid":"0","publishedExtensions":"[ \"10\" , \"11\" , \"12\" , \"13\" , \"14\" , \"18\"]","linkedProfiles":"{ }","action":"Published to dev","versionorigin":"202101141339","notes":"Add mappings","publishedConsent":"[ ]","operator":"caleb.jaquith@tealium.com","publishedTags":"[ \"2\" , \"3\"]","status":"dev","lastmanageid":"3"},"title":"Version 2021.01.14.1341","size":"273","status":"Not Published"},"202101151319":{"status":"Not Published","202101151319":{"publishedExtensions":"[ \"10\" , \"11\" , \"12\" , \"13\" , \"14\" , \"17\" , \"21\"]","linkedProfiles":"{ }","datacloudLinkedProfiles":"{&quot;main&quot;:{&quot;rev&quot;:&quot;1605528129252&quot;,&quot;env&quot;:&quot;AudienceStream&quot;}}","history":"[ { \"action\" : \"updated_extension\" , \"data\" : { \"id\" : \"18\" , \"name\" : \"Add some test events\" , \"type\" : \"100040\" , \"kind\" : \"Extension\" , \"operation\" : \"updated\" , \"container\" : \"customizations_18\" , \"tab_name\" : \"customizations\"}}]","title":"Version 2021.01.15.1319","lastcustomizeid":"0","operator":"caleb.jaquith@tealium.com","publishedTags":"[ \"3\" , \"5\" , \"6\"]","lastmanageid":"6","status":"prod,qa,dev","action":"Published to dev","publishedConsent":"[ ]","notes":"Add test events","versionorigin":"202101151302"},"size":"348","title":"Version 2021.01.15.1319"},"202101271150":{"title":"Version 2021.01.27.1149","status":"Not Published","202101271150":{"notes":"Save for templates to fix","versionorigin":"202101271141","action":"Save profile","lastmanageid":"13","operator":"caleb.jaquith@tealium.com","history":"[ { \"action\" : \"updated_tag\" , \"data\" : { \"id\" : \"11\" , \"tag_name\" : \"Google Analytics (gtag.js)\" , \"name\" : \"Google Analytics (gtag.js) - Tag 2, Marketplace\" , \"kind\" : \"Tag\" , \"operation\" : \"updated\" , \"container\" : \"manage_content_161174729825300017\" , \"tab_name\" : \"manage\"}} , { \"action\" : \"added_tag\" , \"data\" : { \"id\" : \"12\" , \"tag_name\" : \"Google Analytics (gtag.js)\" , \"library\" : \"\" , \"name\" : \"Google Analytics (gtag.js)\" , \"kind\" : \"Tag\" , \"operation\" : \"added\" , \"container\" : \"manage_content_161174794413500018\" , \"tab_name\" : \"manage\"}} , { \"action\" : \"added_tag\" , \"data\" : { \"id\" : \"13\" , \"tag_name\" : \"Google Analytics (gtag.js)\" , \"library\" : \"\" , \"name\" : \"Google Analytics (gtag.js)\" , \"kind\" : \"Tag\" , \"operation\" : \"added\" , \"container\" : \"manage_content_161174796387100019\" , \"tab_name\" : \"manage\"}} , { \"action\" : \"added_variable\" , \"data\" : { \"id\" : \"231\" , \"name\" : \"ga_template_version\" , \"type\" : \"js\" , \"library\" : \"\" , \"kind\" : \"Variable\" , \"operation\" : \"added\" , \"container\" : \"defineObjectsList\" , \"tab_name\" : \"define\"}} , { \"action\" : \"added_loadrule\" , \"data\" : { \"id\" : \"5\" , \"name\" : \"GUA Marketplace Tags\" , \"library\" : \"\" , \"kind\" : \"Loadrule\" , \"operation\" : \"added\" , \"container\" : \"loadrules_content_161174805459700023\" , \"tab_name\" : \"loadrules\"}} , { \"action\" : \"added_loadrule\" , \"data\" : { \"id\" : 6 , \"name\" : \"GUA Marketplace Tags - Copy\" , \"kind\" : \"Loadrule\" , \"operation\" : \"added\" , \"container\" : \"loadrules_content_161174805667400024\" , \"tab_name\" : \"loadrules\"}} , { \"action\" : \"updated_tag\" , \"data\" : { \"id\" : \"10\" , \"tag_name\" : \"Google Analytics (gtag.js)\" , \"name\" : \"Google Analytics (gtag.js) - Tag 1, Marketplace\" , \"kind\" : \"Tag\" , \"operation\" : \"updated\" , \"container\" : \"manage_content_161174703298400016\" , \"tab_name\" : \"manage\"}}]","lastcustomizeid":"0","datacloudLinkedProfiles":"{&quot;main&quot;:{&quot;rev&quot;:&quot;1605528129252&quot;,&quot;env&quot;:&quot;AudienceStream&quot;}}","linkedProfiles":"{ }"}},"202101141629":{"202101141629":{"publishedConsent":"[ ]","notes":"Reactivate combineLinkVar","versionorigin":"202101141341","action":"Published to dev","status":"dev","lastmanageid":"3","operator":"caleb.jaquith@tealium.com","publishedTags":"[ \"2\" , \"3\"]","history":"[ { \"action\" : \"updated_tag\" , \"data\" : { \"id\" : \"2\" , \"tag_name\" : \"Adobe Analytics AppMeasurement for JS\" , \"name\" : \"Adobe Analytics AppMeasurement for JS\" , \"kind\" : \"Tag\" , \"operation\" : \"updated\" , \"container\" : \"manage_content_161064090576900004\" , \"tab_name\" : \"manage\"}}]","title":"Version 2021.01.14.1629","lastcustomizeid":"0","datacloudLinkedProfiles":"{&quot;main&quot;:{&quot;rev&quot;:&quot;1605528129252&quot;,&quot;env&quot;:&quot;AudienceStream&quot;}}","publishedExtensions":"[ \"10\" , \"11\" , \"12\" , \"13\" , \"14\" , \"18\"]","linkedProfiles":"{ }"},"size":"273","status":"Not Published","title":"Version 2021.01.14.1629"},"202101131238":{"title":"Version 2021.01.13.1237","202101131238":{"versionorigin":"202101131233","publishedConsent":"[ ]","notes":"Fix template","action":"Published to dev","status":"dev","lastmanageid":"2","publishedTags":"[ \"2\"]","operator":"caleb.jaquith@tealium.com","title":"Version 2021.01.13.1237","lastcustomizeid":"0","history":"[ { \"action\" : \"updated_template\" , \"data\" : { \"id\" : \"2\" , \"kind\" : \"Template\" , \"operation\" : \"updated\" , \"name\" : \"Adobe Analytics AppMeasurement for JS\" , \"tag_name\" : \"Adobe Analytics AppMeasurement for JS\" , \"container\" : \"manage_content_161053932051602015\" , \"tab_name\" : \"Template\"}}]","datacloudLinkedProfiles":"{&quot;main&quot;:{&quot;rev&quot;:&quot;1605528129252&quot;,&quot;env&quot;:&quot;AudienceStream&quot;}}","linkedProfiles":"{ }","publishedExtensions":"[ \"10\" , \"11\" , \"12\" , \"13\" , \"14\" , \"17\" , \"18\"]"},"size":"92","status":"Not Published"},"202101141334":{"status":"Not Published","size":"272","202101141334":{"notes":"Update","versionorigin":"202101141332","publishedConsent":"[ ]","action":"Published to dev","status":"dev","lastmanageid":"3","publishedTags":"[ \"2\" , \"3\"]","operator":"caleb.jaquith@tealium.com","lastcustomizeid":"0","title":"Version 2021.01.14.1334","history":"[ { \"action\" : \"updated_tag\" , \"data\" : { \"id\" : \"2\" , \"tag_name\" : \"Adobe Analytics AppMeasurement for JS\" , \"name\" : \"Adobe Analytics AppMeasurement for JS\" , \"kind\" : \"Tag\" , \"operation\" : \"updated\" , \"container\" : \"manage_content_161062544628600003\" , \"tab_name\" : \"manage\"}}]","datacloudLinkedProfiles":"{&quot;main&quot;:{&quot;rev&quot;:&quot;1605528129252&quot;,&quot;env&quot;:&quot;AudienceStream&quot;}}","publishedExtensions":"[ \"10\" , \"11\" , \"12\" , \"13\" , \"14\" , \"18\"]","linkedProfiles":"{ }"},"title":"Version 2021.01.14.1334"},"202101141320":{"title":"Version 2021.01.14.1320","size":"126","202101141320":{"action":"Published to dev","publishedConsent":"[ ]","notes":"Really fixed now","versionorigin":"202101141319","publishedTags":"[ \"2\"]","operator":"caleb.jaquith@tealium.com","lastmanageid":"2","status":"dev","datacloudLinkedProfiles":"{&quot;main&quot;:{&quot;rev&quot;:&quot;1605528129252&quot;,&quot;env&quot;:&quot;AudienceStream&quot;}}","title":"Version 2021.01.14.1320","lastcustomizeid":"0","history":"[ { \"action\" : \"updated_tag\" , \"data\" : { \"id\" : \"2\" , \"tag_name\" : \"Adobe Analytics AppMeasurement for JS\" , \"name\" : \"Adobe Analytics AppMeasurement for JS\" , \"kind\" : \"Tag\" , \"operation\" : \"updated\" , \"container\" : \"manage_content_161062544628600003\" , \"tab_name\" : \"manage\"}}]","linkedProfiles":"{ }","publishedExtensions":"[ \"10\" , \"11\" , \"12\" , \"13\" , \"14\" , \"18\"]"},"status":"Not Published"},"202101131243":{"title":"Version 2021.01.13.1243","202101131243":{"action":"Published to dev","versionorigin":"202101131238","notes":"Stop minifying","publishedConsent":"[ ]","operator":"caleb.jaquith@tealium.com","publishedTags":"[ \"2\"]","status":"dev","lastmanageid":"2","datacloudLinkedProfiles":"{&quot;main&quot;:{&quot;rev&quot;:&quot;1605528129252&quot;,&quot;env&quot;:&quot;AudienceStream&quot;}}","title":"Version 2021.01.13.1243","history":"[ ]","lastcustomizeid":"0","linkedProfiles":"{ }","publishedExtensions":"[ \"10\" , \"11\" , \"12\" , \"13\" , \"14\" , \"17\" , \"18\"]"},"size":"133","status":"Not Published"},"202101151213":{"size":"280","status":"Not Published","202101151213":{"publishedTags":"[ \"3\" , \"5\"]","operator":"caleb.jaquith@tealium.com","lastmanageid":"5","status":"dev","action":"Published to dev","notes":"Add intermediate mapping","versionorigin":"202101151212","publishedConsent":"[ ]","linkedProfiles":"{ }","publishedExtensions":"[ \"10\" , \"11\" , \"12\" , \"13\" , \"14\" , \"17\" , \"18\" , \"21\"]","datacloudLinkedProfiles":"{&quot;main&quot;:{&quot;rev&quot;:&quot;1605528129252&quot;,&quot;env&quot;:&quot;AudienceStream&quot;}}","lastcustomizeid":"0","history":"[ { \"action\" : \"updated_extension\" , \"data\" : { \"id\" : 21 , \"name\" : \"Intermediate mappings to test \" , \"type\" : \"100003\" , \"kind\" : \"Extension\" , \"operation\" : \"updated\" , \"container\" : \"customizations_21\" , \"tab_name\" : \"customizations\"}}]","title":"Version 2021.01.15.1212"},"title":"Version 2021.01.15.1212"},"202101151209":{"202101151209":{"history":"[ { \"action\" : \"added_tag\" , \"data\" : { \"id\" : \"5\" , \"tag_name\" : \"Adobe Analytics AppMeasurement for JS\" , \"library\" : \"\" , \"name\" : \"Adobe Analytics AppMeasurement for JS\" , \"kind\" : \"Tag\" , \"operation\" : \"added\" , \"container\" : \"manage_content_161071235214600020\" , \"tab_name\" : \"manage\"}} , { \"action\" : \"updated_template\" , \"data\" : { \"id\" : \"5\" , \"kind\" : \"Template\" , \"operation\" : \"updated\" , \"name\" : \"Adobe Analytics AppMeasurement for JS Copy 1\" , \"tag_name\" : \"Adobe Analytics AppMeasurement for JS\" , \"container\" : \"manage_content_161071235214600020\" , \"tab_name\" : \"Template\"}} , { \"action\" : \"toggled_tag\" , \"data\" : { \"id\" : \"2\" , \"tag_name\" : \"Adobe Analytics AppMeasurement for JS\" , \"name\" : \"Adobe Analytics AppMeasurement for JS\" , \"status\" : \"inactive\" , \"kind\" : \"Tag\" , \"operation\" : \"toggled\" , \"container\" : \"manage_content_161071068866400012\" , \"tab_name\" : \"manage\"}} , { \"action\" : \"updated_extension\" , \"data\" : { \"id\" : \"17\" , \"name\" : \"Fire u.addEvent as needed for specific events\" , \"type\" : \"100040\" , \"kind\" : \"Extension\" , \"operation\" : \"updated\" , \"container\" : \"customizations_17\" , \"tab_name\" : \"customizations\"}}]","lastcustomizeid":"0","title":"Version 2021.01.15.1208","datacloudLinkedProfiles":"{&quot;main&quot;:{&quot;rev&quot;:&quot;1605528129252&quot;,&quot;env&quot;:&quot;AudienceStream&quot;}}","publishedExtensions":"[ \"10\" , \"11\" , \"12\" , \"13\" , \"14\" , \"17\" , \"18\"]","linkedProfiles":"{ }","notes":"ADD NEW TAG","publishedConsent":"[ ]","versionorigin":"202101151155","action":"Published to dev","status":"dev","lastmanageid":"5","publishedTags":"[ \"3\" , \"5\"]","operator":"caleb.jaquith@tealium.com"},"status":"Not Published","size":"280","title":"Version 2021.01.15.1208"}},"linkedProfiles":"{ }","label_relationships":null,"profile":"tui-listener-staging","publish":{"enable_sync_loader":"","publish_qa":"","publish_prod":"","smartFTP":{"prod":"preMCDN","dev":"preMCDN","qa":"preMCDN"},"noload":"","enable_custom_targets":"","enable_workflow":"","audienceStream_profile":"","minify":"","data_object":"","disable_save_on_old_version":"","webcompanion":"","publish_dev":"","enable_utf8_encoding":"yes","lock_profile":"","disable_custom_version_name":"","readywait":"","publish_notify":"","distro_zip":"","forcetimeout":"","basevariable":"","bundle_all":"","alert_notify":"","enable_purge_sub":"","s2id_autogen1776":"","revision":"202101131238","sessiontimeout":"","s2id_autogen1776_search":"","domain":""},"importable_library":"NONE","revision":"202104211120","test":{},"lastmanageid":"13","email":"caleb.jaquith@tealium.com","datacloudLinkedProfiles":"{&quot;main&quot;:{&quot;rev&quot;:&quot;1618837227526&quot;,&quot;env&quot;:&quot;AudienceStream&quot;}}","privacy_management":{"useTemplate":"true"},"title":"Version 2021.04.21.1135","loadrules":{"2":{"0":{"input_0":"qp.adobe_template_version","operator_0":"populated","operator_1":"equals_ignore_case","input_1":"qp.adobe_template_version","filter_1":"marketplace","filter_0":""},"endDate":"------------","publish_revisions":{"svr_save_timestamps":{"prod":"202101271235","dev":"202104211136","qa":"202104211136"},"last_modified":"202104211136"},"status":"active","_id":"2","constructor":"","initialize":"","labels":"","editable":"true","sort":"1","id":"2","startDate":"------------","title":"Adobe Marketplace Tag","containerId":"loadrules_content_161899832099000002"},"3":{"0":{"operator_1":"equals_ignore_case","input_0":"qp.adobe_template_version","operator_0":"populated","input_1":"qp.adobe_template_version","filter_0":"","filter_1":"fixed"},"constructor":"","_id":"3","status":"active","endDate":"------------","publish_revisions":{"last_modified":"202104211136","svr_save_timestamps":{"dev":"202104211136","prod":"202101271235","qa":"202104211136"}},"sort":"2","editable":"true","initialize":"","labels":"","title":"Adobe Fixed Tag","containerId":"loadrules_content_161899832099200003","id":"3","startDate":"------------"},"5":{"0":{"operator_1":"equals_ignore_case","operator_0":"populated","input_0":"qp.ga_template_version","filter_0":"","filter_1":"marketplace","input_1":"qp.ga_template_version"},"constructor":"","status":"active","_id":"5","publish_revisions":{"svr_save_timestamps":{"dev":"202104211136","prod":"202101271235","qa":"202104211136"},"last_modified":"202104211136"},"endDate":"------------","sort":"3","editable":"true","initialize":"","labels":"","title":"GA Marketplace Tags","containerId":"loadrules_content_161899832099300004","id":"5","startDate":"------------"},"6":{"0":{"filter_1":"fixed","filter_0":"","input_1":"qp.ga_template_version","operator_1":"equals_ignore_case","operator_0":"populated","input_0":"qp.ga_template_version"},"id":"6","startDate":"------------","title":"GA Fixed Tags","containerId":"loadrules_content_161899832099500005","publish_revisions":{"svr_save_timestamps":{"qa":"202104211136","dev":"202104211136","prod":"202101271235"},"last_modified":"202104211136"},"endDate":"------------","status":"active","_id":"6","constructor":"","initialize":"","labels":"","editable":"true","sort":"4"}},"customizations":{"10":{"blockPubTargetsLogic":"true","publishedTargets":"dev","type":"new","_id":"10","extType":"Advanced Javascript Code","publish_revisions":{"last_modified":"202104211136","svr_save_timestamps":{"qa":"202104211136","prod":"202101271235","dev":"202104211136"}},"notes":"_","sort":"0","selectedTargets":{"qa":"true","prod":"true","dev":"true"},"title":"GTM Listener (1/5) - Disable automatic utag.view call","id":"100040","status":"active","scope":"preload","constructor":"","advExecOption":"alr","codeDevData":{"promotedSnippets":{"6754af9632a2745e85c293e5aac0863370d9bd3330b9938c00cadfd215227d77":{"code":"// Preloader\n\n// disable the automatic view, we want to fire it from the listener instead\nwindow.utag_cfg_ovrd = window.utag_cfg_ovrd || {};\nwindow.utag_cfg_ovrd.noview = true;","name":"prod","promotedTimestamp":"202101151252","promotedDraftName":"Draft 1","promotedBy":"caleb.jaquith@tealium.com"},"3f3ef786b34d6dd716e1812c8b74a7a0e1f05aa5f3230588f6f5bcd00c6c8392":{"promotedDraftName":"Draft 1","promotedTimestamp":"202101151252","promotedBy":"caleb.jaquith@tealium.com","code":"// Preloader\n\n// disable the automatic view, we want to fire it from the listener instead\nwindow.utag_cfg_ovrd = window.utag_cfg_ovrd || {};\nwindow.utag_cfg_ovrd.noview = true;","name":"qa"},"ef260e9aa3c673af240d17a2660480361a8e081d1ffeca2a5ed0e3219fc18567":{"promotedDraftName":"Draft 1","promotedTimestamp":"202101151252","promotedBy":"caleb.jaquith@tealium.com","code":"// Preloader\n\n// disable the automatic view, we want to fire it from the listener instead\nwindow.utag_cfg_ovrd = window.utag_cfg_ovrd || {};\nwindow.utag_cfg_ovrd.noview = true;","name":"dev"}},"draftSeq":"1","queueSeq":"3","draftSnippets":{"156e808776455eb7fb3231a67b22d1d38ab0ed941db5b8d157735eea6c9da88b":{"code":"// Preloader\n\n// disable the automatic view, we want to fire it from the listener instead\nwindow.utag_cfg_ovrd = window.utag_cfg_ovrd || {};\nwindow.utag_cfg_ovrd.noview = true;","name":"Draft 1","updateDate":"202010160948","creationDate":"202010160948","updatedBy":"venera.kozueva@tealium.com"}}},"initialize":"","labels":"1"},"11":{"id":"100040","title":"GTM Listener (2/5) - Data Layer Helper Library (provided by Google)","advExecOption":"alr","status":"active","scope":"domready","constructor":"","initialize":"","codeDevData":{"draftSeq":"0","promotedSnippets":{"ef260e9aa3c673af240d17a2660480361a8e081d1ffeca2a5ed0e3219fc18567":{"promotedDraftName":"Draft 1","promotedTimestamp":"202101151252","promotedBy":"caleb.jaquith@tealium.com","code":"/**\n * Scope       : DOM Ready\n * Execution   : n/a\n * Condition   : n/a\n * Description : GTM Listener - Data Layer Helper Library (provided by Google), makes it easy to queue \n *               events. We use it here to process existing GTM Events for Collect\n * \n * Documentation: https://github.com/google/data-layer-helper\n * Source: https://raw.githubusercontent.com/google/data-layer-helper/master/dist/data-layer-helper.js\n *\n*/\n\n(function(){/*\n\n Copyright The Closure Library Authors.\n SPDX-License-Identifier: Apache-2.0\n*/\n'use strict';function f(b,a){switch(a){case 1:console.log(b);break;case 2:console.warn(b);break;case 3:console.error(b)}};/*\n jQuery v1.9.1 (c) 2005, 2012\n jQuery Foundation, Inc. jquery.org/license.\n*/\nvar g=/\\[object (Boolean|Number|String|Function|Array|Date|RegExp|Arguments)\\]/;function l(b){return null==b?String(b):(b=g.exec(Object.prototype.toString.call(Object(b))))?b[1].toLowerCase():&quot;object&quot;}function n(b,a){return Object.prototype.hasOwnProperty.call(Object(b),a)}function p(b){if(!b||&quot;object&quot;!=l(b)||b.nodeType||b==b.window)return!1;try{if(b.constructor&amp;&amp;!n(b,&quot;constructor&quot;)&amp;&amp;!n(b.constructor.prototype,&quot;isPrototypeOf&quot;))return!1}catch(c){return!1}for(var a in b);return void 0===a||n(b,a)};function q(b,a){var c={},d=c;b=b.split(&quot;.&quot;);for(var e=0;e&lt;b.length-1;e++)d=d[b[e]]={};d[b[b.length-1]]=a;return c}function r(b,a){var c=!b._clear,d;for(d in b)if(n(b,d)){var e=b[d];&quot;array&quot;===l(e)&amp;&amp;c?(&quot;array&quot;===l(a[d])||(a[d]=[]),r(e,a[d])):p(e)&amp;&amp;c?(p(a[d])||(a[d]={}),r(e,a[d])):a[d]=e}delete a._clear};/*\n Copyright 2012 Google Inc. All rights reserved. */\nfunction t(b,a,c){a=void 0===a?{}:a;c=void 0===c?!1:c;&quot;function&quot;===typeof a?(f(&quot;Legacy constructor was used. See README for latest usage.&quot;,2),a={listener:a,listenToPast:c,processNow:!0,commandProcessors:{}}):a={listener:a.listener||function(){},listenToPast:a.listenToPast||!1,processNow:void 0===a.processNow?!0:a.processNow,commandProcessors:a.commandProcessors||{}};this.a=b;this.l=a.listener;this.j=a.listenToPast;this.g=this.h=!1;this.c={};this.f=[];this.b=a.commandProcessors;this.i=w(this);var d=\nthis.a.push,e=this;this.a.push=function(){var h=[].slice.call(arguments,0),m=d.apply(e.a,h);x(e,h);return m};a.processNow&amp;&amp;this.process()}\nt.prototype.process=function(){this.h&amp;&amp;f(&quot;Process has already been run. This method should only run a single time to prepare the helper.&quot;,3);this.registerProcessor(&quot;set&quot;,function(){var c={};1===arguments.length&amp;&amp;&quot;object&quot;===l(arguments[0])?c=arguments[0]:2===arguments.length&amp;&amp;&quot;string&quot;===l(arguments[0])&amp;&amp;(c=q(arguments[0],arguments[1]));return c});this.h=!0;for(var b=this.a.length,a=0;a&lt;b;a++)x(this,[this.a[a]],!this.j)};\nt.prototype.get=function(b){var a=this.c;b=b.split(&quot;.&quot;);for(var c=0;c&lt;b.length;c++){if(void 0===a[b[c]])return;a=a[b[c]]}return a};t.prototype.flatten=function(){this.a.splice(0,this.a.length);this.a[0]={};r(this.c,this.a[0])};t.prototype.registerProcessor=function(b,a){b in this.b||(this.b[b]=[]);this.b[b].push(a)};\nfunction x(b,a,c){c=void 0===c?!1:c;if(b.h&amp;&amp;(b.f.push.apply(b.f,a),!b.g))for(;0&lt;b.f.length;){a=b.f.shift();if(&quot;array&quot;===l(a))a:{var d=b.c;&quot;string&quot;===l(a[0])||f(&quot;Error processing command, no command was run. The first argument must be of type string, but was of type &quot;+(typeof a[0]+&quot;.\\nThe command run was &quot;+a),2);for(var e=a[0].split(&quot;.&quot;),h=e.pop(),m=a.slice(1),k=0;k&lt;e.length;k++){if(void 0===d[e[k]]){f(&quot;Error processing command, no command was run as the object at &quot;+(e+&quot; was undefined.\\nThe command run was &quot;+\na),2);break a}d=d[e[k]]}try{d[h].apply(d,m)}catch(u){f(&quot;An exception was thrown by the method &quot;+(h+&quot;, so no command was run.\\nThe method was called on the data layer object at the location &quot;)+(e+&quot;.&quot;),3)}}else if(&quot;arguments&quot;===l(a)){e=b;h=[];m=a[0];if(e.b[m])for(d=e.b[m].length,k=0;k&lt;d;k++)h.push(e.b[m][k].apply(e.i,[].slice.call(a,1)));b.f.push.apply(b.f,h)}else if(&quot;function&quot;==typeof a)try{a.call(b.i)}catch(u){f(&quot;An exception was thrown when running the method &quot;+(a+&quot;, execution was skipped.&quot;),3),\nf(u,3)}else if(p(a))for(var v in a)r(q(v,a[v]),b.c);else continue;c||(b.g=!0,b.l(b.c,a),b.g=!1)}}t.prototype.registerProcessor=t.prototype.registerProcessor;t.prototype.flatten=t.prototype.flatten;t.prototype.get=t.prototype.get;t.prototype.process=t.prototype.process;window.DataLayerHelper=t;function w(b){return{set:function(a,c){r(q(a,c),b.c)},get:function(a){return b.get(a)}}};})();","name":"dev"},"3f3ef786b34d6dd716e1812c8b74a7a0e1f05aa5f3230588f6f5bcd00c6c8392":{"promotedBy":"caleb.jaquith@tealium.com","promotedTimestamp":"202101151252","promotedDraftName":"Draft 1","name":"qa","code":"/**\n * Scope       : DOM Ready\n * Execution   : n/a\n * Condition   : n/a\n * Description : GTM Listener - Data Layer Helper Library (provided by Google), makes it easy to queue \n *               events. We use it here to process existing GTM Events for Collect\n * \n * Documentation: https://github.com/google/data-layer-helper\n * Source: https://raw.githubusercontent.com/google/data-layer-helper/master/dist/data-layer-helper.js\n *\n*/\n\n(function(){/*\n\n Copyright The Closure Library Authors.\n SPDX-License-Identifier: Apache-2.0\n*/\n'use strict';function f(b,a){switch(a){case 1:console.log(b);break;case 2:console.warn(b);break;case 3:console.error(b)}};/*\n jQuery v1.9.1 (c) 2005, 2012\n jQuery Foundation, Inc. jquery.org/license.\n*/\nvar g=/\\[object (Boolean|Number|String|Function|Array|Date|RegExp|Arguments)\\]/;function l(b){return null==b?String(b):(b=g.exec(Object.prototype.toString.call(Object(b))))?b[1].toLowerCase():&quot;object&quot;}function n(b,a){return Object.prototype.hasOwnProperty.call(Object(b),a)}function p(b){if(!b||&quot;object&quot;!=l(b)||b.nodeType||b==b.window)return!1;try{if(b.constructor&amp;&amp;!n(b,&quot;constructor&quot;)&amp;&amp;!n(b.constructor.prototype,&quot;isPrototypeOf&quot;))return!1}catch(c){return!1}for(var a in b);return void 0===a||n(b,a)};function q(b,a){var c={},d=c;b=b.split(&quot;.&quot;);for(var e=0;e&lt;b.length-1;e++)d=d[b[e]]={};d[b[b.length-1]]=a;return c}function r(b,a){var c=!b._clear,d;for(d in b)if(n(b,d)){var e=b[d];&quot;array&quot;===l(e)&amp;&amp;c?(&quot;array&quot;===l(a[d])||(a[d]=[]),r(e,a[d])):p(e)&amp;&amp;c?(p(a[d])||(a[d]={}),r(e,a[d])):a[d]=e}delete a._clear};/*\n Copyright 2012 Google Inc. All rights reserved. */\nfunction t(b,a,c){a=void 0===a?{}:a;c=void 0===c?!1:c;&quot;function&quot;===typeof a?(f(&quot;Legacy constructor was used. See README for latest usage.&quot;,2),a={listener:a,listenToPast:c,processNow:!0,commandProcessors:{}}):a={listener:a.listener||function(){},listenToPast:a.listenToPast||!1,processNow:void 0===a.processNow?!0:a.processNow,commandProcessors:a.commandProcessors||{}};this.a=b;this.l=a.listener;this.j=a.listenToPast;this.g=this.h=!1;this.c={};this.f=[];this.b=a.commandProcessors;this.i=w(this);var d=\nthis.a.push,e=this;this.a.push=function(){var h=[].slice.call(arguments,0),m=d.apply(e.a,h);x(e,h);return m};a.processNow&amp;&amp;this.process()}\nt.prototype.process=function(){this.h&amp;&amp;f(&quot;Process has already been run. This method should only run a single time to prepare the helper.&quot;,3);this.registerProcessor(&quot;set&quot;,function(){var c={};1===arguments.length&amp;&amp;&quot;object&quot;===l(arguments[0])?c=arguments[0]:2===arguments.length&amp;&amp;&quot;string&quot;===l(arguments[0])&amp;&amp;(c=q(arguments[0],arguments[1]));return c});this.h=!0;for(var b=this.a.length,a=0;a&lt;b;a++)x(this,[this.a[a]],!this.j)};\nt.prototype.get=function(b){var a=this.c;b=b.split(&quot;.&quot;);for(var c=0;c&lt;b.length;c++){if(void 0===a[b[c]])return;a=a[b[c]]}return a};t.prototype.flatten=function(){this.a.splice(0,this.a.length);this.a[0]={};r(this.c,this.a[0])};t.prototype.registerProcessor=function(b,a){b in this.b||(this.b[b]=[]);this.b[b].push(a)};\nfunction x(b,a,c){c=void 0===c?!1:c;if(b.h&amp;&amp;(b.f.push.apply(b.f,a),!b.g))for(;0&lt;b.f.length;){a=b.f.shift();if(&quot;array&quot;===l(a))a:{var d=b.c;&quot;string&quot;===l(a[0])||f(&quot;Error processing command, no command was run. The first argument must be of type string, but was of type &quot;+(typeof a[0]+&quot;.\\nThe command run was &quot;+a),2);for(var e=a[0].split(&quot;.&quot;),h=e.pop(),m=a.slice(1),k=0;k&lt;e.length;k++){if(void 0===d[e[k]]){f(&quot;Error processing command, no command was run as the object at &quot;+(e+&quot; was undefined.\\nThe command run was &quot;+\na),2);break a}d=d[e[k]]}try{d[h].apply(d,m)}catch(u){f(&quot;An exception was thrown by the method &quot;+(h+&quot;, so no command was run.\\nThe method was called on the data layer object at the location &quot;)+(e+&quot;.&quot;),3)}}else if(&quot;arguments&quot;===l(a)){e=b;h=[];m=a[0];if(e.b[m])for(d=e.b[m].length,k=0;k&lt;d;k++)h.push(e.b[m][k].apply(e.i,[].slice.call(a,1)));b.f.push.apply(b.f,h)}else if(&quot;function&quot;==typeof a)try{a.call(b.i)}catch(u){f(&quot;An exception was thrown when running the method &quot;+(a+&quot;, execution was skipped.&quot;),3),\nf(u,3)}else if(p(a))for(var v in a)r(q(v,a[v]),b.c);else continue;c||(b.g=!0,b.l(b.c,a),b.g=!1)}}t.prototype.registerProcessor=t.prototype.registerProcessor;t.prototype.flatten=t.prototype.flatten;t.prototype.get=t.prototype.get;t.prototype.process=t.prototype.process;window.DataLayerHelper=t;function w(b){return{set:function(a,c){r(q(a,c),b.c)},get:function(a){return b.get(a)}}};})();"},"6754af9632a2745e85c293e5aac0863370d9bd3330b9938c00cadfd215227d77":{"promotedBy":"caleb.jaquith@tealium.com","promotedDraftName":"Draft 1","promotedTimestamp":"202101151252","name":"prod","code":"/**\n * Scope       : DOM Ready\n * Execution   : n/a\n * Condition   : n/a\n * Description : GTM Listener - Data Layer Helper Library (provided by Google), makes it easy to queue \n *               events. We use it here to process existing GTM Events for Collect\n * \n * Documentation: https://github.com/google/data-layer-helper\n * Source: https://raw.githubusercontent.com/google/data-layer-helper/master/dist/data-layer-helper.js\n *\n*/\n\n(function(){/*\n\n Copyright The Closure Library Authors.\n SPDX-License-Identifier: Apache-2.0\n*/\n'use strict';function f(b,a){switch(a){case 1:console.log(b);break;case 2:console.warn(b);break;case 3:console.error(b)}};/*\n jQuery v1.9.1 (c) 2005, 2012\n jQuery Foundation, Inc. jquery.org/license.\n*/\nvar g=/\\[object (Boolean|Number|String|Function|Array|Date|RegExp|Arguments)\\]/;function l(b){return null==b?String(b):(b=g.exec(Object.prototype.toString.call(Object(b))))?b[1].toLowerCase():&quot;object&quot;}function n(b,a){return Object.prototype.hasOwnProperty.call(Object(b),a)}function p(b){if(!b||&quot;object&quot;!=l(b)||b.nodeType||b==b.window)return!1;try{if(b.constructor&amp;&amp;!n(b,&quot;constructor&quot;)&amp;&amp;!n(b.constructor.prototype,&quot;isPrototypeOf&quot;))return!1}catch(c){return!1}for(var a in b);return void 0===a||n(b,a)};function q(b,a){var c={},d=c;b=b.split(&quot;.&quot;);for(var e=0;e&lt;b.length-1;e++)d=d[b[e]]={};d[b[b.length-1]]=a;return c}function r(b,a){var c=!b._clear,d;for(d in b)if(n(b,d)){var e=b[d];&quot;array&quot;===l(e)&amp;&amp;c?(&quot;array&quot;===l(a[d])||(a[d]=[]),r(e,a[d])):p(e)&amp;&amp;c?(p(a[d])||(a[d]={}),r(e,a[d])):a[d]=e}delete a._clear};/*\n Copyright 2012 Google Inc. All rights reserved. */\nfunction t(b,a,c){a=void 0===a?{}:a;c=void 0===c?!1:c;&quot;function&quot;===typeof a?(f(&quot;Legacy constructor was used. See README for latest usage.&quot;,2),a={listener:a,listenToPast:c,processNow:!0,commandProcessors:{}}):a={listener:a.listener||function(){},listenToPast:a.listenToPast||!1,processNow:void 0===a.processNow?!0:a.processNow,commandProcessors:a.commandProcessors||{}};this.a=b;this.l=a.listener;this.j=a.listenToPast;this.g=this.h=!1;this.c={};this.f=[];this.b=a.commandProcessors;this.i=w(this);var d=\nthis.a.push,e=this;this.a.push=function(){var h=[].slice.call(arguments,0),m=d.apply(e.a,h);x(e,h);return m};a.processNow&amp;&amp;this.process()}\nt.prototype.process=function(){this.h&amp;&amp;f(&quot;Process has already been run. This method should only run a single time to prepare the helper.&quot;,3);this.registerProcessor(&quot;set&quot;,function(){var c={};1===arguments.length&amp;&amp;&quot;object&quot;===l(arguments[0])?c=arguments[0]:2===arguments.length&amp;&amp;&quot;string&quot;===l(arguments[0])&amp;&amp;(c=q(arguments[0],arguments[1]));return c});this.h=!0;for(var b=this.a.length,a=0;a&lt;b;a++)x(this,[this.a[a]],!this.j)};\nt.prototype.get=function(b){var a=this.c;b=b.split(&quot;.&quot;);for(var c=0;c&lt;b.length;c++){if(void 0===a[b[c]])return;a=a[b[c]]}return a};t.prototype.flatten=function(){this.a.splice(0,this.a.length);this.a[0]={};r(this.c,this.a[0])};t.prototype.registerProcessor=function(b,a){b in this.b||(this.b[b]=[]);this.b[b].push(a)};\nfunction x(b,a,c){c=void 0===c?!1:c;if(b.h&amp;&amp;(b.f.push.apply(b.f,a),!b.g))for(;0&lt;b.f.length;){a=b.f.shift();if(&quot;array&quot;===l(a))a:{var d=b.c;&quot;string&quot;===l(a[0])||f(&quot;Error processing command, no command was run. The first argument must be of type string, but was of type &quot;+(typeof a[0]+&quot;.\\nThe command run was &quot;+a),2);for(var e=a[0].split(&quot;.&quot;),h=e.pop(),m=a.slice(1),k=0;k&lt;e.length;k++){if(void 0===d[e[k]]){f(&quot;Error processing command, no command was run as the object at &quot;+(e+&quot; was undefined.\\nThe command run was &quot;+\na),2);break a}d=d[e[k]]}try{d[h].apply(d,m)}catch(u){f(&quot;An exception was thrown by the method &quot;+(h+&quot;, so no command was run.\\nThe method was called on the data layer object at the location &quot;)+(e+&quot;.&quot;),3)}}else if(&quot;arguments&quot;===l(a)){e=b;h=[];m=a[0];if(e.b[m])for(d=e.b[m].length,k=0;k&lt;d;k++)h.push(e.b[m][k].apply(e.i,[].slice.call(a,1)));b.f.push.apply(b.f,h)}else if(&quot;function&quot;==typeof a)try{a.call(b.i)}catch(u){f(&quot;An exception was thrown when running the method &quot;+(a+&quot;, execution was skipped.&quot;),3),\nf(u,3)}else if(p(a))for(var v in a)r(q(v,a[v]),b.c);else continue;c||(b.g=!0,b.l(b.c,a),b.g=!1)}}t.prototype.registerProcessor=t.prototype.registerProcessor;t.prototype.flatten=t.prototype.flatten;t.prototype.get=t.prototype.get;t.prototype.process=t.prototype.process;window.DataLayerHelper=t;function w(b){return{set:function(a,c){r(q(a,c),b.c)},get:function(a){return b.get(a)}}};})();"}},"queueSeq":"5","draftSnippets":{"156e808776455eb7fb3231a67b22d1d38ab0ed941db5b8d157735eea6c9da88b":{"code":"/**\n * Scope       : DOM Ready\n * Execution   : n/a\n * Condition   : n/a\n * Description : GTM Listener - Data Layer Helper Library (provided by Google), makes it easy to queue \n *               events. We use it here to process existing GTM Events for Collect\n * \n * Documentation: https://github.com/google/data-layer-helper\n * Source: https://raw.githubusercontent.com/google/data-layer-helper/master/dist/data-layer-helper.js\n *\n*/\n\n(function(){/*\n\n Copyright The Closure Library Authors.\n SPDX-License-Identifier: Apache-2.0\n*/\n'use strict';function f(b,a){switch(a){case 1:console.log(b);break;case 2:console.warn(b);break;case 3:console.error(b)}};/*\n jQuery v1.9.1 (c) 2005, 2012\n jQuery Foundation, Inc. jquery.org/license.\n*/\nvar g=/\\[object (Boolean|Number|String|Function|Array|Date|RegExp|Arguments)\\]/;function l(b){return null==b?String(b):(b=g.exec(Object.prototype.toString.call(Object(b))))?b[1].toLowerCase():&quot;object&quot;}function n(b,a){return Object.prototype.hasOwnProperty.call(Object(b),a)}function p(b){if(!b||&quot;object&quot;!=l(b)||b.nodeType||b==b.window)return!1;try{if(b.constructor&amp;&amp;!n(b,&quot;constructor&quot;)&amp;&amp;!n(b.constructor.prototype,&quot;isPrototypeOf&quot;))return!1}catch(c){return!1}for(var a in b);return void 0===a||n(b,a)};function q(b,a){var c={},d=c;b=b.split(&quot;.&quot;);for(var e=0;e&lt;b.length-1;e++)d=d[b[e]]={};d[b[b.length-1]]=a;return c}function r(b,a){var c=!b._clear,d;for(d in b)if(n(b,d)){var e=b[d];&quot;array&quot;===l(e)&amp;&amp;c?(&quot;array&quot;===l(a[d])||(a[d]=[]),r(e,a[d])):p(e)&amp;&amp;c?(p(a[d])||(a[d]={}),r(e,a[d])):a[d]=e}delete a._clear};/*\n Copyright 2012 Google Inc. All rights reserved. */\nfunction t(b,a,c){a=void 0===a?{}:a;c=void 0===c?!1:c;&quot;function&quot;===typeof a?(f(&quot;Legacy constructor was used. See README for latest usage.&quot;,2),a={listener:a,listenToPast:c,processNow:!0,commandProcessors:{}}):a={listener:a.listener||function(){},listenToPast:a.listenToPast||!1,processNow:void 0===a.processNow?!0:a.processNow,commandProcessors:a.commandProcessors||{}};this.a=b;this.l=a.listener;this.j=a.listenToPast;this.g=this.h=!1;this.c={};this.f=[];this.b=a.commandProcessors;this.i=w(this);var d=\nthis.a.push,e=this;this.a.push=function(){var h=[].slice.call(arguments,0),m=d.apply(e.a,h);x(e,h);return m};a.processNow&amp;&amp;this.process()}\nt.prototype.process=function(){this.h&amp;&amp;f(&quot;Process has already been run. This method should only run a single time to prepare the helper.&quot;,3);this.registerProcessor(&quot;set&quot;,function(){var c={};1===arguments.length&amp;&amp;&quot;object&quot;===l(arguments[0])?c=arguments[0]:2===arguments.length&amp;&amp;&quot;string&quot;===l(arguments[0])&amp;&amp;(c=q(arguments[0],arguments[1]));return c});this.h=!0;for(var b=this.a.length,a=0;a&lt;b;a++)x(this,[this.a[a]],!this.j)};\nt.prototype.get=function(b){var a=this.c;b=b.split(&quot;.&quot;);for(var c=0;c&lt;b.length;c++){if(void 0===a[b[c]])return;a=a[b[c]]}return a};t.prototype.flatten=function(){this.a.splice(0,this.a.length);this.a[0]={};r(this.c,this.a[0])};t.prototype.registerProcessor=function(b,a){b in this.b||(this.b[b]=[]);this.b[b].push(a)};\nfunction x(b,a,c){c=void 0===c?!1:c;if(b.h&amp;&amp;(b.f.push.apply(b.f,a),!b.g))for(;0&lt;b.f.length;){a=b.f.shift();if(&quot;array&quot;===l(a))a:{var d=b.c;&quot;string&quot;===l(a[0])||f(&quot;Error processing command, no command was run. The first argument must be of type string, but was of type &quot;+(typeof a[0]+&quot;.\\nThe command run was &quot;+a),2);for(var e=a[0].split(&quot;.&quot;),h=e.pop(),m=a.slice(1),k=0;k&lt;e.length;k++){if(void 0===d[e[k]]){f(&quot;Error processing command, no command was run as the object at &quot;+(e+&quot; was undefined.\\nThe command run was &quot;+\na),2);break a}d=d[e[k]]}try{d[h].apply(d,m)}catch(u){f(&quot;An exception was thrown by the method &quot;+(h+&quot;, so no command was run.\\nThe method was called on the data layer object at the location &quot;)+(e+&quot;.&quot;),3)}}else if(&quot;arguments&quot;===l(a)){e=b;h=[];m=a[0];if(e.b[m])for(d=e.b[m].length,k=0;k&lt;d;k++)h.push(e.b[m][k].apply(e.i,[].slice.call(a,1)));b.f.push.apply(b.f,h)}else if(&quot;function&quot;==typeof a)try{a.call(b.i)}catch(u){f(&quot;An exception was thrown when running the method &quot;+(a+&quot;, execution was skipped.&quot;),3),\nf(u,3)}else if(p(a))for(var v in a)r(q(v,a[v]),b.c);else continue;c||(b.g=!0,b.l(b.c,a),b.g=!1)}}t.prototype.registerProcessor=t.prototype.registerProcessor;t.prototype.flatten=t.prototype.flatten;t.prototype.get=t.prototype.get;t.prototype.process=t.prototype.process;window.DataLayerHelper=t;function w(b){return{set:function(a,c){r(q(a,c),b.c)},get:function(a){return b.get(a)}}};})();","name":"Draft 1","creationDate":"202010160948","updateDate":"202101061308","updatedBy":"caleb.jaquith@tealium.com"}}},"labels":"1","publishedTargets":"dev","blockPubTargetsLogic":"true","type":"new","publish_revisions":{"svr_save_timestamps":{"dev":"202104211136","prod":"202101271235","qa":"202104211136"},"last_modified":"202104211136"},"_id":"11","extType":"Advanced Javascript Code","selectedTargets":{"qa":"true","prod":"true","dev":"true"},"notes":"","sort":"5"},"12":{"id":"100040","title":"GTM Listener (3/5) - Tealium Flattener Definitions","initialize":"","labels":"1","codeDevData":{"promotedSnippets":{"3f3ef786b34d6dd716e1812c8b74a7a0e1f05aa5f3230588f6f5bcd00c6c8392":{"promotedBy":"caleb.jaquith@tealium.com","promotedDraftName":"default","promotedTimestamp":"202101151252","name":"qa","code":"// Flattener, pulled from https://tags.tiqcdn.com/utag/tealium-solutions/main/prod/utag.9.js as instructed by\n// https://community.tealiumiq.com/t5/iQ-Tag-Management/Data-Layer-Converter/ta-p/17581#toc-hId-1329378795\n\n//Define the teal global namespace\nwindow.teal = window.teal || {};\nteal.ignore_keys = {};\nteal.replace_keys = {};\nteal.prefix = &quot;&quot;;\n\n//In cases of a nested object, what should join the parent key and child key\nteal.nested_delimiter = &quot;.&quot;;\n\n//Ignore keys in the data layer that start with the following text.\n//Expecting an object of strings\n/*\nteal.ignore_keys = {\n  &quot;user&quot; : 1,\n  &quot;util&quot; : 1\n};\n*/\n\n//Specify a prefix for data layer elements being sent to the utag_data object.\n//Instead of utag_data.productID, it could be utag_data.dl_productID\n// teal.prefix = &quot;dl.&quot;;\n\n//Keys to be removed from the new flattened key name\n//For a flattened key, you have digitalData.page.pageInfo.pageName and you want digitalData.page.pi.pageName\n/* teal.replace_keys = {\n    &quot;pageInfo&quot;:&quot;pi&quot;\n  };\n*/\n\n//For a flattened key, you have digitalData.page.pageInfo.pageName and you want digitalData.page.pageName\n/* teal.replace_keys = {\n    &quot;pageInfo&quot;:&quot;&quot;\n  };\n*/\n\n//For a flattened key, you have digitalData.page.pageInfo.pageName and you want digitalData.pageName\n/* teal.replace_keys = {\n    &quot;page&quot;:&quot;&quot;,\n    &quot;pageInfo&quot;:&quot;&quot;\n  };\n*/\n\n/*****************DO NOT MODIFY BELOW***********************/\n\nteal.flattener_version = 1.4;\n\n// From https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/keys\n// Add the Object.keys method for older versions of IE\nObject.keys||(Object.keys=function(){&quot;use strict&quot;;var a=Object.prototype.hasOwnProperty,b=!{toString:null}.propertyIsEnumerable(&quot;toString&quot;),c=[&quot;toString&quot;,&quot;toLocaleString&quot;,&quot;valueOf&quot;,&quot;hasOwnProperty&quot;,&quot;isPrototypeOf&quot;,&quot;propertyIsEnumerable&quot;,&quot;constructor&quot;],d=c.length;return function(e){if(&quot;object&quot;!=typeof e&amp;&amp;(&quot;function&quot;!=typeof e||null===e))throw new TypeError(&quot;Object.keys called on non-object&quot;);var g,h,f=[];for(g in e)a.call(e,g)&amp;&amp;f.push(g);if(b)for(h=0;h&lt;d;h++)a.call(e,c[h])&amp;&amp;f.push(c[h]);return f}}());\n\nteal.ignoreKey = function(key,re){\n  var should_ignore_key = 0;\n  //Build a new array to avoid running through Object.keys multiple times\n  if(typeof teal.ignore_keys_list === 'undefined'){\n    teal.ignore_keys_list = Object.keys(teal.ignore_keys);\n    teal.ignore_keys_list.forEach(function(name){\n      //Store a copy of the regex in the object\n      teal.ignore_keys[name] = new RegExp(&quot;^&quot;+name);\n      if(key.match(teal.ignore_keys[name])){\n        should_ignore_key = 1;\n      }\n    });\n  }else{\n    //Loop through the ignore_keys object to see if we should ignore this key\n    teal.ignore_keys_list.forEach(function(name){\n      if(key.match(teal.ignore_keys[name])){\n        should_ignore_key = 1;\n      }\n    });\n  }\n  return should_ignore_key;\n}\n\nteal.getKeyName = function(key,re){\n  //Create a new object to store regexs or use existing one\n  teal.replace_keys_regex = teal.replace_keys_regex || {};\n  //Build a new array to avoid running through Object.keys multiple times\n  if(typeof teal.replace_keys_list === 'undefined'){\n    teal.replace_keys_list = Object.keys(teal.replace_keys);\n    //Make a start of string and end of string regex\n    teal.replace_keys_regex.startOfString = new RegExp(&quot;^[&quot; + teal.nested_delimiter + &quot;]&quot;);\n    teal.replace_keys_regex.endOfString = new RegExp(&quot;[&quot; + teal.nested_delimiter + &quot;]$&quot;);\n    teal.replace_keys_list.forEach(function(name){\n      //Store a copy of the regex in the teal.replace_keys_regex object so that the regexs are only built once\n      teal.replace_keys_regex[name] = new RegExp(&quot;[&quot; + teal.nested_delimiter + &quot;]?&quot; + name + &quot;[&quot; + teal.nested_delimiter + &quot;]?&quot;, &quot;g&quot;);\n      key = teal.keyReplace(key,name,teal.replace_keys_regex[name]);\n    });\n  }else{\n    //Loop through the replace_keys object to see what we should be replacing\n    teal.replace_keys_list.forEach(function(name){\n      key = teal.keyReplace(key,name,teal.replace_keys_regex[name]);\n    });\n  }\n  return key;\n}\n\nteal.keyReplace = function(key,name,re){\n  //Check to see if we are replacing the key name with a new value or if we are removing the key altogether\n  if(teal.replace_keys[name] === ''){\n    //The key needs to be removed completely\n    key = key.replace(re,teal.nested_delimiter);\n    //Check to see if the key starts with the nested delimiter and if so, remove it\n    if(key.indexOf(teal.nested_delimiter) === 0){\n      var cleanRegEx = new RegExp(&quot;^[&quot; + teal.nested_delimiter + &quot;]&quot;);\n      key = key.replace(cleanRegEx,'');\n    }\n  }else{\n    //Make a copy of the original key to see how we need to update the key name\n    var origKey = key;\n    //Replace the key name\n    key = key.replace(re,teal.nested_delimiter + teal.replace_keys[name] + teal.nested_delimiter);\n    //Check for the start of the origKey to see of the nested delimiter is there\n    if(!origKey.match(teal.replace_keys_regex.startOfString)){\n      //Remove the nested delimiter from the start of the string\n      var cleanRegEx = new RegExp(&quot;^[&quot; + teal.nested_delimiter + &quot;]&quot;);\n      key = key.replace(cleanRegEx,'');\n    }\n    //Check for the end of the origKey to see of the nested delimiter is there\n    if(!origKey.match(teal.replace_keys_regex.endOfString)){\n      //Add the nested delimiter to the end of the string\n      var cleanRegEx = new RegExp(&quot;[&quot; + teal.nested_delimiter + &quot;]$&quot;);\n      key = key.replace(cleanRegEx,'');\n    }\n  }\n  return key;\n}\n\nteal.processDataObject = function(obj,new_obj,parent_key,create_array){\n  if(typeof parent_key === &quot;undefined&quot;){\n    //This object isn't nested in another object\n    parent_key = &quot;&quot;;\n  }else{\n    //Add the nested_delimiter to the parent key if the delimiter isn't already at the end\n    teal.nested_delimiter_regex = teal.nested_delimiter_regex || new RegExp(&quot;[&quot;+teal.nested_delimiter+&quot;]$&quot;);\n    if(!parent_key.match(teal.nested_delimiter_regex)){\n      parent_key += &quot;&quot;+teal.nested_delimiter;\n    }\n  }\n  Object.keys(obj).forEach(function(key){\n    var nested_key_name = parent_key+key;\n    //Format the new key name and take out any whitespace\n    var new_key_name = teal.getKeyName((teal.prefix+parent_key+key).replace(/\\s/g, ''));\n    //Set the key_type to limit the number of typeof checks\n    var key_type = teal.typeOf(obj[key]);\n    if(key_type !== 'undefined' &amp;&amp; key_type != null){\n      if(key_type.match(/boolean|string|number|date/) &amp;&amp; !teal.ignoreKey(key)){\n        //If obj[key] is a date, convert to ISOString\n        if(teal.typeOf(obj[key]) === 'date'){\n          obj[key] = obj[key].toISOString();\n        }\n        //Check to see if we need to create an array for this data point\n        if(create_array){\n          //First check to see if this key exists\n          if(teal.typeOf(new_obj[new_key_name]) !== &quot;array&quot;){\n            //Make the key an array                       \n            new_obj[new_key_name] = [];\n          }\n          new_obj[new_key_name].push(&quot;&quot;+obj[key]); //Force value to be a string\n        }else{\n          //If the value of the key is a boolean or a string or a number and \n          //the key shouldn't be ignored add to the data layer\n          new_obj[new_key_name] = &quot;&quot;+obj[key]; //Force value to be a string\n        }\n      }else if(key_type === 'object' &amp;&amp; !teal.ignoreKey(key)){\n        //Process this piece of the data layer and merge it\n        teal.processDataObject(obj[key],new_obj,nested_key_name,create_array);\n      }else if(key_type === 'array'){\n        teal.processDataArray(obj[key],new_obj,nested_key_name);\n      }\n    }\n  });\n}\n\nteal.processDataArray = function(obj,new_obj,parent_key){\n  var objLength = obj.length; \n  if(typeof parent_key === &quot;undefined&quot;){\n    //This object isn't nested in another object\n    parent_key = &quot;&quot;;\n  }else if(objLength &gt; 0 &amp;&amp; teal.typeOf(obj[0]).match(/boolean|string|number|date/)){\n    //This is a normal array that doesn't need a nested delimiter\n  }else{\n    //Add the nested_delimiter to the parent key\n    parent_key += &quot;&quot;+teal.nested_delimiter;\n  }\n  //Format the new key name and take out any whitespace\n  var new_key_name = teal.getKeyName((teal.prefix+parent_key).replace(/\\s/g, ''));\n  for(var n = 0; n &lt; objLength; n++){\n    var key_type = teal.typeOf(obj[n]);\n    if(key_type.match(/boolean|string|number|date/)){\n      //If obj[n] is a date, convert to ISOString\n      if(key_type === 'date'){\n        obj[n] = obj[n].toISOString();\n      }\n      //First check to see if this key exists\n      if(teal.typeOf(new_obj[new_key_name]) !== &quot;array&quot;){\n        //Make the key an array                       \n        new_obj[new_key_name] = [];\n      }\n      //If the value of the key is a boolean or a string or a number and \n      //the key shouldn't be ignored add to the data layer                        \n      new_obj[new_key_name].push(&quot;&quot;+obj[n]);\n    }else if(key_type === 'object'){\n      teal.processDataObject(obj[n],new_obj,new_key_name,1);\n    }\n  }\n}\n\nteal.typeOf = function(e){return ({}).toString.call(e).match(/\\s([a-zA-Z]+)/)[1].toLowerCase();}\n\nteal.flattenObject = function(obj,new_obj){\n  //Make sure object exists\n  if(typeof obj === 'undefined'){\n    return false;\n  }\n  //Check to see if we want to flatten the same object and keep the reference\n  var mergeObject = false;\n  if(obj === new_obj){\n    mergeObject = true;\n    //Start off a clean copy of the object\n    new_obj = {};\n  }\n  //Make sure new object exists\n  if(typeof new_obj === 'undefined'){\n    new_obj = {};\n  }\n  //Check to see if this object is an array\n  if(teal.typeOf(obj) === 'array'){\n    //Store a safe copy of this object in case we are processing the b object\n    var temp_array = JSON.parse(JSON.stringify(obj));\n    var temp_array_length = temp_array.length;\n    //Clean up the object\n    obj = {};\n    //Let's see if the obj and new_obj are the same.  If so, going to assume we are using the b object\n    if(obj == new_obj){\n      //Let's ensure that we have the a object\n      if(typeof a === 'undefined'){\n        var a = 'view';\n      }\n      //Add the automatic utag data points\n      utag.loader.RD(new_obj,a);\n    }\n    for(var i = 0; i &lt; temp_array_length; i++){\n        teal.processDataObject(temp_array[i],new_obj);\n    }\n  }else{\n    teal.processDataObject(obj,new_obj);\n  }\n  if(mergeObject){\n    //Need to delete everything out of obj and replace with new_obj\n    Object.keys(obj).forEach(function(key){\n      delete obj[key];\n    });\n    //Now that we have a clean original object, add everything from new_obj which allows the reference to be kept\n    Object.keys(new_obj).forEach(function(key){\n      obj[key] = new_obj[key];\n    });\n  }\n\n  return new_obj;\n}"},"6754af9632a2745e85c293e5aac0863370d9bd3330b9938c00cadfd215227d77":{"code":"// Flattener, pulled from https://tags.tiqcdn.com/utag/tealium-solutions/main/prod/utag.9.js as instructed by\n// https://community.tealiumiq.com/t5/iQ-Tag-Management/Data-Layer-Converter/ta-p/17581#toc-hId-1329378795\n\n//Define the teal global namespace\nwindow.teal = window.teal || {};\nteal.ignore_keys = {};\nteal.replace_keys = {};\nteal.prefix = &quot;&quot;;\n\n//In cases of a nested object, what should join the parent key and child key\nteal.nested_delimiter = &quot;.&quot;;\n\n//Ignore keys in the data layer that start with the following text.\n//Expecting an object of strings\n/*\nteal.ignore_keys = {\n  &quot;user&quot; : 1,\n  &quot;util&quot; : 1\n};\n*/\n\n//Specify a prefix for data layer elements being sent to the utag_data object.\n//Instead of utag_data.productID, it could be utag_data.dl_productID\n// teal.prefix = &quot;dl.&quot;;\n\n//Keys to be removed from the new flattened key name\n//For a flattened key, you have digitalData.page.pageInfo.pageName and you want digitalData.page.pi.pageName\n/* teal.replace_keys = {\n    &quot;pageInfo&quot;:&quot;pi&quot;\n  };\n*/\n\n//For a flattened key, you have digitalData.page.pageInfo.pageName and you want digitalData.page.pageName\n/* teal.replace_keys = {\n    &quot;pageInfo&quot;:&quot;&quot;\n  };\n*/\n\n//For a flattened key, you have digitalData.page.pageInfo.pageName and you want digitalData.pageName\n/* teal.replace_keys = {\n    &quot;page&quot;:&quot;&quot;,\n    &quot;pageInfo&quot;:&quot;&quot;\n  };\n*/\n\n/*****************DO NOT MODIFY BELOW***********************/\n\nteal.flattener_version = 1.4;\n\n// From https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/keys\n// Add the Object.keys method for older versions of IE\nObject.keys||(Object.keys=function(){&quot;use strict&quot;;var a=Object.prototype.hasOwnProperty,b=!{toString:null}.propertyIsEnumerable(&quot;toString&quot;),c=[&quot;toString&quot;,&quot;toLocaleString&quot;,&quot;valueOf&quot;,&quot;hasOwnProperty&quot;,&quot;isPrototypeOf&quot;,&quot;propertyIsEnumerable&quot;,&quot;constructor&quot;],d=c.length;return function(e){if(&quot;object&quot;!=typeof e&amp;&amp;(&quot;function&quot;!=typeof e||null===e))throw new TypeError(&quot;Object.keys called on non-object&quot;);var g,h,f=[];for(g in e)a.call(e,g)&amp;&amp;f.push(g);if(b)for(h=0;h&lt;d;h++)a.call(e,c[h])&amp;&amp;f.push(c[h]);return f}}());\n\nteal.ignoreKey = function(key,re){\n  var should_ignore_key = 0;\n  //Build a new array to avoid running through Object.keys multiple times\n  if(typeof teal.ignore_keys_list === 'undefined'){\n    teal.ignore_keys_list = Object.keys(teal.ignore_keys);\n    teal.ignore_keys_list.forEach(function(name){\n      //Store a copy of the regex in the object\n      teal.ignore_keys[name] = new RegExp(&quot;^&quot;+name);\n      if(key.match(teal.ignore_keys[name])){\n        should_ignore_key = 1;\n      }\n    });\n  }else{\n    //Loop through the ignore_keys object to see if we should ignore this key\n    teal.ignore_keys_list.forEach(function(name){\n      if(key.match(teal.ignore_keys[name])){\n        should_ignore_key = 1;\n      }\n    });\n  }\n  return should_ignore_key;\n}\n\nteal.getKeyName = function(key,re){\n  //Create a new object to store regexs or use existing one\n  teal.replace_keys_regex = teal.replace_keys_regex || {};\n  //Build a new array to avoid running through Object.keys multiple times\n  if(typeof teal.replace_keys_list === 'undefined'){\n    teal.replace_keys_list = Object.keys(teal.replace_keys);\n    //Make a start of string and end of string regex\n    teal.replace_keys_regex.startOfString = new RegExp(&quot;^[&quot; + teal.nested_delimiter + &quot;]&quot;);\n    teal.replace_keys_regex.endOfString = new RegExp(&quot;[&quot; + teal.nested_delimiter + &quot;]$&quot;);\n    teal.replace_keys_list.forEach(function(name){\n      //Store a copy of the regex in the teal.replace_keys_regex object so that the regexs are only built once\n      teal.replace_keys_regex[name] = new RegExp(&quot;[&quot; + teal.nested_delimiter + &quot;]?&quot; + name + &quot;[&quot; + teal.nested_delimiter + &quot;]?&quot;, &quot;g&quot;);\n      key = teal.keyReplace(key,name,teal.replace_keys_regex[name]);\n    });\n  }else{\n    //Loop through the replace_keys object to see what we should be replacing\n    teal.replace_keys_list.forEach(function(name){\n      key = teal.keyReplace(key,name,teal.replace_keys_regex[name]);\n    });\n  }\n  return key;\n}\n\nteal.keyReplace = function(key,name,re){\n  //Check to see if we are replacing the key name with a new value or if we are removing the key altogether\n  if(teal.replace_keys[name] === ''){\n    //The key needs to be removed completely\n    key = key.replace(re,teal.nested_delimiter);\n    //Check to see if the key starts with the nested delimiter and if so, remove it\n    if(key.indexOf(teal.nested_delimiter) === 0){\n      var cleanRegEx = new RegExp(&quot;^[&quot; + teal.nested_delimiter + &quot;]&quot;);\n      key = key.replace(cleanRegEx,'');\n    }\n  }else{\n    //Make a copy of the original key to see how we need to update the key name\n    var origKey = key;\n    //Replace the key name\n    key = key.replace(re,teal.nested_delimiter + teal.replace_keys[name] + teal.nested_delimiter);\n    //Check for the start of the origKey to see of the nested delimiter is there\n    if(!origKey.match(teal.replace_keys_regex.startOfString)){\n      //Remove the nested delimiter from the start of the string\n      var cleanRegEx = new RegExp(&quot;^[&quot; + teal.nested_delimiter + &quot;]&quot;);\n      key = key.replace(cleanRegEx,'');\n    }\n    //Check for the end of the origKey to see of the nested delimiter is there\n    if(!origKey.match(teal.replace_keys_regex.endOfString)){\n      //Add the nested delimiter to the end of the string\n      var cleanRegEx = new RegExp(&quot;[&quot; + teal.nested_delimiter + &quot;]$&quot;);\n      key = key.replace(cleanRegEx,'');\n    }\n  }\n  return key;\n}\n\nteal.processDataObject = function(obj,new_obj,parent_key,create_array){\n  if(typeof parent_key === &quot;undefined&quot;){\n    //This object isn't nested in another object\n    parent_key = &quot;&quot;;\n  }else{\n    //Add the nested_delimiter to the parent key if the delimiter isn't already at the end\n    teal.nested_delimiter_regex = teal.nested_delimiter_regex || new RegExp(&quot;[&quot;+teal.nested_delimiter+&quot;]$&quot;);\n    if(!parent_key.match(teal.nested_delimiter_regex)){\n      parent_key += &quot;&quot;+teal.nested_delimiter;\n    }\n  }\n  Object.keys(obj).forEach(function(key){\n    var nested_key_name = parent_key+key;\n    //Format the new key name and take out any whitespace\n    var new_key_name = teal.getKeyName((teal.prefix+parent_key+key).replace(/\\s/g, ''));\n    //Set the key_type to limit the number of typeof checks\n    var key_type = teal.typeOf(obj[key]);\n    if(key_type !== 'undefined' &amp;&amp; key_type != null){\n      if(key_type.match(/boolean|string|number|date/) &amp;&amp; !teal.ignoreKey(key)){\n        //If obj[key] is a date, convert to ISOString\n        if(teal.typeOf(obj[key]) === 'date'){\n          obj[key] = obj[key].toISOString();\n        }\n        //Check to see if we need to create an array for this data point\n        if(create_array){\n          //First check to see if this key exists\n          if(teal.typeOf(new_obj[new_key_name]) !== &quot;array&quot;){\n            //Make the key an array                       \n            new_obj[new_key_name] = [];\n          }\n          new_obj[new_key_name].push(&quot;&quot;+obj[key]); //Force value to be a string\n        }else{\n          //If the value of the key is a boolean or a string or a number and \n          //the key shouldn't be ignored add to the data layer\n          new_obj[new_key_name] = &quot;&quot;+obj[key]; //Force value to be a string\n        }\n      }else if(key_type === 'object' &amp;&amp; !teal.ignoreKey(key)){\n        //Process this piece of the data layer and merge it\n        teal.processDataObject(obj[key],new_obj,nested_key_name,create_array);\n      }else if(key_type === 'array'){\n        teal.processDataArray(obj[key],new_obj,nested_key_name);\n      }\n    }\n  });\n}\n\nteal.processDataArray = function(obj,new_obj,parent_key){\n  var objLength = obj.length; \n  if(typeof parent_key === &quot;undefined&quot;){\n    //This object isn't nested in another object\n    parent_key = &quot;&quot;;\n  }else if(objLength &gt; 0 &amp;&amp; teal.typeOf(obj[0]).match(/boolean|string|number|date/)){\n    //This is a normal array that doesn't need a nested delimiter\n  }else{\n    //Add the nested_delimiter to the parent key\n    parent_key += &quot;&quot;+teal.nested_delimiter;\n  }\n  //Format the new key name and take out any whitespace\n  var new_key_name = teal.getKeyName((teal.prefix+parent_key).replace(/\\s/g, ''));\n  for(var n = 0; n &lt; objLength; n++){\n    var key_type = teal.typeOf(obj[n]);\n    if(key_type.match(/boolean|string|number|date/)){\n      //If obj[n] is a date, convert to ISOString\n      if(key_type === 'date'){\n        obj[n] = obj[n].toISOString();\n      }\n      //First check to see if this key exists\n      if(teal.typeOf(new_obj[new_key_name]) !== &quot;array&quot;){\n        //Make the key an array                       \n        new_obj[new_key_name] = [];\n      }\n      //If the value of the key is a boolean or a string or a number and \n      //the key shouldn't be ignored add to the data layer                        \n      new_obj[new_key_name].push(&quot;&quot;+obj[n]);\n    }else if(key_type === 'object'){\n      teal.processDataObject(obj[n],new_obj,new_key_name,1);\n    }\n  }\n}\n\nteal.typeOf = function(e){return ({}).toString.call(e).match(/\\s([a-zA-Z]+)/)[1].toLowerCase();}\n\nteal.flattenObject = function(obj,new_obj){\n  //Make sure object exists\n  if(typeof obj === 'undefined'){\n    return false;\n  }\n  //Check to see if we want to flatten the same object and keep the reference\n  var mergeObject = false;\n  if(obj === new_obj){\n    mergeObject = true;\n    //Start off a clean copy of the object\n    new_obj = {};\n  }\n  //Make sure new object exists\n  if(typeof new_obj === 'undefined'){\n    new_obj = {};\n  }\n  //Check to see if this object is an array\n  if(teal.typeOf(obj) === 'array'){\n    //Store a safe copy of this object in case we are processing the b object\n    var temp_array = JSON.parse(JSON.stringify(obj));\n    var temp_array_length = temp_array.length;\n    //Clean up the object\n    obj = {};\n    //Let's see if the obj and new_obj are the same.  If so, going to assume we are using the b object\n    if(obj == new_obj){\n      //Let's ensure that we have the a object\n      if(typeof a === 'undefined'){\n        var a = 'view';\n      }\n      //Add the automatic utag data points\n      utag.loader.RD(new_obj,a);\n    }\n    for(var i = 0; i &lt; temp_array_length; i++){\n        teal.processDataObject(temp_array[i],new_obj);\n    }\n  }else{\n    teal.processDataObject(obj,new_obj);\n  }\n  if(mergeObject){\n    //Need to delete everything out of obj and replace with new_obj\n    Object.keys(obj).forEach(function(key){\n      delete obj[key];\n    });\n    //Now that we have a clean original object, add everything from new_obj which allows the reference to be kept\n    Object.keys(new_obj).forEach(function(key){\n      obj[key] = new_obj[key];\n    });\n  }\n\n  return new_obj;\n}","name":"prod","promotedTimestamp":"202101151252","promotedDraftName":"default","promotedBy":"caleb.jaquith@tealium.com"},"ef260e9aa3c673af240d17a2660480361a8e081d1ffeca2a5ed0e3219fc18567":{"promotedTimestamp":"202101151252","promotedDraftName":"default","promotedBy":"caleb.jaquith@tealium.com","code":"// Flattener, pulled from https://tags.tiqcdn.com/utag/tealium-solutions/main/prod/utag.9.js as instructed by\n// https://community.tealiumiq.com/t5/iQ-Tag-Management/Data-Layer-Converter/ta-p/17581#toc-hId-1329378795\n\n//Define the teal global namespace\nwindow.teal = window.teal || {};\nteal.ignore_keys = {};\nteal.replace_keys = {};\nteal.prefix = &quot;&quot;;\n\n//In cases of a nested object, what should join the parent key and child key\nteal.nested_delimiter = &quot;.&quot;;\n\n//Ignore keys in the data layer that start with the following text.\n//Expecting an object of strings\n/*\nteal.ignore_keys = {\n  &quot;user&quot; : 1,\n  &quot;util&quot; : 1\n};\n*/\n\n//Specify a prefix for data layer elements being sent to the utag_data object.\n//Instead of utag_data.productID, it could be utag_data.dl_productID\n// teal.prefix = &quot;dl.&quot;;\n\n//Keys to be removed from the new flattened key name\n//For a flattened key, you have digitalData.page.pageInfo.pageName and you want digitalData.page.pi.pageName\n/* teal.replace_keys = {\n    &quot;pageInfo&quot;:&quot;pi&quot;\n  };\n*/\n\n//For a flattened key, you have digitalData.page.pageInfo.pageName and you want digitalData.page.pageName\n/* teal.replace_keys = {\n    &quot;pageInfo&quot;:&quot;&quot;\n  };\n*/\n\n//For a flattened key, you have digitalData.page.pageInfo.pageName and you want digitalData.pageName\n/* teal.replace_keys = {\n    &quot;page&quot;:&quot;&quot;,\n    &quot;pageInfo&quot;:&quot;&quot;\n  };\n*/\n\n/*****************DO NOT MODIFY BELOW***********************/\n\nteal.flattener_version = 1.4;\n\n// From https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/keys\n// Add the Object.keys method for older versions of IE\nObject.keys||(Object.keys=function(){&quot;use strict&quot;;var a=Object.prototype.hasOwnProperty,b=!{toString:null}.propertyIsEnumerable(&quot;toString&quot;),c=[&quot;toString&quot;,&quot;toLocaleString&quot;,&quot;valueOf&quot;,&quot;hasOwnProperty&quot;,&quot;isPrototypeOf&quot;,&quot;propertyIsEnumerable&quot;,&quot;constructor&quot;],d=c.length;return function(e){if(&quot;object&quot;!=typeof e&amp;&amp;(&quot;function&quot;!=typeof e||null===e))throw new TypeError(&quot;Object.keys called on non-object&quot;);var g,h,f=[];for(g in e)a.call(e,g)&amp;&amp;f.push(g);if(b)for(h=0;h&lt;d;h++)a.call(e,c[h])&amp;&amp;f.push(c[h]);return f}}());\n\nteal.ignoreKey = function(key,re){\n  var should_ignore_key = 0;\n  //Build a new array to avoid running through Object.keys multiple times\n  if(typeof teal.ignore_keys_list === 'undefined'){\n    teal.ignore_keys_list = Object.keys(teal.ignore_keys);\n    teal.ignore_keys_list.forEach(function(name){\n      //Store a copy of the regex in the object\n      teal.ignore_keys[name] = new RegExp(&quot;^&quot;+name);\n      if(key.match(teal.ignore_keys[name])){\n        should_ignore_key = 1;\n      }\n    });\n  }else{\n    //Loop through the ignore_keys object to see if we should ignore this key\n    teal.ignore_keys_list.forEach(function(name){\n      if(key.match(teal.ignore_keys[name])){\n        should_ignore_key = 1;\n      }\n    });\n  }\n  return should_ignore_key;\n}\n\nteal.getKeyName = function(key,re){\n  //Create a new object to store regexs or use existing one\n  teal.replace_keys_regex = teal.replace_keys_regex || {};\n  //Build a new array to avoid running through Object.keys multiple times\n  if(typeof teal.replace_keys_list === 'undefined'){\n    teal.replace_keys_list = Object.keys(teal.replace_keys);\n    //Make a start of string and end of string regex\n    teal.replace_keys_regex.startOfString = new RegExp(&quot;^[&quot; + teal.nested_delimiter + &quot;]&quot;);\n    teal.replace_keys_regex.endOfString = new RegExp(&quot;[&quot; + teal.nested_delimiter + &quot;]$&quot;);\n    teal.replace_keys_list.forEach(function(name){\n      //Store a copy of the regex in the teal.replace_keys_regex object so that the regexs are only built once\n      teal.replace_keys_regex[name] = new RegExp(&quot;[&quot; + teal.nested_delimiter + &quot;]?&quot; + name + &quot;[&quot; + teal.nested_delimiter + &quot;]?&quot;, &quot;g&quot;);\n      key = teal.keyReplace(key,name,teal.replace_keys_regex[name]);\n    });\n  }else{\n    //Loop through the replace_keys object to see what we should be replacing\n    teal.replace_keys_list.forEach(function(name){\n      key = teal.keyReplace(key,name,teal.replace_keys_regex[name]);\n    });\n  }\n  return key;\n}\n\nteal.keyReplace = function(key,name,re){\n  //Check to see if we are replacing the key name with a new value or if we are removing the key altogether\n  if(teal.replace_keys[name] === ''){\n    //The key needs to be removed completely\n    key = key.replace(re,teal.nested_delimiter);\n    //Check to see if the key starts with the nested delimiter and if so, remove it\n    if(key.indexOf(teal.nested_delimiter) === 0){\n      var cleanRegEx = new RegExp(&quot;^[&quot; + teal.nested_delimiter + &quot;]&quot;);\n      key = key.replace(cleanRegEx,'');\n    }\n  }else{\n    //Make a copy of the original key to see how we need to update the key name\n    var origKey = key;\n    //Replace the key name\n    key = key.replace(re,teal.nested_delimiter + teal.replace_keys[name] + teal.nested_delimiter);\n    //Check for the start of the origKey to see of the nested delimiter is there\n    if(!origKey.match(teal.replace_keys_regex.startOfString)){\n      //Remove the nested delimiter from the start of the string\n      var cleanRegEx = new RegExp(&quot;^[&quot; + teal.nested_delimiter + &quot;]&quot;);\n      key = key.replace(cleanRegEx,'');\n    }\n    //Check for the end of the origKey to see of the nested delimiter is there\n    if(!origKey.match(teal.replace_keys_regex.endOfString)){\n      //Add the nested delimiter to the end of the string\n      var cleanRegEx = new RegExp(&quot;[&quot; + teal.nested_delimiter + &quot;]$&quot;);\n      key = key.replace(cleanRegEx,'');\n    }\n  }\n  return key;\n}\n\nteal.processDataObject = function(obj,new_obj,parent_key,create_array){\n  if(typeof parent_key === &quot;undefined&quot;){\n    //This object isn't nested in another object\n    parent_key = &quot;&quot;;\n  }else{\n    //Add the nested_delimiter to the parent key if the delimiter isn't already at the end\n    teal.nested_delimiter_regex = teal.nested_delimiter_regex || new RegExp(&quot;[&quot;+teal.nested_delimiter+&quot;]$&quot;);\n    if(!parent_key.match(teal.nested_delimiter_regex)){\n      parent_key += &quot;&quot;+teal.nested_delimiter;\n    }\n  }\n  Object.keys(obj).forEach(function(key){\n    var nested_key_name = parent_key+key;\n    //Format the new key name and take out any whitespace\n    var new_key_name = teal.getKeyName((teal.prefix+parent_key+key).replace(/\\s/g, ''));\n    //Set the key_type to limit the number of typeof checks\n    var key_type = teal.typeOf(obj[key]);\n    if(key_type !== 'undefined' &amp;&amp; key_type != null){\n      if(key_type.match(/boolean|string|number|date/) &amp;&amp; !teal.ignoreKey(key)){\n        //If obj[key] is a date, convert to ISOString\n        if(teal.typeOf(obj[key]) === 'date'){\n          obj[key] = obj[key].toISOString();\n        }\n        //Check to see if we need to create an array for this data point\n        if(create_array){\n          //First check to see if this key exists\n          if(teal.typeOf(new_obj[new_key_name]) !== &quot;array&quot;){\n            //Make the key an array                       \n            new_obj[new_key_name] = [];\n          }\n          new_obj[new_key_name].push(&quot;&quot;+obj[key]); //Force value to be a string\n        }else{\n          //If the value of the key is a boolean or a string or a number and \n          //the key shouldn't be ignored add to the data layer\n          new_obj[new_key_name] = &quot;&quot;+obj[key]; //Force value to be a string\n        }\n      }else if(key_type === 'object' &amp;&amp; !teal.ignoreKey(key)){\n        //Process this piece of the data layer and merge it\n        teal.processDataObject(obj[key],new_obj,nested_key_name,create_array);\n      }else if(key_type === 'array'){\n        teal.processDataArray(obj[key],new_obj,nested_key_name);\n      }\n    }\n  });\n}\n\nteal.processDataArray = function(obj,new_obj,parent_key){\n  var objLength = obj.length; \n  if(typeof parent_key === &quot;undefined&quot;){\n    //This object isn't nested in another object\n    parent_key = &quot;&quot;;\n  }else if(objLength &gt; 0 &amp;&amp; teal.typeOf(obj[0]).match(/boolean|string|number|date/)){\n    //This is a normal array that doesn't need a nested delimiter\n  }else{\n    //Add the nested_delimiter to the parent key\n    parent_key += &quot;&quot;+teal.nested_delimiter;\n  }\n  //Format the new key name and take out any whitespace\n  var new_key_name = teal.getKeyName((teal.prefix+parent_key).replace(/\\s/g, ''));\n  for(var n = 0; n &lt; objLength; n++){\n    var key_type = teal.typeOf(obj[n]);\n    if(key_type.match(/boolean|string|number|date/)){\n      //If obj[n] is a date, convert to ISOString\n      if(key_type === 'date'){\n        obj[n] = obj[n].toISOString();\n      }\n      //First check to see if this key exists\n      if(teal.typeOf(new_obj[new_key_name]) !== &quot;array&quot;){\n        //Make the key an array                       \n        new_obj[new_key_name] = [];\n      }\n      //If the value of the key is a boolean or a string or a number and \n      //the key shouldn't be ignored add to the data layer                        \n      new_obj[new_key_name].push(&quot;&quot;+obj[n]);\n    }else if(key_type === 'object'){\n      teal.processDataObject(obj[n],new_obj,new_key_name,1);\n    }\n  }\n}\n\nteal.typeOf = function(e){return ({}).toString.call(e).match(/\\s([a-zA-Z]+)/)[1].toLowerCase();}\n\nteal.flattenObject = function(obj,new_obj){\n  //Make sure object exists\n  if(typeof obj === 'undefined'){\n    return false;\n  }\n  //Check to see if we want to flatten the same object and keep the reference\n  var mergeObject = false;\n  if(obj === new_obj){\n    mergeObject = true;\n    //Start off a clean copy of the object\n    new_obj = {};\n  }\n  //Make sure new object exists\n  if(typeof new_obj === 'undefined'){\n    new_obj = {};\n  }\n  //Check to see if this object is an array\n  if(teal.typeOf(obj) === 'array'){\n    //Store a safe copy of this object in case we are processing the b object\n    var temp_array = JSON.parse(JSON.stringify(obj));\n    var temp_array_length = temp_array.length;\n    //Clean up the object\n    obj = {};\n    //Let's see if the obj and new_obj are the same.  If so, going to assume we are using the b object\n    if(obj == new_obj){\n      //Let's ensure that we have the a object\n      if(typeof a === 'undefined'){\n        var a = 'view';\n      }\n      //Add the automatic utag data points\n      utag.loader.RD(new_obj,a);\n    }\n    for(var i = 0; i &lt; temp_array_length; i++){\n        teal.processDataObject(temp_array[i],new_obj);\n    }\n  }else{\n    teal.processDataObject(obj,new_obj);\n  }\n  if(mergeObject){\n    //Need to delete everything out of obj and replace with new_obj\n    Object.keys(obj).forEach(function(key){\n      delete obj[key];\n    });\n    //Now that we have a clean original object, add everything from new_obj which allows the reference to be kept\n    Object.keys(new_obj).forEach(function(key){\n      obj[key] = new_obj[key];\n    });\n  }\n\n  return new_obj;\n}","name":"dev"}},"draftSeq":"2","draftSnippets":{"37a8eec1ce19687d132fe29051dca629d164e2c4958ba141d5f4133a33f0688f":{"code":"// Flattener, pulled from https://tags.tiqcdn.com/utag/tealium-solutions/main/prod/utag.9.js as instructed by\n// https://community.tealiumiq.com/t5/iQ-Tag-Management/Data-Layer-Converter/ta-p/17581#toc-hId-1329378795\n\n//Define the teal global namespace\nwindow.teal = window.teal || {};\nteal.ignore_keys = {};\nteal.replace_keys = {};\nteal.prefix = &quot;&quot;;\n\n//In cases of a nested object, what should join the parent key and child key\nteal.nested_delimiter = &quot;.&quot;;\n\n//Ignore keys in the data layer that start with the following text.\n//Expecting an object of strings\n/*\nteal.ignore_keys = {\n  &quot;user&quot; : 1,\n  &quot;util&quot; : 1\n};\n*/\n\n//Specify a prefix for data layer elements being sent to the utag_data object.\n//Instead of utag_data.productID, it could be utag_data.dl_productID\n// teal.prefix = &quot;dl.&quot;;\n\n//Keys to be removed from the new flattened key name\n//For a flattened key, you have digitalData.page.pageInfo.pageName and you want digitalData.page.pi.pageName\n/* teal.replace_keys = {\n    &quot;pageInfo&quot;:&quot;pi&quot;\n  };\n*/\n\n//For a flattened key, you have digitalData.page.pageInfo.pageName and you want digitalData.page.pageName\n/* teal.replace_keys = {\n    &quot;pageInfo&quot;:&quot;&quot;\n  };\n*/\n\n//For a flattened key, you have digitalData.page.pageInfo.pageName and you want digitalData.pageName\n/* teal.replace_keys = {\n    &quot;page&quot;:&quot;&quot;,\n    &quot;pageInfo&quot;:&quot;&quot;\n  };\n*/\n\n/*****************DO NOT MODIFY BELOW***********************/\n\nteal.flattener_version = 1.4;\n\n// From https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/keys\n// Add the Object.keys method for older versions of IE\nObject.keys||(Object.keys=function(){&quot;use strict&quot;;var a=Object.prototype.hasOwnProperty,b=!{toString:null}.propertyIsEnumerable(&quot;toString&quot;),c=[&quot;toString&quot;,&quot;toLocaleString&quot;,&quot;valueOf&quot;,&quot;hasOwnProperty&quot;,&quot;isPrototypeOf&quot;,&quot;propertyIsEnumerable&quot;,&quot;constructor&quot;],d=c.length;return function(e){if(&quot;object&quot;!=typeof e&amp;&amp;(&quot;function&quot;!=typeof e||null===e))throw new TypeError(&quot;Object.keys called on non-object&quot;);var g,h,f=[];for(g in e)a.call(e,g)&amp;&amp;f.push(g);if(b)for(h=0;h&lt;d;h++)a.call(e,c[h])&amp;&amp;f.push(c[h]);return f}}());\n\nteal.ignoreKey = function(key,re){\n  var should_ignore_key = 0;\n  //Build a new array to avoid running through Object.keys multiple times\n  if(typeof teal.ignore_keys_list === 'undefined'){\n    teal.ignore_keys_list = Object.keys(teal.ignore_keys);\n    teal.ignore_keys_list.forEach(function(name){\n      //Store a copy of the regex in the object\n      teal.ignore_keys[name] = new RegExp(&quot;^&quot;+name);\n      if(key.match(teal.ignore_keys[name])){\n        should_ignore_key = 1;\n      }\n    });\n  }else{\n    //Loop through the ignore_keys object to see if we should ignore this key\n    teal.ignore_keys_list.forEach(function(name){\n      if(key.match(teal.ignore_keys[name])){\n        should_ignore_key = 1;\n      }\n    });\n  }\n  return should_ignore_key;\n}\n\nteal.getKeyName = function(key,re){\n  //Create a new object to store regexs or use existing one\n  teal.replace_keys_regex = teal.replace_keys_regex || {};\n  //Build a new array to avoid running through Object.keys multiple times\n  if(typeof teal.replace_keys_list === 'undefined'){\n    teal.replace_keys_list = Object.keys(teal.replace_keys);\n    //Make a start of string and end of string regex\n    teal.replace_keys_regex.startOfString = new RegExp(&quot;^[&quot; + teal.nested_delimiter + &quot;]&quot;);\n    teal.replace_keys_regex.endOfString = new RegExp(&quot;[&quot; + teal.nested_delimiter + &quot;]$&quot;);\n    teal.replace_keys_list.forEach(function(name){\n      //Store a copy of the regex in the teal.replace_keys_regex object so that the regexs are only built once\n      teal.replace_keys_regex[name] = new RegExp(&quot;[&quot; + teal.nested_delimiter + &quot;]?&quot; + name + &quot;[&quot; + teal.nested_delimiter + &quot;]?&quot;, &quot;g&quot;);\n      key = teal.keyReplace(key,name,teal.replace_keys_regex[name]);\n    });\n  }else{\n    //Loop through the replace_keys object to see what we should be replacing\n    teal.replace_keys_list.forEach(function(name){\n      key = teal.keyReplace(key,name,teal.replace_keys_regex[name]);\n    });\n  }\n  return key;\n}\n\nteal.keyReplace = function(key,name,re){\n  //Check to see if we are replacing the key name with a new value or if we are removing the key altogether\n  if(teal.replace_keys[name] === ''){\n    //The key needs to be removed completely\n    key = key.replace(re,teal.nested_delimiter);\n    //Check to see if the key starts with the nested delimiter and if so, remove it\n    if(key.indexOf(teal.nested_delimiter) === 0){\n      var cleanRegEx = new RegExp(&quot;^[&quot; + teal.nested_delimiter + &quot;]&quot;);\n      key = key.replace(cleanRegEx,'');\n    }\n  }else{\n    //Make a copy of the original key to see how we need to update the key name\n    var origKey = key;\n    //Replace the key name\n    key = key.replace(re,teal.nested_delimiter + teal.replace_keys[name] + teal.nested_delimiter);\n    //Check for the start of the origKey to see of the nested delimiter is there\n    if(!origKey.match(teal.replace_keys_regex.startOfString)){\n      //Remove the nested delimiter from the start of the string\n      var cleanRegEx = new RegExp(&quot;^[&quot; + teal.nested_delimiter + &quot;]&quot;);\n      key = key.replace(cleanRegEx,'');\n    }\n    //Check for the end of the origKey to see of the nested delimiter is there\n    if(!origKey.match(teal.replace_keys_regex.endOfString)){\n      //Add the nested delimiter to the end of the string\n      var cleanRegEx = new RegExp(&quot;[&quot; + teal.nested_delimiter + &quot;]$&quot;);\n      key = key.replace(cleanRegEx,'');\n    }\n  }\n  return key;\n}\n\nteal.processDataObject = function(obj,new_obj,parent_key,create_array){\n  if(typeof parent_key === &quot;undefined&quot;){\n    //This object isn't nested in another object\n    parent_key = &quot;&quot;;\n  }else{\n    //Add the nested_delimiter to the parent key if the delimiter isn't already at the end\n    teal.nested_delimiter_regex = teal.nested_delimiter_regex || new RegExp(&quot;[&quot;+teal.nested_delimiter+&quot;]$&quot;);\n    if(!parent_key.match(teal.nested_delimiter_regex)){\n      parent_key += &quot;&quot;+teal.nested_delimiter;\n    }\n  }\n  Object.keys(obj).forEach(function(key){\n    var nested_key_name = parent_key+key;\n    //Format the new key name and take out any whitespace\n    var new_key_name = teal.getKeyName((teal.prefix+parent_key+key).replace(/\\s/g, ''));\n    //Set the key_type to limit the number of typeof checks\n    var key_type = teal.typeOf(obj[key]);\n    if(key_type !== 'undefined' &amp;&amp; key_type != null){\n      if(key_type.match(/boolean|string|number|date/) &amp;&amp; !teal.ignoreKey(key)){\n        //If obj[key] is a date, convert to ISOString\n        if(teal.typeOf(obj[key]) === 'date'){\n          obj[key] = obj[key].toISOString();\n        }\n        //Check to see if we need to create an array for this data point\n        if(create_array){\n          //First check to see if this key exists\n          if(teal.typeOf(new_obj[new_key_name]) !== &quot;array&quot;){\n            //Make the key an array                       \n            new_obj[new_key_name] = [];\n          }\n          new_obj[new_key_name].push(&quot;&quot;+obj[key]); //Force value to be a string\n        }else{\n          //If the value of the key is a boolean or a string or a number and \n          //the key shouldn't be ignored add to the data layer\n          new_obj[new_key_name] = &quot;&quot;+obj[key]; //Force value to be a string\n        }\n      }else if(key_type === 'object' &amp;&amp; !teal.ignoreKey(key)){\n        //Process this piece of the data layer and merge it\n        teal.processDataObject(obj[key],new_obj,nested_key_name,create_array);\n      }else if(key_type === 'array'){\n        teal.processDataArray(obj[key],new_obj,nested_key_name);\n      }\n    }\n  });\n}\n\nteal.processDataArray = function(obj,new_obj,parent_key){\n  var objLength = obj.length; \n  if(typeof parent_key === &quot;undefined&quot;){\n    //This object isn't nested in another object\n    parent_key = &quot;&quot;;\n  }else if(objLength &gt; 0 &amp;&amp; teal.typeOf(obj[0]).match(/boolean|string|number|date/)){\n    //This is a normal array that doesn't need a nested delimiter\n  }else{\n    //Add the nested_delimiter to the parent key\n    parent_key += &quot;&quot;+teal.nested_delimiter;\n  }\n  //Format the new key name and take out any whitespace\n  var new_key_name = teal.getKeyName((teal.prefix+parent_key).replace(/\\s/g, ''));\n  for(var n = 0; n &lt; objLength; n++){\n    var key_type = teal.typeOf(obj[n]);\n    if(key_type.match(/boolean|string|number|date/)){\n      //If obj[n] is a date, convert to ISOString\n      if(key_type === 'date'){\n        obj[n] = obj[n].toISOString();\n      }\n      //First check to see if this key exists\n      if(teal.typeOf(new_obj[new_key_name]) !== &quot;array&quot;){\n        //Make the key an array                       \n        new_obj[new_key_name] = [];\n      }\n      //If the value of the key is a boolean or a string or a number and \n      //the key shouldn't be ignored add to the data layer                        \n      new_obj[new_key_name].push(&quot;&quot;+obj[n]);\n    }else if(key_type === 'object'){\n      teal.processDataObject(obj[n],new_obj,new_key_name,1);\n    }\n  }\n}\n\nteal.typeOf = function(e){return ({}).toString.call(e).match(/\\s([a-zA-Z]+)/)[1].toLowerCase();}\n\nteal.flattenObject = function(obj,new_obj){\n  //Make sure object exists\n  if(typeof obj === 'undefined'){\n    return false;\n  }\n  //Check to see if we want to flatten the same object and keep the reference\n  var mergeObject = false;\n  if(obj === new_obj){\n    mergeObject = true;\n    //Start off a clean copy of the object\n    new_obj = {};\n  }\n  //Make sure new object exists\n  if(typeof new_obj === 'undefined'){\n    new_obj = {};\n  }\n  //Check to see if this object is an array\n  if(teal.typeOf(obj) === 'array'){\n    //Store a safe copy of this object in case we are processing the b object\n    var temp_array = JSON.parse(JSON.stringify(obj));\n    var temp_array_length = temp_array.length;\n    //Clean up the object\n    obj = {};\n    //Let's see if the obj and new_obj are the same.  If so, going to assume we are using the b object\n    if(obj == new_obj){\n      //Let's ensure that we have the a object\n      if(typeof a === 'undefined'){\n        var a = 'view';\n      }\n      //Add the automatic utag data points\n      utag.loader.RD(new_obj,a);\n    }\n    for(var i = 0; i &lt; temp_array_length; i++){\n        teal.processDataObject(temp_array[i],new_obj);\n    }\n  }else{\n    teal.processDataObject(obj,new_obj);\n  }\n  if(mergeObject){\n    //Need to delete everything out of obj and replace with new_obj\n    Object.keys(obj).forEach(function(key){\n      delete obj[key];\n    });\n    //Now that we have a clean original object, add everything from new_obj which allows the reference to be kept\n    Object.keys(new_obj).forEach(function(key){\n      obj[key] = new_obj[key];\n    });\n  }\n\n  return new_obj;\n}","name":"default","updateDate":"202012041340","creationDate":"202010260907","updatedBy":"caleb.jaquith@tealium.com"}},"queueSeq":"12"},"advExecOption":"alr","constructor":"","scope":"domready","status":"active","type":"new","publishedTargets":"dev","blockPubTargetsLogic":"true","selectedTargets":{"qa":"true","prod":"true","dev":"true"},"sort":"6","notes":"Changes  made to the following functions to handle array type data:\n1) teal.processDataArray \n2) teal.processDataObject \nEXAMPLE dataLayer[0].basket.items.subItems ","publish_revisions":{"svr_save_timestamps":{"qa":"202104211136","prod":"202101271235","dev":"202104211136"},"last_modified":"202104211136"},"extType":"Advanced Javascript Code","_id":"12"},"13":{"selectedTargets":{"qa":"true","dev":"true","prod":"true"},"notes":"Force","sort":"7","publish_revisions":{"last_modified":"202104211136","svr_save_timestamps":{"dev":"202104211136","prod":"202101271235","qa":"202104211136"}},"_id":"13","extType":"Advanced Javascript Code","type":"new","publishedTargets":"dev","blockPubTargetsLogic":"true","initialize":"","labels":"1","codeDevData":{"promotedSnippets":{"ef260e9aa3c673af240d17a2660480361a8e081d1ffeca2a5ed0e3219fc18567":{"promotedBy":"caleb.jaquith@tealium.com","promotedDraftName":"CURRENT","promotedTimestamp":"202104211120","name":"dev","code":"/**\n * Scope       : DOM Ready (run once)\n * Execution   : n/a\n * Condition   : n/a\n * Description : GTM Listener - Attach listener function using the DataLayer Helper\n */\n\n// define listener function, will be called for each element in the dataLayer array\nvar processEvent = function(model, message) {\n    // exit if the flattener function isn't present on the page\n    if (!teal || typeof teal.flattenObject !== &quot;function&quot;) {\n        return;\n    }\n    \n    var udo\n    // utag.view on dom ready (will be queued if too early)\n    // processes the 'model', built by the helper based on all past events on the page\n    if (message.event === &quot;tiq.load&quot;) {\n        //console.log(teal.flattenObject(message, message));\n        udo = flattenAndAugmentDataLayer(model)\n        utag.DB(&quot;View / &quot; + message.event, udo);\n        utag.view(udo);\n    }\n    \n    // custom event 'dom_ready' on dom ready (will be queued if too early)\n    // processes the 'model', built by the helper based on all past events on the page\n    if (message.event === &quot;tiq.dom&quot;) {\n        //console.log(teal.flattenObject(message, message));\n        udo = flattenAndAugmentDataLayer(model)\n        utag.DB(&quot;DOM / &quot; + message.event, udo);\n        // this is a custom event type - tag templates need to be edited (u.ev object updated to include 'timing') if the tag should fire. Tealium Collect will pick this up (u.ev.all === true)\n        utag.track('dom_ready', udo);\n    }\n    \n    // listen for page timing events as well (important for GA)\n    if (message.event === &quot;tiq.page_timing&quot;) {\n        udo = flattenAndAugmentDataLayer(model);\n        utag.DB(&quot;Custom / timing&quot;, udo);\n        // this is a custom event type - tag templates need to be edited (u.ev object updated to include 'timing') if the tag should fire. Tealium Collect will pick this up (u.ev.all === true)\n        utag.track('timing', udo);\n    }\n    \n    // consent events\n    if (message.event === &quot;tiq.cm_manage_preferences&quot; || message.event === &quot;tiq.cm_save_preferences&quot; || message.event === &quot;tiq.cm_manage_preferences_relaunched&quot;) {\n        udo = flattenAndAugmentDataLayer(message)\n        utag.DB(&quot;Consent link event: &quot; + message.event);\n        // this is a custom event type - tag templates need to be edited (u.ev object updated to include 'timing') if the tag should fire. Tealium Collect will pick this up (u.ev.all === true)\n        utag.link(udo);\n    }\n    \n    // listen for page timing events as well (important for GA)\n    if (message.event === &quot;tiq.demo&quot;) {\n        udo = flattenDataLayer(message) // don't add tui.analytics, but do flatten\n        \n        udo = addFromModelIfDefined(udo, 'page.country')  // will be populated often\n        udo = addFromModelIfDefined(udo, 'page.countryX') // will not be populated\n        \n        utag.DB(&quot;Consent link event: &quot; + message.event);\n        // this is a custom event type - tag templates need to be edited (u.ev object updated to include 'timing') if the tag should fire. Tealium Collect will pick this up (u.ev.all === true)\n        utag.link(udo);\n    }\n    \n};\n\n// make sure the object is actually defined\nwindow.dataLayer = window.dataLayer || [];\n\n// attach the listener (and process any historical events on attachment)\nif (typeof processEvent === &quot;function&quot;) {\n    window.tuiDataLayer = new DataLayerHelper(window.dataLayer, {\n      listener: processEvent,\n      listenToPast: true,\n    });\n}\n\n// Helper functions\n\nfunction addPrefixToKeys (obj, prefix) {\n    if (typeof prefix !== 'string' || prefix === '') {\n        return obj\n    }\n    // add a prefix to the old keys to make the difference between the old and new dataLayer is clear\n    var keys = Object.keys(obj)\n    for (var i = 0, key; i &lt; keys.length; i++) {\n        key = keys[i]\n        obj[prefix + key] = obj[key]\n        delete obj[key]\n    }\n    return obj\n}\n\nfunction addFromModelIfDefined(udo, variableName) {\n    // use the helper to check\n    let fetched = window.tuiDataLayer.get(variableName)\n    if (typeof fetched !== 'undefined') {\n        udo[variableName] = fetched\n    }\n    return udo\n}\n\nfunction flattenAndAugmentDataLayer (nestedObject, prefix, disableTuiAnalytics) {\n    \n    if (typeof nestedObject !==  'object') {\n        nestedObject = {}\n    }\n    \n    prefix = prefix || ''\n    \n    var flat = teal.flattenObject(nestedObject);\n    flat = addPrefixToKeys(flat, prefix)\n    \n    if (!disableTuiAnalytics) {\n        var tuiAnalytics = (window.tui &amp;&amp; window.tui.analytics &amp;&amp; window.tui.analytics) || {}\n        tuiAnalytics = teal.flattenObject( [ tuiAnalytics ] )\n        tuiAnalytics = addPrefixToKeys(tuiAnalytics, 'tui.analytics.')\n        utag.ut.merge(flat, tuiAnalytics, 0); // 0 means don't overwrite values in the first with those from the second (but they won't collide anyway of the prefixing)\n    }\n\n    /* // disable this for now, it's realllllyyyyy long and barely used\n    var jsonData = window.jsonData || {}\n    jsonData = teal.flattenObject( [ jsonData ] )\n    jsonData = addPrefixToKeys(jsonData, 'jsonData.')\n    utag.ut.merge(flat, jsonData, 0); // 0 means don't overwrite values in the first with those from the second (but they won't collide anyway of the prefixing)\n    */\n    \n    return flat\n}\n\nfunction flattenDataLayer (nestedObject, prefix) {\n    return flattenAndAugmentDataLayer(nestedObject, prefix, true)\n}"},"6754af9632a2745e85c293e5aac0863370d9bd3330b9938c00cadfd215227d77":{"name":"prod","code":"/**\n * Scope       : DOM Ready (run once)\n * Execution   : n/a\n * Condition   : n/a\n * Description : GTM Listener - Attach listener function using the DataLayer Helper\n */\n\n// define listener function, will be called for each element in the dataLayer array\nvar processEvent = function(model, message) {\n    // exit if the flattener function isn't present on the page\n    if (!teal || typeof teal.flattenObject !== &quot;function&quot;) {\n        return;\n    }\n    \n    var udo\n    // utag.view on dom ready (will be queued if too early)\n    // processes the 'model', built by the helper based on all past events on the page\n    if (message.event === &quot;tiq.load&quot;) {\n        //console.log(teal.flattenObject(message, message));\n        udo = flattenAndAugmentDataLayer(model)\n        utag.DB(&quot;View / &quot; + message.event, udo);\n        utag.view(udo);\n    }\n    \n    // listen for page timing events as well (important for GA)\n    if (message.event === &quot;tiq.page_timing&quot;) {\n        udo = flattenAndAugmentDataLayer(model);\n        utag.DB(&quot;Custom / timing&quot;, udo);\n        // this is a custom event type - tag templates need to be edited (u.ev object updated to include 'timing') if the tag should fire. Tealium Collect will pick this up (u.ev.all === true)\n        utag.track('timing', udo);\n    }\n    \n    // consent events\n    if (message.event === &quot;tiq.cm_manage_preferences&quot; || message.event === &quot;tiq.cm_save_preferences&quot; || message.event === &quot;tiq.cm_manage_preferences_relaunched&quot;) {\n        udo = flattenAndAugmentDataLayer(message)\n        utag.DB(&quot;Consent link event: &quot; + message.event);\n        // this is a custom event type - tag templates need to be edited (u.ev object updated to include 'timing') if the tag should fire. Tealium Collect will pick this up (u.ev.all === true)\n        utag.link(udo);\n    }\n    \n    // listen for page timing events as well (important for GA)\n    if (message.event === &quot;tiq.demo&quot;) {\n        udo = flattenDataLayer(message) // don't add tui.analytics, but do flatten\n        \n        udo = addFromModelIfDefined(udo, 'page.country')  // will be populated often\n        udo = addFromModelIfDefined(udo, 'page.countryX') // will not be populated\n        \n        utag.DB(&quot;Consent link event: &quot; + message.event);\n        // this is a custom event type - tag templates need to be edited (u.ev object updated to include 'timing') if the tag should fire. Tealium Collect will pick this up (u.ev.all === true)\n        utag.link(udo);\n    }\n    \n};\n\n// make sure the object is actually defined\nwindow.dataLayer = window.dataLayer || [];\n\n// attach the listener (and process any historical events on attachment)\nif (typeof processEvent === &quot;function&quot;) {\n    window.tuiDataLayer = new DataLayerHelper(window.dataLayer, {\n      listener: processEvent,\n      listenToPast: true,\n    });\n}\n\n// Helper functions\n\nfunction addPrefixToKeys (obj, prefix) {\n    if (typeof prefix !== 'string' || prefix === '') {\n        return obj\n    }\n    // add a prefix to the old keys to make the difference between the old and new dataLayer is clear\n    var keys = Object.keys(obj)\n    for (var i = 0, key; i &lt; keys.length; i++) {\n        key = keys[i]\n        obj[prefix + key] = obj[key]\n        delete obj[key]\n    }\n    return obj\n}\n\nfunction addFromModelIfDefined(udo, variableName) {\n    // use the helper to check\n    let fetched = window.tuiDataLayer.get(variableName)\n    if (typeof fetched !== 'undefined') {\n        udo[variableName] = fetched\n    }\n    return udo\n}\n\nfunction flattenAndAugmentDataLayer (nestedObject, prefix, disableTuiAnalytics) {\n    \n    if (typeof nestedObject !==  'object') {\n        nestedObject = {}\n    }\n    \n    prefix = prefix || ''\n    \n    var flat = teal.flattenObject(nestedObject);\n    flat = addPrefixToKeys(flat, prefix)\n    \n    if (!disableTuiAnalytics) {\n        var tuiAnalytics = (window.tui &amp;&amp; window.tui.analytics &amp;&amp; window.tui.analytics) || {}\n        tuiAnalytics = teal.flattenObject( [ tuiAnalytics ] )\n        tuiAnalytics = addPrefixToKeys(tuiAnalytics, 'tui.analytics.')\n        utag.ut.merge(flat, tuiAnalytics, 0); // 0 means don't overwrite values in the first with those from the second (but they won't collide anyway of the prefixing)\n    }\n\n    /* // disable this for now, it's realllllyyyyy long and barely used\n    var jsonData = window.jsonData || {}\n    jsonData = teal.flattenObject( [ jsonData ] )\n    jsonData = addPrefixToKeys(jsonData, 'jsonData.')\n    utag.ut.merge(flat, jsonData, 0); // 0 means don't overwrite values in the first with those from the second (but they won't collide anyway of the prefixing)\n    */\n    \n    return flat\n}\n\nfunction flattenDataLayer (nestedObject, prefix) {\n    return flattenAndAugmentDataLayer(nestedObject, prefix, true)\n}","promotedBy":"caleb.jaquith@tealium.com","promotedTimestamp":"202101151252","promotedDraftName":"CURRENT"},"3f3ef786b34d6dd716e1812c8b74a7a0e1f05aa5f3230588f6f5bcd00c6c8392":{"promotedDraftName":"CURRENT","promotedTimestamp":"202104211120","promotedBy":"caleb.jaquith@tealium.com","code":"/**\n * Scope       : DOM Ready (run once)\n * Execution   : n/a\n * Condition   : n/a\n * Description : GTM Listener - Attach listener function using the DataLayer Helper\n */\n\n// define listener function, will be called for each element in the dataLayer array\nvar processEvent = function(model, message) {\n    // exit if the flattener function isn't present on the page\n    if (!teal || typeof teal.flattenObject !== &quot;function&quot;) {\n        return;\n    }\n    \n    var udo\n    // utag.view on dom ready (will be queued if too early)\n    // processes the 'model', built by the helper based on all past events on the page\n    if (message.event === &quot;tiq.load&quot;) {\n        //console.log(teal.flattenObject(message, message));\n        udo = flattenAndAugmentDataLayer(model)\n        utag.DB(&quot;View / &quot; + message.event, udo);\n        utag.view(udo);\n    }\n    \n    // custom event 'dom_ready' on dom ready (will be queued if too early)\n    // processes the 'model', built by the helper based on all past events on the page\n    if (message.event === &quot;tiq.dom&quot;) {\n        //console.log(teal.flattenObject(message, message));\n        udo = flattenAndAugmentDataLayer(model)\n        utag.DB(&quot;DOM / &quot; + message.event, udo);\n        // this is a custom event type - tag templates need to be edited (u.ev object updated to include 'timing') if the tag should fire. Tealium Collect will pick this up (u.ev.all === true)\n        utag.track('dom_ready', udo);\n    }\n    \n    // listen for page timing events as well (important for GA)\n    if (message.event === &quot;tiq.page_timing&quot;) {\n        udo = flattenAndAugmentDataLayer(model);\n        utag.DB(&quot;Custom / timing&quot;, udo);\n        // this is a custom event type - tag templates need to be edited (u.ev object updated to include 'timing') if the tag should fire. Tealium Collect will pick this up (u.ev.all === true)\n        utag.track('timing', udo);\n    }\n    \n    // consent events\n    if (message.event === &quot;tiq.cm_manage_preferences&quot; || message.event === &quot;tiq.cm_save_preferences&quot; || message.event === &quot;tiq.cm_manage_preferences_relaunched&quot;) {\n        udo = flattenAndAugmentDataLayer(message)\n        utag.DB(&quot;Consent link event: &quot; + message.event);\n        // this is a custom event type - tag templates need to be edited (u.ev object updated to include 'timing') if the tag should fire. Tealium Collect will pick this up (u.ev.all === true)\n        utag.link(udo);\n    }\n    \n    // listen for page timing events as well (important for GA)\n    if (message.event === &quot;tiq.demo&quot;) {\n        udo = flattenDataLayer(message) // don't add tui.analytics, but do flatten\n        \n        udo = addFromModelIfDefined(udo, 'page.country')  // will be populated often\n        udo = addFromModelIfDefined(udo, 'page.countryX') // will not be populated\n        \n        utag.DB(&quot;Consent link event: &quot; + message.event);\n        // this is a custom event type - tag templates need to be edited (u.ev object updated to include 'timing') if the tag should fire. Tealium Collect will pick this up (u.ev.all === true)\n        utag.link(udo);\n    }\n    \n};\n\n// make sure the object is actually defined\nwindow.dataLayer = window.dataLayer || [];\n\n// attach the listener (and process any historical events on attachment)\nif (typeof processEvent === &quot;function&quot;) {\n    window.tuiDataLayer = new DataLayerHelper(window.dataLayer, {\n      listener: processEvent,\n      listenToPast: true,\n    });\n}\n\n// Helper functions\n\nfunction addPrefixToKeys (obj, prefix) {\n    if (typeof prefix !== 'string' || prefix === '') {\n        return obj\n    }\n    // add a prefix to the old keys to make the difference between the old and new dataLayer is clear\n    var keys = Object.keys(obj)\n    for (var i = 0, key; i &lt; keys.length; i++) {\n        key = keys[i]\n        obj[prefix + key] = obj[key]\n        delete obj[key]\n    }\n    return obj\n}\n\nfunction addFromModelIfDefined(udo, variableName) {\n    // use the helper to check\n    let fetched = window.tuiDataLayer.get(variableName)\n    if (typeof fetched !== 'undefined') {\n        udo[variableName] = fetched\n    }\n    return udo\n}\n\nfunction flattenAndAugmentDataLayer (nestedObject, prefix, disableTuiAnalytics) {\n    \n    if (typeof nestedObject !==  'object') {\n        nestedObject = {}\n    }\n    \n    prefix = prefix || ''\n    \n    var flat = teal.flattenObject(nestedObject);\n    flat = addPrefixToKeys(flat, prefix)\n    \n    if (!disableTuiAnalytics) {\n        var tuiAnalytics = (window.tui &amp;&amp; window.tui.analytics &amp;&amp; window.tui.analytics) || {}\n        tuiAnalytics = teal.flattenObject( [ tuiAnalytics ] )\n        tuiAnalytics = addPrefixToKeys(tuiAnalytics, 'tui.analytics.')\n        utag.ut.merge(flat, tuiAnalytics, 0); // 0 means don't overwrite values in the first with those from the second (but they won't collide anyway of the prefixing)\n    }\n\n    /* // disable this for now, it's realllllyyyyy long and barely used\n    var jsonData = window.jsonData || {}\n    jsonData = teal.flattenObject( [ jsonData ] )\n    jsonData = addPrefixToKeys(jsonData, 'jsonData.')\n    utag.ut.merge(flat, jsonData, 0); // 0 means don't overwrite values in the first with those from the second (but they won't collide anyway of the prefixing)\n    */\n    \n    return flat\n}\n\nfunction flattenDataLayer (nestedObject, prefix) {\n    return flattenAndAugmentDataLayer(nestedObject, prefix, true)\n}","name":"qa"}},"draftSeq":"2","draftSnippets":{"e3cc57e193d6512e6debf0e925febe757e87e85d66150a2f212aa8641940b027":{"updateDate":"202104211114","creationDate":"202011021107","updatedBy":"caleb.jaquith@tealium.com","code":"/**\n * Scope       : DOM Ready (run once)\n * Execution   : n/a\n * Condition   : n/a\n * Description : GTM Listener - Attach listener function using the DataLayer Helper\n */\n\n// define listener function, will be called for each element in the dataLayer array\nvar processEvent = function(model, message) {\n    // exit if the flattener function isn't present on the page\n    if (!teal || typeof teal.flattenObject !== &quot;function&quot;) {\n        return;\n    }\n    \n    var udo\n    // utag.view on dom ready (will be queued if too early)\n    // processes the 'model', built by the helper based on all past events on the page\n    if (message.event === &quot;tiq.load&quot;) {\n        //console.log(teal.flattenObject(message, message));\n        udo = flattenAndAugmentDataLayer(model)\n        utag.DB(&quot;View / &quot; + message.event, udo);\n        utag.view(udo);\n    }\n    \n    // custom event 'dom_ready' on dom ready (will be queued if too early)\n    // processes the 'model', built by the helper based on all past events on the page\n    if (message.event === &quot;tiq.dom&quot;) {\n        //console.log(teal.flattenObject(message, message));\n        udo = flattenAndAugmentDataLayer(model)\n        utag.DB(&quot;DOM / &quot; + message.event, udo);\n        // this is a custom event type - tag templates need to be edited (u.ev object updated to include 'timing') if the tag should fire. Tealium Collect will pick this up (u.ev.all === true)\n        utag.track('dom_ready', udo);\n    }\n    \n    // listen for page timing events as well (important for GA)\n    if (message.event === &quot;tiq.page_timing&quot;) {\n        udo = flattenAndAugmentDataLayer(model);\n        utag.DB(&quot;Custom / timing&quot;, udo);\n        // this is a custom event type - tag templates need to be edited (u.ev object updated to include 'timing') if the tag should fire. Tealium Collect will pick this up (u.ev.all === true)\n        utag.track('timing', udo);\n    }\n    \n    // consent events\n    if (message.event === &quot;tiq.cm_manage_preferences&quot; || message.event === &quot;tiq.cm_save_preferences&quot; || message.event === &quot;tiq.cm_manage_preferences_relaunched&quot;) {\n        udo = flattenAndAugmentDataLayer(message)\n        utag.DB(&quot;Consent link event: &quot; + message.event);\n        // this is a custom event type - tag templates need to be edited (u.ev object updated to include 'timing') if the tag should fire. Tealium Collect will pick this up (u.ev.all === true)\n        utag.link(udo);\n    }\n    \n    // listen for page timing events as well (important for GA)\n    if (message.event === &quot;tiq.demo&quot;) {\n        udo = flattenDataLayer(message) // don't add tui.analytics, but do flatten\n        \n        udo = addFromModelIfDefined(udo, 'page.country')  // will be populated often\n        udo = addFromModelIfDefined(udo, 'page.countryX') // will not be populated\n        \n        utag.DB(&quot;Consent link event: &quot; + message.event);\n        // this is a custom event type - tag templates need to be edited (u.ev object updated to include 'timing') if the tag should fire. Tealium Collect will pick this up (u.ev.all === true)\n        utag.link(udo);\n    }\n    \n};\n\n// make sure the object is actually defined\nwindow.dataLayer = window.dataLayer || [];\n\n// attach the listener (and process any historical events on attachment)\nif (typeof processEvent === &quot;function&quot;) {\n    window.tuiDataLayer = new DataLayerHelper(window.dataLayer, {\n      listener: processEvent,\n      listenToPast: true,\n    });\n}\n\n// Helper functions\n\nfunction addPrefixToKeys (obj, prefix) {\n    if (typeof prefix !== 'string' || prefix === '') {\n        return obj\n    }\n    // add a prefix to the old keys to make the difference between the old and new dataLayer is clear\n    var keys = Object.keys(obj)\n    for (var i = 0, key; i &lt; keys.length; i++) {\n        key = keys[i]\n        obj[prefix + key] = obj[key]\n        delete obj[key]\n    }\n    return obj\n}\n\nfunction addFromModelIfDefined(udo, variableName) {\n    // use the helper to check\n    let fetched = window.tuiDataLayer.get(variableName)\n    if (typeof fetched !== 'undefined') {\n        udo[variableName] = fetched\n    }\n    return udo\n}\n\nfunction flattenAndAugmentDataLayer (nestedObject, prefix, disableTuiAnalytics) {\n    \n    if (typeof nestedObject !==  'object') {\n        nestedObject = {}\n    }\n    \n    prefix = prefix || ''\n    \n    var flat = teal.flattenObject(nestedObject);\n    flat = addPrefixToKeys(flat, prefix)\n    \n    if (!disableTuiAnalytics) {\n        var tuiAnalytics = (window.tui &amp;&amp; window.tui.analytics &amp;&amp; window.tui.analytics) || {}\n        tuiAnalytics = teal.flattenObject( [ tuiAnalytics ] )\n        tuiAnalytics = addPrefixToKeys(tuiAnalytics, 'tui.analytics.')\n        utag.ut.merge(flat, tuiAnalytics, 0); // 0 means don't overwrite values in the first with those from the second (but they won't collide anyway of the prefixing)\n    }\n\n    /* // disable this for now, it's realllllyyyyy long and barely used\n    var jsonData = window.jsonData || {}\n    jsonData = teal.flattenObject( [ jsonData ] )\n    jsonData = addPrefixToKeys(jsonData, 'jsonData.')\n    utag.ut.merge(flat, jsonData, 0); // 0 means don't overwrite values in the first with those from the second (but they won't collide anyway of the prefixing)\n    */\n    \n    return flat\n}\n\nfunction flattenDataLayer (nestedObject, prefix) {\n    return flattenAndAugmentDataLayer(nestedObject, prefix, true)\n}","name":"CURRENT"},"75cc13d02a66aa6f80881105a69e0f5cdfd4c51ac9370674b1a4d99f5fd70737":{"updateDate":"202011021108","creationDate":"202011021108","updatedBy":"caleb.jaquith@tealium.com","code":"/**\n * Scope       : DOM Ready\n * Execution   : n/a\n * Condition   : n/a\n * Description : GTM Listener - Add listener function using the DataLayer Helper\n * Notes       : Both new and legacy objects need to be converted for the current migration. NEW: window.dataLayer, Legacy: window.tui.analytics\n */\n\nvar flatNew = {},\n    flatLegacy = {},\n    flatMerged = {};\n\n// flattening legacy object before the model process, to be merged with new DL\n// using prefix as test for now to differentiate and avoid overrides when merging data for same keys with differing values\nif (window.tui.analytics) {\n    teal.prefix = 'legacy_';\n    flatLegacy = teal.flattenObject(window.tui.analytics);\n}\n\n// optional tbd\nvar triggerLegacyOrBackup = function() {\n    return Object.keys(flatLegacy).length &gt; 0 ? utag.view(flatLegacy) : console.log('***** Tealium view did not trigger, no page data available!', utag.data);\n};\n\n// start processing the model event\nvar processEvent = function(model, message) {\n    // exit if the flattener function isn't present on the page\n    if (!teal || typeof teal.flattenObject !== 'function') {\n        return;\n    }\n\n    teal.prefix = 'new_';\n    // utag.view on gtm.load to help see dataLayer for now\n    if (message.event === 'gtm.load') {\n        flatNew = teal.flattenObject(model, model);\n        flatMerged = Object.assign(flatNew, flatLegacy);\n        \n        console.log('***** initializing VIEW from GTM listener!');\n        utag.view(flatMerged);\n        utag.data = flatMerged;\n\n    } else {\n        // decide if view should trigger when no event data\n        // triggerLegacyOrBackup();\n    }\n    \n    // some click events as examples\n    if (message.event === 'buttonClick' || message.event === 'GAevent') {\n        flatNew = teal.flattenObject(model, model);\n        flatMerged = Object.assign(flatNew, flatLegacy);\n        \n        console.log('***** initializing LINK from GTM listener!');\n        utag.link(flatMerged);\n        utag.data = flatMerged;\n    }\n};\n\n\nwindow.dataLayer = window.dataLayer|| [];\n// using helper for new data only\nif (typeof processEvent === 'function') {\n    var helper = new DataLayerHelper(window.dataLayer, processEvent, true);\n}","name":"_Draft 1"}},"queueSeq":"46"},"advExecOption":"alr","status":"active","scope":"domready","constructor":"","id":"100040","title":"GTM Listener (4/5) - Data Layer Listener Function"},"14":{"_id":"14","extType":"Javascript Code","publish_revisions":{"last_modified":"202104211136","svr_save_timestamps":{"prod":"202101271235","dev":"202104211136","qa":"202104211136"}},"scopevars":"","notes":"We need to do it like this instead of listening for the pageData event because the pageData event is sometimes missing (on older pages), but we still want to fire a pageview.\n\nWe also want to be able to push events into this array for debugging purposes, since we need the listener anyway it seems best to use it all the time.","sort":"8","selectedTargets":{"prod":"true","dev":"true","qa":"true"},"publishedTargets":"dev","type":"new","status":"active","scope":"domready","constructor":"","advExecOption":"alr","code":"pageDefinitelyLoaded()\n\n// wait until DOM is completely loaded, including images and scripts\n// in case the document is already rendered\nif (document.readyState==='complete') hasLoaded();\n// modern browsers\nelse if (window.addEventListener) window.addEventListener('load', hasLoaded);\n// IE &lt;= 8\nelse document.attachEvent('onreadystatechange', function(){\n    if (document.readyState==='complete') hasLoaded();\n});\n\nvar counter = 0\nvar maxAttempts = 10\nvar delayBetween = 800\nfunction pageDefinitelyLoaded() {\n    counter++\n    function checkForPerformanceTimingInfo () {\n      if (counter &gt; maxAttempts) return true\n      if (window.performance &amp;&amp; performance.timing &amp;&amp; performance.timing.loadEventEnd &amp;&amp; performance.timing.navigationStart) {\n        return true\n        // return parseInt(returnVal, 10) &gt; 0 ? (parseFloat(returnVal) / 1000).toString() : undefined;\n      }\n      return false;\n    }\n    \n    function fireEvent (payload) {\n        window.dataLayer = window.dataLayer || [];\n        payload = payload || {}\n        payload.event = 'tiq.page_timing';\n        window.dataLayer.push(payload);\n    }\n    \n    if (checkForPerformanceTimingInfo() === true) {\n        fireEvent({'timing_check' : window.performance &amp;&amp; performance.timing &amp;&amp; performance.timing.loadEventEnd &amp;&amp; performance.timing.navigationStart })\n    } else {\n        window.setTimeout(pageDefinitelyLoaded, delayBetween)\n    }\n}\n\n\nfunction hasLoaded() {\n   window.dataLayer = window.dataLayer || [];\n   var event = {};\n   event.event = 'tiq.load';\n   window.dataLayer.push(event);\n   domReady(); // make sure that the dataLayer is already available for this push\n}\n\n// not needed for now\nfunction domReady() {\n   window.dataLayer = window.dataLayer || [];\n   var event = {}\n   event.event = 'tiq.dom'\n   window.dataLayer.push(event)\n}\n","initialize":"","labels":"1","_ignoreError":"false","title":"GTM Listener (5/5) - Add 'tiq.load' and 'tiq.dom' pushes to dataLayer ","id":"100036"},"16":{"type":"new","_id":"16","extType":"Javascript Code","publish_revisions":{"svr_save_timestamps":{"qa":"202104211136","dev":"202104211136","prod":"202101271235"},"last_modified":"202104211136"},"notes":"","scopevars":"","sort":"1","selectedTargets":{"dev":"true","prod":"true","qa":"true"},"_ignoreError":"false","title":"ENSIGHTEN PORT - check for issue reproducibility","id":"100036","status":"inactive","scope":"preload","constructor":"","advExecOption":"alr","code":"      window.dataLayer = window.dataLayer || [];\n      dataLayer.push = function() {\n        var b = this\n          , a = arguments\n          , f = Array.prototype.push;\n        f.apply(b, a)\n      }","labels":"","initialize":""},"17":{"_id":"17","extType":"Advanced Javascript Code","publish_revisions":{"last_modified":"202104211136","svr_save_timestamps":{"dev":"202104211136","prod":"202101271235","qa":"202104211136"}},"notes":"","sort":"12","selectedTargets":{"qa":"true","prod":"true","dev":"true"},"blockPubTargetsLogic":"true","publishedTargets":"dev","type":"new","status":"active","constructor":"","scope":"2,6,5","advExecOption":"alr","labels":"","codeDevData":{"draftSnippets":{"156e808776455eb7fb3231a67b22d1d38ab0ed941db5b8d157735eea6c9da88b":{"name":"Draft 1","code":"/*\n  Scope:       Adobe Analytics (Tag Scope)\n\n  Description: Fire u.addEvent for each event listed in b.linkTrackEvents to avoid needing to do that manually in\n               a second extension each time.\n*/\nvar linkTrackEvents = u.data.linkTrackEvents || b.linkTrackEvents\nif (typeof linkTrackEvents === 'string') {\n    var events = linkTrackEvents.split(',')\n    for (var i = 0, match; i &lt; events.length; i++) {\n        if (typeof events[i] === 'string' &amp;&amp; events[i].trim() !== '' &amp;&amp; events[i].trim() !== 'None') {\n          u.addEvent(events[i].trim());\n        }\n    }\n}\n","updatedBy":"caleb.jaquith@tealium.com","creationDate":"202101131216","updateDate":"202101151155"}},"queueSeq":"4","draftSeq":"1","promotedSnippets":{"ef260e9aa3c673af240d17a2660480361a8e081d1ffeca2a5ed0e3219fc18567":{"code":"/*\n  Scope:       Adobe Analytics (Tag Scope)\n\n  Description: Fire u.addEvent for each event listed in b.linkTrackEvents to avoid needing to do that manually in\n               a second extension each time.\n*/\nvar linkTrackEvents = u.data.linkTrackEvents || b.linkTrackEvents\nif (typeof linkTrackEvents === 'string') {\n    var events = linkTrackEvents.split(',')\n    for (var i = 0, match; i &lt; events.length; i++) {\n        if (typeof events[i] === 'string' &amp;&amp; events[i].trim() !== '' &amp;&amp; events[i].trim() !== 'None') {\n          u.addEvent(events[i].trim());\n        }\n    }\n}\n","name":"dev","promotedDraftName":"Draft 1","promotedTimestamp":"202101151252","promotedBy":"caleb.jaquith@tealium.com"},"3f3ef786b34d6dd716e1812c8b74a7a0e1f05aa5f3230588f6f5bcd00c6c8392":{"promotedBy":"caleb.jaquith@tealium.com","promotedTimestamp":"202101151252","promotedDraftName":"Draft 1","name":"qa","code":"/*\n  Scope:       Adobe Analytics (Tag Scope)\n\n  Description: Fire u.addEvent for each event listed in b.linkTrackEvents to avoid needing to do that manually in\n               a second extension each time.\n*/\nvar linkTrackEvents = u.data.linkTrackEvents || b.linkTrackEvents\nif (typeof linkTrackEvents === 'string') {\n    var events = linkTrackEvents.split(',')\n    for (var i = 0, match; i &lt; events.length; i++) {\n        if (typeof events[i] === 'string' &amp;&amp; events[i].trim() !== '' &amp;&amp; events[i].trim() !== 'None') {\n          u.addEvent(events[i].trim());\n        }\n    }\n}\n"},"6754af9632a2745e85c293e5aac0863370d9bd3330b9938c00cadfd215227d77":{"promotedBy":"caleb.jaquith@tealium.com","promotedDraftName":"Draft 1","promotedTimestamp":"202101151252","name":"prod","code":"/*\n  Scope:       Adobe Analytics (Tag Scope)\n\n  Description: Fire u.addEvent for each event listed in b.linkTrackEvents to avoid needing to do that manually in\n               a second extension each time.\n*/\nvar linkTrackEvents = u.data.linkTrackEvents || b.linkTrackEvents\nif (typeof linkTrackEvents === 'string') {\n    var events = linkTrackEvents.split(',')\n    for (var i = 0, match; i &lt; events.length; i++) {\n        if (typeof events[i] === 'string' &amp;&amp; events[i].trim() !== '' &amp;&amp; events[i].trim() !== 'None') {\n          u.addEvent(events[i].trim());\n        }\n    }\n}\n"}}},"initialize":"","title":"Fire u.addEvent as needed for specific events","id":"100040"},"18":{"labels":"","initialize":"","codeDevData":{"promotedSnippets":{"ef260e9aa3c673af240d17a2660480361a8e081d1ffeca2a5ed0e3219fc18567":{"promotedDraftName":"Draft 1","promotedTimestamp":"202101151322","promotedBy":"caleb.jaquith@tealium.com","code":"u.addEvent('event500')\nu.addEvent('event501')\nu.addEvent('event502')","name":"dev"},"6754af9632a2745e85c293e5aac0863370d9bd3330b9938c00cadfd215227d77":{"code":"u.addEvent('event500')\nu.addEvent('event501')\nu.addEvent('event502')","name":"prod","promotedTimestamp":"202101151322","promotedDraftName":"Draft 1","promotedBy":"caleb.jaquith@tealium.com"},"3f3ef786b34d6dd716e1812c8b74a7a0e1f05aa5f3230588f6f5bcd00c6c8392":{"name":"qa","code":"u.addEvent('event500')\nu.addEvent('event501')\nu.addEvent('event502')","promotedBy":"caleb.jaquith@tealium.com","promotedTimestamp":"202101151322","promotedDraftName":"Draft 1"}},"draftSeq":"1","draftSnippets":{"156e808776455eb7fb3231a67b22d1d38ab0ed941db5b8d157735eea6c9da88b":{"updateDate":"202101131221","creationDate":"202101131221","updatedBy":"caleb.jaquith@tealium.com","code":"u.addEvent('event500')\nu.addEvent('event501')\nu.addEvent('event502')","name":"Draft 1"}},"queueSeq":"3"},"advExecOption":"alr","status":"active","constructor":"","scope":"6","id":"100040","title":"Add some test events","selectedTargets":{"qa":"true","dev":"true","prod":"true"},"notes":"","sort":"11","publish_revisions":{"last_modified":"202104211136","svr_save_timestamps":{"prod":"202101271235","dev":"202104211136","qa":"202104211136"}},"_id":"18","extType":"Advanced Javascript Code","type":"new","publishedTargets":"dev","blockPubTargetsLogic":"true"},"21":{"extType":"Set Data Values","_id":"21","publish_revisions":{"last_modified":"202104211136","svr_save_timestamps":{"qa":"202104211136","dev":"202104211136","prod":"202101271235"}},"sort":"10","notes":"","161071267953800040_setoption":"var","161071507961500139_settotext":"","selectedTargets":{"prod":"true","dev":"true","qa":"true"},"publishedTargets":"dev","161071267953800040_settovar":"js.mapToAdobeLinkTrackEvents","type":"new","scope":"2,5","constructor":"","status":"active","advExecOption":"alr","161071507961500139_settovar":"js.mapToAdobeLinkTrackVars","161071507961500139_set":"js.adobeLinkTrackVars","labels":"","initialize":"","161071267953800040_settotext":"","161071267953800040_set":"js.adobeLinkTrackEvents","title":"Intermediate mappings to test ","161071507961500139_setoption":"var","id":"100003"},"23":{"title":"TUI UK Plugin staging","id":"100040","initialize":"","codeDevData":{"queueSeq":"2","draftSnippets":{"156e808776455eb7fb3231a67b22d1d38ab0ed941db5b8d157735eea6c9da88b":{"creationDate":"202101191100","updateDate":"202101191101","updatedBy":"caleb.jaquith@tealium.com","code":"// Performance Timing Events\ns.pte = 'event980,event981,event982,event983,event984,event985,event986,event987,event988,event989,event990,event1000';\n//[--------------------------- 1 to 8 ---------------------------][-- 9 --][- 10 -]\ns.ptc = false;\n\ns.usePlugins=true;\nfunction s_doPlugins(s) {\n\n    // Sets server\n\ts.server = document.location.host;\n\t\n\ts.events = (function ensightenAdobeEventLogic(existingEventString) {\n        s.events = existingEventString || ''\n        \n        var bookingReference = (window.tui &amp;&amp; tui.analytics &amp;&amp; tui.analytics.page &amp;&amp; tui.analytics.page.Tracsref ? tui.analytics.page.Tracsref : window.dataLayer &amp;&amp; dataLayer[0] &amp;&amp; dataLayer[0].transactions &amp;&amp; dataLayer[0].transactions.total &amp;&amp; dataLayer[0].transactions.total.transactionId ? dataLayer[0].transactions.total.transactionId : &quot;&quot;),\n        \n        totalPrice = (window.tui &amp;&amp; tui.analytics &amp;&amp; tui.analytics.page &amp;&amp; tui.analytics.page.Sum ? parseFloat(tui.analytics.page.Sum) : window.dataLayer &amp;&amp; dataLayer[0] &amp;&amp; dataLayer[0].transactions &amp;&amp; dataLayer[0].transactions.total &amp;&amp; dataLayer[0].transactions.total.totalPrice ? parseFloat(dataLayer[0].transactions.total.totalPrice) : 0),\n        \n        creditNoteDiscountValue = (window.tui &amp;&amp; tui.analytics &amp;&amp; tui.analytics.page &amp;&amp; tui.analytics.page.bookingLevelCreditNoteDiscount &amp;&amp; tui.analytics.page.bookingLevelCreditNoteDiscount != 'null' ? parseFloat(tui.analytics.page.bookingLevelCreditNoteDiscount) : window.dataLayer &amp;&amp; dataLayer[0] &amp;&amp; dataLayer[0].transactions &amp;&amp; dataLayer[0].transactions.total &amp;&amp; dataLayer[0].transactions.total.bookingLevelCreditNoteDiscount ? parseFloat(dataLayer[0].transactions.total.bookingLevelCreditNoteDiscount) : 0),\n        \n        creditNoteRefundValue = (window.tui &amp;&amp; tui.analytics &amp;&amp; tui.analytics.page &amp;&amp; tui.analytics.page.creditNoteRefundValue &amp;&amp; tui.analytics.page.creditNoteRefundValue != 'null' ? parseFloat(tui.analytics.page.creditNoteRefundValue) : window.dataLayer &amp;&amp; dataLayer[0] &amp;&amp; dataLayer[0].transactions &amp;&amp; dataLayer[0].transactions.total &amp;&amp; dataLayer[0].transactions.total.creditNoteRefundValue ? parseFloat(dataLayer[0].transactions.total.creditNoteRefundValue) : 0),\n        \n        onlineDiscount = (window.tui &amp;&amp; tui.analytics &amp;&amp; tui.analytics.page &amp;&amp; tui.analytics.page &amp;&amp; tui.analytics.page.Disc &amp;&amp; tui.analytics.page.Disc != 'null' ? parseFloat(tui.analytics.page.Disc) : window.dataLayer &amp;&amp; dataLayer[0] &amp;&amp; dataLayer[0].transactions &amp;&amp; dataLayer[0].transactions.total &amp;&amp; dataLayer[0].transactions.total.discount ? parseFloat(dataLayer[0].transactions.total.discount) : 0),\n        \n        bookingPax = (window.tui &amp;&amp; tui.analytics &amp;&amp; tui.analytics.page &amp;&amp; tui.analytics.page &amp;&amp; tui.analytics.page.Pax &amp;&amp; tui.analytics.page.Pax != 'null' ? parseInt(tui.analytics.page.Pax) : window.dataLayer &amp;&amp; dataLayer[0] &amp;&amp; dataLayer[0].transactions &amp;&amp; dataLayer[0].transactions.items &amp;&amp; dataLayer[0].transactions.items.quantity &amp;&amp; dataLayer[0].transactions.items.quantity.pax ? parseInt(dataLayer[0].transactions.items.quantity.pax) : 0),\n        \n        incentivePromoValue = incentivePromoDiscount();\n        \n        function incentivePromoDiscount() {\n        \n        if (window.dataLayer &amp;&amp; dataLayer[0] &amp;&amp; dataLayer[0].transactions &amp;&amp; dataLayer[0].transactions.total &amp;&amp; dataLayer[0].transactions.total.bookingLevelPromoCodes &amp;&amp; dataLayer[0].transactions.total.bookingLevelPromoCodes.length &gt; 0) {\n          var rgx = new RegExp('/CVRHC|CVRW20|CVRS21|CVRI|CVRM|CVRV/i', 'i');\n          var promoCodeArray = dataLayer[0].transactions.total.bookingLevelPromoCodes;\n          var result = 0;\n          for (i = 0; i &lt; promoCodeArray.length; i++) {\n            if (rgx.test(promoCodeArray[i].bookingLevelPromoCode)) {\n              result = promoCodeArray[i].bookingLevelPromoDiscount;\n            }\n          }\n          return result;\n        } else if (window.tui &amp;&amp; tui.analytics &amp;&amp; tui.analytics.page &amp;&amp; tui.analytics.page.IncentivePromoValue &amp;&amp; tui.analytics.page.IncentivePromoValue != 'null') {\n          return parseFloat(tui.analytics.page.IncentivePromoValue);\n        } else {\n          return 0;\n        }\n        }\n        \n        //Normal Bookflow &amp; LYP with same confirmation url\n        if ((document.URL.indexOf('/book/confirmation') !== -1 || document.URL.indexOf('/book/mobile/confirmation') !== -1 || document.URL.indexOf('/book/bookingConfirmation') !== -1) &amp;&amp; bookingReference &amp;&amp; typeof bookingReference === &quot;string&quot; &amp;&amp; bookingReference.length &gt; 5) {\n        if ((window.dataLayer &amp;&amp; dataLayer[0] &amp;&amp; dataLayer[0].transactions &amp;&amp; dataLayer[0].transactions.total &amp;&amp; dataLayer[0].transactions.total.isLockYourPrice == &quot;Yes&quot;) || (window.dataLayer &amp;&amp; dataLayer[0] &amp;&amp; dataLayer[0].page &amp;&amp; dataLayer[0].page.pageID == &quot;lockYourPriceConfirmationpage_react&quot;)) {\n          s.events = &quot;event78:&quot; + bookingReference + &quot;LYP&quot; // event serialisation with event78 (LYP Unconfirmed Booking)\n            +\n            &quot;,event80=&quot; + window.dataLayer[0].transactions.total.lockYourPriceValue + &quot;:&quot; + bookingReference + &quot;LYP&quot; + &quot;,event81=&quot; + totalPrice + &quot;:&quot; + bookingReference + &quot;LYP&quot;;\n        } else {\n          s.events = &quot;purchase&quot; + &quot;,event4=&quot; + (creditNoteDiscountValue &gt; 0 ? totalPrice + creditNoteDiscountValue : totalPrice) + &quot;,event5=&quot; + onlineDiscount + &quot;,event9=&quot; + bookingPax + &quot;,event150,event151,event152,event153,event154,event158,event159&quot; //added 158&amp;159 for PC Incentive \n            +\n            &quot;,event155=&quot; + creditNoteDiscountValue // Added for credit note launch\n            +\n            &quot;,event156=&quot; + creditNoteRefundValue // Added for credit note launch\n            +\n            &quot;,event157=&quot; + (creditNoteDiscountValue &gt; 0 ? totalPrice : 0) // Addded for credit note launch\n            +\n            &quot;,event160=&quot; + (creditNoteDiscountValue &gt; 0 ? totalPrice + creditNoteDiscountValue + incentivePromoValue : totalPrice); // multiple promocode - maintaining redemption code reporting\n        }\n        }\n        \n        //LYP mmb Bookflow (managemybooking/paymentconfirmation is the MMB confirmation page)\n        else if ((document.URL.indexOf('/managemybooking/paymentconfirmation') !== -1) &amp;&amp; window.dataLayer[0] &amp;&amp; dataLayer[0].transactions &amp;&amp; dataLayer[0].transactions.total &amp;&amp; bookingReference &amp;&amp; typeof bookingReference === &quot;string&quot; &amp;&amp; bookingReference.length &gt; 5 &amp;&amp; dataLayer[0].transactions.total.isLockYourPrice == &quot;Yes&quot;) {\n        s.events = &quot;purchase&quot; + &quot;,event4=&quot; + (creditNoteDiscountValue &gt; 0 ? totalPrice + creditNoteDiscountValue : totalPrice) + &quot;,event5=&quot; + onlineDiscount + &quot;,event9=&quot; + bookingPax + &quot;,event79&quot; // Lock Your Price confirmed booking\n          +\n          &quot;,event80=&quot; + (window.dataLayer[0].transactions.total.lockYourPriceValue * -1) + &quot;,event150,event151,event152,event153,event154,event158,event159&quot;; //added 158&amp;159 for PC Incentive\n        }\n        \n        //MMB Unpaid\n        else if (document.URL.indexOf('your-account/managemybooking/amendmentsuccess') !== -1 &amp;&amp; typeof window.tui.analytics.events != 'undefined' &amp;&amp; window.tui.analytics.events !== null) {\n        for (var i = 0; i &lt; window.tui.analytics.events.length; i++) {\n          if (window.tui.analytics.events[i].eventAction == 'MMB Unpaid') {\n            s.events = &quot;event301:&quot; + window.tui.analytics.events[i].eventSerialisationNumber;\n            /*\n            if(window.tui &amp;&amp; tui.analytics &amp;&amp; tui.analytics.page &amp;&amp; tui.analytics.page.bookingLevelPromoCode &amp;&amp; tui.analytics.page.bookingLevelPromoDiscount){\n               if(tui.analytics.page.bookingLevelPromoCode == 'CVRM'|| tui.analytics.page.bookingLevelPromoCode == 'CVRHC'){\n                s.events = s.apl(s.events,'event154=' + tui.analytics.page.bookingLevelPromoDiscount ,',',1);\n               }\n            }*/\n        \n            // Start\n            var dl = window.dataLayer\n            if (dl &amp;&amp; dl[0] &amp;&amp; dl[0].transactions &amp;&amp; dl[0].transactions.total) {\n              // If old object is shown - can be removed at a later date\n              if (dl[0].transactions.total.bookingLevelPromoDiscount &amp;&amp; typeof dl[0].transactions.total.bookingLevelPromoDiscount !== 'undefined') {\n                // Check for PC &amp; MMB/Booking Incentive\n                if (/CVRHC|CVRW20|CVRS21|CVRI|CVRM|CVRV/i.test(dl[0].transactions.total.bookingLevelPromoCode)) {\n                  // Programme Change Incentive\n                  if (/CVRHC|CVRW20|CVRS21/i.test(dl[0].transactions.total.bookingLevelPromoCode)) {\n                    s.events = s.apl(s.events, 'event158=' + Math.abs(dl[0].transactions.total.bookingLevelPromoDiscount), ',', 1);\n                  }\n                  // MMB/Booking Incentive\n                  if (/CVRI|CVRM|CVRV/i.test(dl[0].transactions.total.bookingLevelPromoCode)) {\n                    s.events = s.apl(s.events, 'event159=' + Math.abs(dl[0].transactions.total.bookingLevelPromoDiscount), ',', 1);\n                  }\n                } else {\n                  s.events = s.apl(s.events, 'event154=' + Math.abs(dl[0].transactions.total.bookingLevelPromoDiscount), ',', 1);\n                }\n                // Added to handle new promo code array\n              } else if (dl[0].transactions.total.bookingLevelPromoCodes &amp;&amp; dl[0].transactions.total.bookingLevelPromoCodes.length &gt; 0) {\n                var promoCodeArray = dl[0].transactions.total.bookingLevelPromoCodes;\n                for (i = 0; i &lt; promoCodeArray.length; i++) {\n        \n                  if (/CVRHC|CVRW20|CVRS21|CVRI|CVRM|CVRV/i.test(promoCodeArray[i].bookingLevelPromoCode)) {\n                    // Programme Change Incentive\n                    if (/CVRHC|CVRW20|CVRS21/i.test(promoCodeArray[i].bookingLevelPromoCode)) {\n                      s.events = s.apl(s.events, 'event158=' + Math.abs(promoCodeArray[i].bookingLevelPromoDiscount), ',', 1);\n                    }\n                    // MMB/Booking Incentive\n                    if (/CVRI|CVRM|CVRV/i.test(promoCodeArray[i].bookingLevelPromoCode)) {\n                      s.events = s.apl(s.events, 'event159=' + Math.abs(promoCodeArray[i].bookingLevelPromoDiscount), ',', 1);\n                    }\n                  } else {\n                    s.events = s.apl(s.events, 'event154=' + Math.abs(promoCodeArray[i].bookingLevelPromoDiscount), ',', 1);\n                  }\n                }\n              }\n              // For legacy data layer (only single promo code &amp; value)\t\n            } else if (window.tui &amp;&amp; tui.analytics &amp;&amp; tui.analytics.page) {\n              if (typeof tui.analytics.page.PromoValue !== 'undefined' &amp;&amp; tui.analytics.page.PromoValue !== 'null') {\n                if (/CVRHC|CVRW20|CVRS21/i.test(tui.analytics.page.PromoCode)) {\n                  s.events = s.apl(s.events, 'event158' + parseFloat(tui.analytics.page.PromoValue), ',', 1);\n                } else if (/CVRI|CVRM|CVRV/i.test(tui.analytics.page.PromoCode)) {\n                  s.events = s.apl(s.events, 'event159' + parseFloat(tui.analytics.page.PromoValue), ',', 1);\n                } else {\n                  s.events = s.apl(s.events, 'event154' + parseFloat(tui.analytics.page.PromoValue), ',', 1);\n                }\n              }\n            } //End\n          }\n        }\n        }\n        \n        //MMB Paid\n        else if (document.URL.indexOf('your-account/managemybooking/managepaymentconfirmation') !== -1 &amp;&amp; typeof window.tui.analytics.events != 'undefined' &amp;&amp; window.tui.analytics.events !== null) {\n        for (var i = 0; i &lt; window.tui.analytics.events.length; i++) {\n          if (window.tui.analytics.events[i].eventAction == 'MMB Paid') {\n            s.events = &quot;event302:&quot; + window.tui.analytics.events[i].eventSerialisationNumber;\n            /*\n            if(window.tui &amp;&amp; tui.analytics &amp;&amp; tui.analytics.page &amp;&amp; tui.analytics.page.bookingLevelPromoCode &amp;&amp; tui.analytics.page.bookingLevelPromoDiscount){\n               if(tui.analytics.page.bookingLevelPromoCode == 'CVRM'|| tui.analytics.page.bookingLevelPromoCode == 'CVRHC'){\n                s.events = s.apl(s.events,'event154=' + tui.analytics.page.bookingLevelPromoDiscount ,',',1);\n               }\n            }*/\n        \n            // Start\n            var dl = window.dataLayer\n            if (dl &amp;&amp; dl[0] &amp;&amp; dl[0].transactions &amp;&amp; dl[0].transactions.total) {\n              // If old object is shown - can be removed at a later date\n              if (dl[0].transactions.total.bookingLevelPromoDiscount &amp;&amp; typeof dl[0].transactions.total.bookingLevelPromoDiscount !== 'undefined') {\n                // Check for PC &amp; MMB/Booking Incentive\n                if (/CVRHC|CVRW20|CVRS21|CVRI|CVRM|CVRV/i.test(dl[0].transactions.total.bookingLevelPromoCode)) {\n                  // Programme Change Incentive\n                  if (/CVRHC|CVRW20|CVRS21/i.test(dl[0].transactions.total.bookingLevelPromoCode)) {\n                    s.events = s.apl(s.events, 'event158=' + Math.abs(dl[0].transactions.total.bookingLevelPromoDiscount), ',', 1);\n                  }\n                  // MMB/Booking Incentive\n                  if (/CVRI|CVRM|CVRV/i.test(dl[0].transactions.total.bookingLevelPromoCode)) {\n                    s.events = s.apl(s.events, 'event159=' + Math.abs(dl[0].transactions.total.bookingLevelPromoDiscount), ',', 1);\n                  }\n                } else {\n                  s.events = s.apl(s.events, 'event154=' + Math.abs(dl[0].transactions.total.bookingLevelPromoDiscount), ',', 1);\n                }\n                // Added to handle new promo code array\n              } else if (dl[0].transactions.total.bookingLevelPromoCodes &amp;&amp; dl[0].transactions.total.bookingLevelPromoCodes.length &gt; 0) {\n                var promoCodeArray = dl[0].transactions.total.bookingLevelPromoCodes\n                for (i = 0; i &lt; promoCodeArray.length; i++) {\n        \n                  if (/CVRHC|CVRW20|CVRS21|CVRI|CVRM|CVRV/i.test(promoCodeArray[i].bookingLevelPromoCode)) {\n                    // Programme Change Incentive\n                    if (/CVRHC|CVRW20|CVRS21/i.test(promoCodeArray[i].bookingLevelPromoCode)) {\n                      s.events = s.apl(s.events, 'event158=' + Math.abs(promoCodeArray[i].bookingLevelPromoDiscount), ',', 1);\n                    }\n                    // MMB/Booking Incentive\n                    if (/CVRI|CVRM|CVRV/i.test(promoCodeArray[i].bookingLevelPromoCode)) {\n                      s.events = s.apl(s.events, 'event159=' + Math.abs(promoCodeArray[i].bookingLevelPromoDiscount), ',', 1);\n                    }\n                  } else {\n                    s.events = s.apl(s.events, 'event154=' + Math.abs(promoCodeArray[i].bookingLevelPromoDiscount), ',', 1);\n                  }\n                }\n              }\n              // For legacy data layer (only single promo code &amp; value)\t\n            } else if (window.tui &amp;&amp; tui.analytics &amp;&amp; tui.analytics.page) {\n              if (typeof tui.analytics.page.PromoValue !== 'undefined' &amp;&amp; tui.analytics.page.PromoValue !== 'null') {\n                if (/CVRHC|CVRW20|CVRS21/i.test(tui.analytics.page.PromoCode)) {\n                  s.events = s.apl(s.events, 'event158' + parseFloat(tui.analytics.page.PromoValue), ',', 1);\n                } else if (/CVRI|CVRM|CVRV/i.test(tui.analytics.page.PromoCode)) {\n                  s.events = s.apl(s.events, 'event159' + parseFloat(tui.analytics.page.PromoValue), ',', 1);\n                } else {\n                  s.events = s.apl(s.events, 'event154' + parseFloat(tui.analytics.page.PromoValue), ',', 1);\n                }\n              }\n            } //End\n          }\n        }\n        }\n        \n        //MMB Cancel\n        else if (document.URL.indexOf('your-account/managemybooking/cancelbooking') !== -1 &amp;&amp; typeof window.tui.analytics.events != 'undefined' &amp;&amp; window.tui.analytics.events !== null) {\n        for (var i = 0; i &lt; window.tui.analytics.events.length; i++) {\n          if (window.tui.analytics.events[i].eventAction == 'MMB Cancel') {\n            s.events = &quot;event303:&quot; + window.tui.analytics.events[i].eventSerialisationNumber;\n          }\n        }\n        }\n        \n        //Price Variation Alert\n        else if (document.URL.indexOf('/book/flow/summary') !== -1 || document.URL.indexOf('/book/passengerdetails') !== -1 || document.URL.indexOf('/cps/pageRender') !== -1) {\n        var priceStatus = document.querySelectorAll('.PriceVariationAlert__infoTextHeading');\n        var price = document.querySelectorAll('.alertprice');\n        if (priceStatus.length &gt; 0 &amp;&amp; priceStatus[0].innerText.includes(&quot;INCREASED&quot;)) {\n          s.events = &quot;event47,event48=&quot; + price[0].innerText.replace(/[]/g, '');\n        } else if (priceStatus.length &gt; 0 &amp;&amp; priceStatus[0].innerText.includes(&quot;DECREASED&quot;)) {\n          s.events = &quot;event47,event48=&quot; + -price[0].innerText.replace(/[]/g, '');\n        }\n        }\n        \n        // Credit Note Booking\n        if ((document.URL.indexOf('/book/confirmation') !== -1 || document.URL.indexOf('/book/mobile/confirmation') !== -1 || document.URL.indexOf('/book/bookingConfirmation') !== -1) &amp;&amp; bookingReference &amp;&amp; typeof bookingReference === &quot;string&quot; &amp;&amp; bookingReference.length &gt; 5) {\n        // var creditNoteBooking = Bootstrapper._SC.dataHandler(arguments, &quot;62528&quot;);\n        var creditNoteBooking = b.legacy_isCreditNoteBooking || ''\n        if (creditNoteBooking.toLowerCase() == &quot;yes&quot;) {\n          s.events = s.apl(s.events, 'event70', ',', 1);\n        }\n        }\n        \n        \n        // Performance Timing Replacement\n        /*\n        var pt = (Bootstrapper.PTE &amp;&amp; Bootstrapper.PTE.performanceTimings &amp;&amp; Bootstrapper.PTE.performanceTimings.get ? Bootstrapper.PTE.performanceTimings.get() : '');\n        \n        if (pt) {\n            pt = pt.split('|');\n            s.events = s.apl(s.events,'event980=' + pt[0],',',1);\n            s.events = s.apl(s.events,'event981=' + pt[1],',',1);\n            s.events = s.apl(s.events,'event982=' + pt[2],',',1);\n            s.events = s.apl(s.events,'event983=' + pt[3],',',1);\n            s.events = s.apl(s.events,'event984=' + pt[4],',',1);\n            s.events = s.apl(s.events,'event985=' + pt[5],',',1);\n            s.events = s.apl(s.events,'event986=' + pt[6],',',1);\n            s.events = s.apl(s.events,'event987=' + pt[7],',',1);\n            s.events = s.apl(s.events,'event988=' + pt[8],',',1);\n            \n            if (pt[9] &gt; 0) {\n                s.events = s.apl(s.events,'event989=' + pt[9],',',1);\n            }\n            if (pt[10] &gt; 0) {\n            s.events = s.apl(s.events,'event990=' + pt[10],',',1);\n            }\n            s.events = s.apl(s.events,'event1000',',',1);\n        }\n        */\n        \n        // Bookflow Events\n        // Search\n        if (document.URL.indexOf('/destinations/packages') != -1 || document.URL.indexOf('/flight/search') != -1 || document.URL.indexOf('/cruise/packages') != -1 || document.URL.indexOf('/holiday/packages') != -1 || document.URL.indexOf('/f/packages') != -1 || document.URL.indexOf('/river-cruises/packages') != -1 || document.URL.indexOf('/retail/packages') != -1) {\n        s.events = s.apl(s.events, &quot;event1&quot;, &quot;,&quot;, 1);\n        }\n        \n        // Product View &amp; Custom Product View\n        if (document.URL.indexOf('/bookaccommodation') != -1 || document.URL.indexOf('/flight/book/flightoptions') != -1 || document.URL.indexOf('/flight/book/mobile/flightoptions') != -1 || document.URL.indexOf('/cruise/bookitineraries') != -1) {\n        s.events = s.apl(s.events, &quot;event11,prodView&quot;, &quot;,&quot;, 1);\n        }\n        \n        // Beach Bookflow Events\n        if (document.URL.indexOf('bookaccommodation') != -1) {\n        s.events = s.apl(s.events, &quot;event15&quot;, &quot;,&quot;, 1);\n        } else if (document.URL.indexOf('/book/mobile/hubsummary') != -1) {\n        s.events = s.apl(s.events, &quot;event16&quot;, &quot;,&quot;, 1);\n        } else if (document.URL.indexOf('/destinations/book/flightoptions') != -1 || document.URL.indexOf('/destinations/book/mobile/flightoptions') != -1 || document.URL.indexOf('/destinations/book/flow/flightoptions') != -1 || document.URL.indexOf('/holiday/book/flightoptions') != -1 || document.URL.indexOf('/holiday/book/mobile/flightoptions') != -1 || document.URL.indexOf('/holiday/book/flow/flightoptions') != -1 || document.URL.indexOf('/f/book/flightoptions') != -1 || document.URL.indexOf('/f/book/flow/flightoptions') != -1 || document.URL.indexOf('/f/book/mobile/flightoptions') != -1 || document.URL.indexOf('/retail/book/flow/flightoptions') != -1) {\n        s.events = s.apl(s.events, &quot;event17,scView,scOpen,scAdd&quot;, &quot;,&quot;, 1);\n        } else if (document.URL.indexOf('/destinations/book/roomoptions') != -1 || document.URL.indexOf('/destinations/book/mobile/roomoptions') != -1 || document.URL.indexOf('/destinations/book/flow/roomoptions') != -1 || document.URL.indexOf('/holiday/book/roomoptions') != -1 || document.URL.indexOf('/holiday/book/mobile/roomoptions') != -1 || document.URL.indexOf('/holiday/book/flow/roomoptions') != -1 || document.URL.indexOf('/f/book/roomoptions') != -1 || document.URL.indexOf('/f/book/flow/roomoptions') != -1 || document.URL.indexOf('/f/book/mobile/roomoptions') != -1 || document.URL.indexOf('/retail/book/flow/roomoptions') != -1) {\n        s.events = s.apl(s.events, &quot;event18&quot;, &quot;,&quot;, 1);\n        } else if (document.URL.indexOf('/destinations/book/extraoptions') != -1 || document.URL.indexOf('/destinations/book/mobile/extraoptions') != -1 || document.URL.indexOf('/destinations/book/flow/extraoptions') != -1 || document.URL.indexOf('/holiday/book/extraoptions') != -1 || document.URL.indexOf('/holiday/book/mobile/extraoptions') != -1 || document.URL.indexOf('/holiday/book/flow/extraoptions') != -1 || document.URL.indexOf('/f/book/extraoptions') != -1 || document.URL.indexOf('/f/book/flow/extraoptions') != -1 || document.URL.indexOf('/f/book/mobile/extraoptions') != -1 || document.URL.indexOf('/retail/book/flow/extraoptions') != -1) {\n        s.events = s.apl(s.events, &quot;event19&quot;, &quot;,&quot;, 1);\n        } else if (document.URL.indexOf('/destinations/book/passengerdetails') != -1 || document.URL.indexOf('/destinations/book/mobile/passengerdetails') != -1 || document.URL.indexOf('/holiday/book/passengerdetails') != -1 || document.URL.indexOf('/holiday/book/mobile/passengerdetails') != -1 || document.URL.indexOf('/f/book/passengerdetails') != -1 || document.URL.indexOf('/f/book/mobile/passengerdetails') != -1 || document.URL.indexOf('/retail/book/passengerdetails') != -1) {\n        s.events = s.apl(s.events, &quot;event20,scCheckout&quot;, &quot;,&quot;, 1);\n        } else if (document.URL.indexOf('/cps/pageRender') != -1 &amp;&amp; (s.Util.getQueryParam('b').indexOf('25000') != -1 || s.Util.getQueryParam('b').indexOf('32000') != -1 || s.Util.getQueryParam('b').indexOf('50000') != -1 || s.Util.getQueryParam('b').indexOf('19000') != -1 || s.Util.getQueryParam('b').indexOf('41000') != -1 || s.Util.getQueryParam('b').indexOf('31000') != -1 || s.Util.getQueryParam('b').indexOf('10000') != -1 || s.Util.getQueryParam('b').indexOf('20000') != -1 || s.Util.getQueryParam('b').indexOf('42000') != -1 || s.Util.getQueryParam('b').indexOf('51000') != -1 || s.Util.getQueryParam('b').indexOf('52000') != -1 || s.Util.getQueryParam('b').indexOf('53000') != -1 || s.Util.getQueryParam('b').indexOf('38000') != -1)) {\n        s.events = s.apl(s.events, &quot;event21&quot;, &quot;,&quot;, 1);\n        } else if (document.URL.indexOf('/destinations/book/confirmation') != -1 || document.URL.indexOf('/destinations/book/mobile/confirmation') != -1 || document.URL.indexOf('/holiday/book/confirmation') != -1 || document.URL.indexOf('/holiday/book/mobile/confirmation') != -1 || document.URL.indexOf('/f/book/confirmation') != -1 || document.URL.indexOf('/f/book/mobile/confirmation') != -1 || document.URL.indexOf('/managemybooking/paymentconfirmation') != -1 || document.URL.indexOf('/retail/book/bookingConfirmation') != -1 || document.URL.indexOf('/retail/f/book/bookingConfirmation') != -1) {\n        if (window.tui.analytics.page.pageUid != 'lockYourPriceConfirmationpage_react' || dataLayer[0].page.pageID != 'lockYourPriceConfirmationpage_react') {\n          s.events = s.apl(s.events, &quot;event22&quot;, &quot;,&quot;, 1);\n        }\n        }\n        \n        // Cruise Bookflow Events\t\n        /*else if (document.URL.indexOf('/cruise/bookitineraries') != -1) {\n        s.events = s.apl(s.events, &quot;event23&quot;, &quot;,&quot;, 1);\n        }*/ else if (document.URL.indexOf('/cruise/packages/hotels') != -1) {\n        s.events = s.apl(s.events, &quot;event24&quot;, &quot;,&quot;, 1);\n        } else if (document.URL.indexOf('/cruise/bookHotelDetails') != -1) {\n        s.events = s.apl(s.events, &quot;event25&quot;, &quot;,&quot;, 1);\n        } else if (document.URL.indexOf('/cruise/book/cruiseoptions') != -1 || document.URL.indexOf('/cruise/book/flow/cruiseoptions') != -1) {\n        s.events = s.apl(s.events, &quot;event26,scView,scOpen,scAdd&quot;, &quot;,&quot;, 1);\n        } else if (document.URL.indexOf('/cruise/book/flightoptions') != -1 || document.URL.indexOf('/cruise/book/flow/flightoptions') != -1) {\n        s.events = s.apl(s.events, &quot;event27&quot;, &quot;,&quot;, 1);\n        } else if (document.URL.indexOf('/cruise/book/roomoptions') != -1 || document.URL.indexOf('/cruise/book/flow/roomoptions') != -1) {\n        s.events = s.apl(s.events, &quot;event28&quot;, &quot;,&quot;, 1);\n        } else if (document.URL.indexOf('/cruise/book/extraoptions') != -1 || document.URL.indexOf('/cruise/book/flow/extraoptions') != -1) {\n        s.events = s.apl(s.events, &quot;event29&quot;, &quot;,&quot;, 1);\n        } else if (document.URL.indexOf('/cruise/book/passengerdetails') != -1) {\n        s.events = s.apl(s.events, &quot;event30,scCheckout&quot;, &quot;,&quot;, 1);\n        } else if (document.URL.indexOf('/cps/pageRender') != -1 &amp;&amp; (s.Util.getQueryParam('b').indexOf('37000') != -1 || s.Util.getQueryParam('b').indexOf('54000') != -1 || s.Util.getQueryParam('b').indexOf('49000') != -1)) {\n        s.events = s.apl(s.events, &quot;event31&quot;, &quot;,&quot;, 1);\n        } else if (document.URL.indexOf('/cruise/book/confirmation') != -1 || document.URL.indexOf('/retail/cruise/book/bookingConfirmation') != -1 || document.URL.indexOf('/retail/f/cruise/book/bookingConfirmation') != -1) {\n        s.events = s.apl(s.events, &quot;event32&quot;, &quot;,&quot;, 1);\n        }\n        \n        \n        // Flight Only Bookflow Events\t\t\n        else if (document.URL.indexOf('/flight/book/flightoptions') != -1 || document.URL.indexOf('/flight/book/mobile/flightoptions') != -1) {\n        s.events = s.apl(s.events, &quot;event33,scView,scOpen,scAdd&quot;, &quot;,&quot;, 1);\n        } else if (document.URL.indexOf('/flight/book/extraoptions') != -1 || document.URL.indexOf('/flight/book/mobile/extraoptions') != -1) {\n        s.events = s.apl(s.events, &quot;event34&quot;, &quot;,&quot;, 1);\n        } else if (document.URL.indexOf('/flight/book/passengerdetails') != -1 || document.URL.indexOf('/flight/book/mobile/passengerdetails') != -1) {\n        s.events = s.apl(s.events, &quot;event35,scCheckout&quot;, &quot;,&quot;, 1);\n        } else if (document.URL.indexOf('/cps/pageRender') != -1 &amp;&amp; (s.Util.getQueryParam('b').indexOf('39000') != -1 || s.Util.getQueryParam('b').indexOf('47000') != -1 || s.Util.getQueryParam('b').indexOf('40000') != -1 || s.Util.getQueryParam('b').indexOf('48000') != -1 || s.Util.getQueryParam('b').indexOf('59000') != -1 || s.Util.getQueryParam('b').indexOf('60000') != -1)) {\n        s.events = s.apl(s.events, &quot;event36&quot;, &quot;,&quot;, 1);\n        } else if (document.URL.indexOf('/flight/book/confirmation') != -1 || document.URL.indexOf('/flight/book/mobile/confirmation') != -1 || document.URL.indexOf('/retail/flight/book/bookingConfirmation') != -1 || document.URL.indexOf('/retail/f/flight/book/bookingConfirmation') != -1) {\n        s.events = s.apl(s.events, &quot;event37&quot;, &quot;,&quot;, 1);\n        }\n        \n        \n        // This is for event 8 (Pax) (legacy_numberOfPax)\n        // MOVED to mapping\n        /*\n        if (window.tui &amp;&amp; tui.analytics &amp;&amp; tui.analytics.page &amp;&amp; tui.analytics.page.Pax) {\n        s.events = s.apl(s.events, &quot;event8=&quot; + tui.analytics.page.Pax, &quot;,&quot;, 1);\n        } else if (window.dataLayer &amp;&amp; dataLayer[0] &amp;&amp; dataLayer[0].transactions &amp;&amp; dataLayer[0].transactions.total &amp;&amp; dataLayer[0].transactions.total.paxDetails &amp;&amp; dataLayer[0].transactions.total.paxDetails.total) {\n        s.events = s.apl(s.events, &quot;event8=&quot; + dataLayer[0].transactions.total.paxDetails.total, &quot;,&quot;, 1);\n        } else if (window.dataLayer &amp;&amp; dataLayer[0] &amp;&amp; dataLayer[0].basket &amp;&amp; dataLayer[0].basket.price &amp;&amp; dataLayer[0].basket.price.paxDetails &amp;&amp; dataLayer[0].basket.price.paxDetails.total) {\n        s.events = s.apl(s.events, &quot;event8=&quot; + dataLayer[0].basket.price.paxDetails.total, &quot;,&quot;, 1);\n        } else if (window.dataLayer &amp;&amp; dataLayer[0] &amp;&amp; dataLayer[0].product &amp;&amp; dataLayer[0].product.noOfPax) {\n        s.events = s.apl(s.events, &quot;event8=&quot; + dataLayer[0].product.noOfPax, &quot;,&quot;, 1);\n        } else if (window.dataLayer &amp;&amp; dataLayer[0] &amp;&amp; dataLayer[0].page &amp;&amp; dataLayer[0].page.search &amp;&amp; dataLayer[0].page.search.noOfPax) {\n        s.events = s.apl(s.events, &quot;event8=&quot; + dataLayer[0].page.search.noOfPax, &quot;,&quot;, 1);\n        }\n        */\n        \n        // This is for event 10 (Discount) (legacy_onlineDiscount)\n        // MOVED to mapping\n        /*\n        if (window.tui &amp;&amp; tui.analytics &amp;&amp; tui.analytics.page &amp;&amp; tui.analytics.page.Disc) {\n        s.events = s.apl(s.events, &quot;event10=&quot; + tui.analytics.page.Disc, &quot;,&quot;, 1);\n        } else if (window.dataLayer &amp;&amp; dataLayer[0] &amp;&amp; dataLayer[0].transactions &amp;&amp; dataLayer[0].transactions.total &amp;&amp; dataLayer[0].transactions.total.discount) {\n        s.events = s.apl(s.events, &quot;event10=&quot; + Math.round(dataLayer[0].transactions.total.discount).toString(), &quot;,&quot;, 1);\n        } else if (window.dataLayer &amp;&amp; dataLayer[0] &amp;&amp; dataLayer[0].basket &amp;&amp; dataLayer[0].basket.price &amp;&amp; dataLayer[0].basket.price.discount) {\n        s.events = s.apl(s.events, &quot;event10=&quot; + Math.round(dataLayer[0].basket.price.discount).toString(), &quot;,&quot;, 1);\n        } else if (window.dataLayer &amp;&amp; dataLayer[0] &amp;&amp; dataLayer[0].product &amp;&amp; dataLayer[0].product.discount) {\n        s.events = s.apl(s.events, &quot;event10=&quot; + Math.round(dataLayer[0].product.discount).toString(), &quot;,&quot;, 1);\n        } else if (window.jsonData &amp;&amp; jsonData.packageViewData &amp;&amp; jsonData.packageViewData.onlineDiscount) {\n        s.events = s.apl(s.events, &quot;event10=&quot; + Math.round(jsonData.packageViewData.onlineDiscount).toString(), &quot;,&quot;, 1);\n        }\n        */\n        \n        \n        // This is for event 38 (Revenue) \n        \n        if (window.tui &amp;&amp; tui.analytics &amp;&amp; tui.analytics.page &amp;&amp; tui.analytics.page.Sum) {\n        if (window.tui.analytics.page.bookingLevelCreditNoteDiscount &amp;&amp; (parseFloat(tui.analytics.page.bookingLevelCreditNoteDiscount) &gt; 0)) {\n          s.events = s.apl(s.events, &quot;event38=&quot; + (parseFloat(tui.analytics.page.Sum) + parseFloat(tui.analytics.page.bookingLevelCreditNoteDiscount)), &quot;,&quot;, 1);\n        } else {\n          s.events = s.events = s.apl(s.events, &quot;event38=&quot; + tui.analytics.page.Sum, &quot;,&quot;, 1);\n        }\n        } else if (window.dataLayer &amp;&amp; dataLayer[0] &amp;&amp; dataLayer[0].transactions &amp;&amp; dataLayer[0].transactions.total &amp;&amp; dataLayer[0].transactions.total.totalPrice) {\n        if (window.dataLayer[0].transactions.total.bookingLevelCreditNoteDiscount &amp;&amp; dataLayer[0].transactions.total.bookingLevelCreditNoteDiscount &gt; 0) {\n          s.events = s.apl(s.events, &quot;event38=&quot; + (dataLayer[0].transactions.total.totalPrice + dataLayer[0].transactions.total.bookingLevelCreditNoteDiscount), &quot;,&quot;, 1);\n        } else {\n          s.events = s.apl(s.events, &quot;event38=&quot; + dataLayer[0].transactions.total.totalPrice, &quot;,&quot;, 1);\n        }\n        } else if (window.dataLayer &amp;&amp; dataLayer[0] &amp;&amp; dataLayer[0].basket &amp;&amp; dataLayer[0].basket.price &amp;&amp; dataLayer[0].basket.price.totalPrice) {\n        if (window.dataLayer[0].basket.price.bookingLevelCreditNoteDiscount &amp;&amp; dataLayer[0].basket.price.bookingLevelCreditNoteDiscount &gt; 0) {\n          s.events = s.apl(s.events, &quot;event38=&quot; + (dataLayer[0].basket.price.totalPrice + dataLayer[0].basket.price.bookingLevelCreditNoteDiscount), &quot;,&quot;, 1);\n        } else {\n          s.events = s.apl(s.events, &quot;event38=&quot; + dataLayer[0].basket.price.totalPrice, &quot;,&quot;, 1);\n        }\n        } else if (window.dataLayer &amp;&amp; dataLayer[0] &amp;&amp; dataLayer[0].product &amp;&amp; dataLayer[0].product.currentPrice) {\n        s.events = s.apl(s.events, &quot;event38=&quot; + dataLayer[0].product.currentPrice, &quot;,&quot;, 1);\n        }\n        \n        // For Privacy\n        /* // moved, since this logic isn't relevant post-migration\n        try {\n        var privacyExperience = Bootstrapper.Cookies.get('TUI_ENSIGHTEN_PRIVACY_Experience');\n        if (privacyExperience !== 'C') {\n          if (window.gateway &amp;&amp; window.gateway.isInitialized &amp;&amp; String(Bootstrapper.gateway.getCookie('BANNER_VIEWED')) !== '1') {\n            s.events = s.apl(s.events, 'event107', ',', 1);\n          }\n        }\n        } catch (err) {\n        console.log('Ensighten:event107 not set');\n        }\n        */\n        \n        return s.events;\n        })(s.events)\n\t\n\t// Custom pageview event\n\ts.events = s.apl(s.events,&quot;event3&quot;,&quot;,&quot;,1);\n\t\n    // Time parting used for eVar 31 and 32\n\ttpA = s.getTimeParting('n','0');\n\ttpAh = tpA[1].split(':')[0];\n\tif(tpA[1].indexOf('PM')!=-1)\n\t{\n\t\tif(eval(tpAh) != 12)\n\t\ttpAh = eval(tpAh) + 12;\n\t}\n\tif (tpA[1].indexOf(&quot;AM&quot;) != -1) \n\tif (eval(tpAh) == 12) tpAh = &quot;0&quot;;\n\ttmAm = tpA[0].split(':')[1];\n\ttmAm = tmAm.replace(/\\D/g, '');\n\t\n\n\t/* Performance Timing Called */\n\ts.performanceTiming();\n    /*    \n    if (s.linkType === 'e') {\n        var pt = (window.Bootstrapper.PTE &amp;&amp; window.Bootstrapper.PTE.performanceTimings &amp;&amp; window.Bootstrapper.PTE.performanceTimings.get ? window.Bootstrapper.PTE.performanceTimings.get(true) : ''),\n            timingEvents = ['980', '981', '982', '983', '984', '985', '986', '987', '988', '989', '990'];\n\n        if (pt) {\n            pt = pt.split('|');\n            s.linkTrackVars = s.apl(s.linkTrackVars, 'events', ',', 1);\n\n            for (var i = 0; i &lt; pt.length; i++) {\n                if ((i &lt; 9) || pt[i] &gt; 0) {\n                    s.events = s.apl(s.events, 'event' + timingEvents[i] + '=' + pt[i], ',', 1);\n                    s.linkTrackEvents = s.apl(s.linkTrackEvents, 'event' + timingEvents[i], ',', 1);\n                }\n            }\n            s.events = s.apl(s.events, 'event1000', ',', 1);\n        }\n        else {\n            for (var i = 0; i &lt; timingEvents.length; i++) {\n                var regex = new RegExp('event' + timingEvents[i] + ',?', 'g');\n                s.linkTrackEvents = s.linkTrackEvents.replace(regex, '');\n            }\n        }\n    }\n\t*/\n    /* If GSA Internal search term exists then fire search event*/\n\tif(s.eVar8!==&quot;&quot;){\n        s.events = s.apl(s.events,&quot;event1&quot;,&quot;,&quot;,1);\n\t}\n\n\ts.eVar31 = tpAh;\n\ts.eVar32 = tpA[2];\n\t\n    //Note: IE browsers can be in only visitor's local time\n    s.eVar7 = getTimeParting2(&quot;Europe/London&quot;);\t\n\n    // Prod View event initiates time to complete calculation\n\tif(s.events.indexOf('prodView')&gt;-1)\n        s.eVar34='start';\n\n    // Purchase event finishes time to complete calculation \n\tif(s.events.indexOf('purchase')&gt;-1)\n        s.eVar34='stop';\n\n    // Time To Complete Checkout\n\ts.eVar34 = s.getTimeToComplete(s.eVar34,'ttc',0);\n\n    // New or Repeat\n\ts.eVar35 = s.getNewRepeat();\n\n    // Days Since Last Visit\n\ts.eVar36 = s.getDaysSinceLastVisit('s_lv');\n\n    // Page URL\n\t//.prop38 = s.eVar38 = document.location.host + document.location.pathname;\n\t\n\t// Previous Page URL eVar\n\ts.eVar159 = s.getPreviousValue(s.eVar38,'gpv_pn');\n\t\n\t// Previous Page ID eVar\n\ts.eVar160 = s.getPreviousValue(s.eVar45,'gpv_pn2');\n    \n    // Query String eVar\n\tvar url_split = document.URL.split('?')[1];\n\tif(typeof url_split != 'undefined')\n\ts.eVar39 =  url_split;\n\n    // Minute of hour eVar\n\ts.eVar40 = tmAm;\n\n    // User Agent eVar\n\t//s.eVar41 =&quot;D=User-Agent&quot;;\n\n    // Marketing Cloud Visitor ID eVar\n\tif(typeof visitor != 'undefined')\n\ts.eVar44 = visitor.getMarketingCloudVisitorID();\n\n    // Brand\n\t//s.eVar48 = s.prop48 = brand; \n    \n    \n    // Page Depth Tracking - Action Depth Test was previously defined in base code\n    s.ActionDepthTest = true;\n    if (s.ActionDepthTest) {\n      s.eVar75 = s.getActionDepthVisitor(&quot;s_depth&quot;);\n      s.eVar76 = s.getActionDepth('s_depth_visit');\n      s.ActionDepthTest = false;\n    }\n\t\n\t//Time Stamp \n\n\ts.eVar77 = startTime();\n\n}\n\ns.doPlugins=s_doPlugins;\n\n\n  /*\n   * Plugin: getActionDepth v1.0 - Returns the current\n   * page number of the visit\n   */\n  s.getActionDepth = new Function(&quot;c&quot;, &quot;&quot; + &quot;var s=this,v=1,t=new Date;t.setTime(t.getTime()+1800000);&quot; + &quot;if(!s.c_r(c)){v=1}if(s.c_r(c)){v=s.c_r(c);v++}&quot; + &quot;if(!s.c_w(c,v,t)){s.c_w(c,v,0)}return v;&quot;);\n\n  /*\n   * Plugin: getActionDepth v1.0 - Returns the current\n   * page number of the visit\n   */\n  s.getActionDepthVisitor = new Function(&quot;c&quot;, &quot;&quot; + &quot;var s=this,v,t=new Date;t.setFullYear(t.getFullYear()+2);&quot; + &quot;if(!s.c_r(c)){v=1}if(s.c_r(c)){v=s.c_r(c);v++}&quot; + &quot;if(!s.c_w(c,v,t)){s.c_w(c,v,0)}return v;&quot;);\n \n \n// Used for Timestamp eVar\nfunction checkTime(i) {\n    if (i &lt; 10) {\n        i = &quot;0&quot; + i;\n    }\nreturn i;\n}\n\nfunction startTime() {\n    var today = new Date();\n    var h = today.getHours();\n    var m = today.getMinutes();\n    var s = today.getSeconds();\n    // add a zero in front of numbers&lt;10\n    m = checkTime(m);\n    s = checkTime(s);\n    h = checkTime(h);\n\treturn h + &quot;:&quot; + m + &quot;:&quot; + s;\n}\n\n/********************************************************************\n *\n * Main Plug-in code (should be in Plug-ins section)\n *\n *******************************************************************/\n/* Plugin: Performance Timing Tracking - 0.1 BETA */\ns.performanceTiming = function(v){\n    var s=this;\n    if(v) s.ptv=v;\n    if(typeof performance!='undefined'){\n        if(performance.timing.loadEventEnd==0){\n            s.pi=setInterval(function(){s.performanceWrite()},250);\n        }\n        if(!s.ptc||s.linkType=='e'){\n            s.performanceRead();\n        }\n        else{s.rfe();\n        s[s.ptv]='';\n        }\n     }\n};\n\ns.performanceWrite = function(){\n    var s=this;\n    if(performance.timing.loadEventEnd&gt;0)clearInterval(s.pi);\n    try{\n        if(s.c_r('s_ptc')==''&amp;&amp;performance.timing.loadEventEnd&gt;0){\n            try{\n                var pt=performance.timing;\n                var pta='';\n                pta=s.performanceCheck(pt.fetchStart,pt.navigationStart);\n                pta+='^^'+s.performanceCheck(pt.domainLookupStart,pt.fetchStart);\n                pta+='^^'+s.performanceCheck(pt.domainLookupEnd,pt.domainLookupStart);\n                pta+='^^'+s.performanceCheck(pt.connectEnd,pt.connectStart);\n                pta+='^^'+s.performanceCheck(pt.responseStart,pt.connectEnd); \n                pta+='^^'+s.performanceCheck(pt.responseEnd,pt.responseStart);\n                pta+='^^'+s.performanceCheck(pt.loadEventStart,pt.domLoading);\n                pta+='^^'+s.performanceCheck(pt.loadEventEnd,pt.loadEventStart);\n                pta+='^^'+s.performanceCheck(pt.loadEventEnd,pt.navigationStart);\n\t\t\t\tpta+='^^'+s.performanceCheck(performance.getEntriesByType('paint')[0].startTime,0); // Added for First Paint Metric\n\t\t\t\tpta+='^^'+s.performanceCheck(performance.getEntriesByType('paint')[1].startTime,0); // Added for First Contentful Paint Metric\n                s.c_w('s_ptc',pta);\n                    if(sessionStorage&amp;&amp;navigator.cookieEnabled&amp;&amp;s.ptv!='undefined'){\n                        var pe=performance.getEntries();\n                        var tempPe='';\n                        for(var i=0;i&lt;pe.length;i++){\n                            tempPe+='!';tempPe+=pe[i].name.indexOf('?')&gt;-1?pe[i].name.split('?')[0]:pe[i].name;\n                            tempPe+='|'+(Math.round(pe[i].startTime)/1000).toFixed(1)+'|'+(Math.round(pe[i].duration)/1000).toFixed(1)+'|'+pe[i].initiatorType;}\n                            sessionStorage.setItem('s_pec',tempPe);\n                    }\n            }\n            catch(err){\n                return;\n            }\n        }\n    }\n    catch(err){\n        return;\n    }\n};\ns.performanceCheck = function(a,b){\n    if(a&gt;=0&amp;&amp;b&gt;=0){\n        if((a-b)&lt;60000&amp;&amp;((a-b)&gt;=0)){\n            return((a-b)/1000).toFixed(2);\n        }\n        else{\n            return 600;\n        }\n    }\n};\ns.performanceRead = function(){\n    var s=this;\n    if(performance.timing.loadEventEnd&gt;0)clearInterval(s.pi);\n    var cv=s.c_r('s_ptc');\n    if(s.pte){\n        var ela=s.pte.split(',');\n    }\n    if(cv!=''){\n        var cva=s.split(cv,'^^');\n        if(cva[1]!=''){\n            for(var x=0;x&lt;(ela.length-1);x++){\n                s.events=s.apl(s.events,ela[x]+'='+cva[x],',',2);\n            }\n        }\n        s.events=s.apl(s.events,ela[ela.length-1],',',2);\n    }\n    s.linkTrackEvents=s.apl(s.linkTrackEvents,s.pte,',',2);\n    s.c_w('s_ptc','',0);\n    if(sessionStorage&amp;&amp;navigator.cookieEnabled&amp;&amp;s.ptv!='undefined'){\n        s[s.ptv]=sessionStorage.getItem('s_pec');\n        sessionStorage.setItem('s_pec','',0);\n    }\n    else{\n        s[s.ptv]='sessionStorage Unavailable';\n    }\n    s.ptc=true;\n}\n\ns.rfe = function(){\n    var s=this;\n    var ea=s.split(s.events,',');\n    var pta=s.split(s.pte,',');\n    try{\n        for(x in pta){\n            s.events=s.rfl(s.events,pta[x]);\n            s.contextData['events']=s.events;\n        }\n    }\n    catch(e){\n        return;\n    }\n}\n\ns.rfl = function(l,v,d1,d2,ku){\n\tvar s=this,\n\t\tR=new Array(),\n\t\tC='',\n\t\td1=!d1?',':d1,\n\t\td2=!d2?',':d2,\n\t\tku=!ku?0:1;\n\tif(!l)return'';\n\tL=l.split(d1);\n\tfor(i=0;i&lt;L.length;i++){\n\t\tif(L[i].indexOf(':')&gt;-1){ // remove serialisation to get just the event number\n\t\t\tC=L[i].split(':');\n\t\t\tC[1]=C[0]+':'+C[1];\n\t\t\tL[i]=C[0];\n\t\t}\n\t\tif(L[i].indexOf('=')&gt;-1){ // remove numeric event to get just the event number\n\t\t\tC=L[i].split('=');\n\t\t\tC[1]=C[0]+'='+C[1];\n\t\t\tL[i]=C[0];\n\t\t}\n\t\tif(L[i]!=v&amp;&amp;C){ // if it wasn't a duplicate and the variable had extras\n\t\t\tR.push(C[1])\n\t\t}\n\t\telse if(L[i]!=v){ // if it was a duplicate\n\t\t\tR.push(L[i])\n\t\t}\n\t\telse if(L[i]==v&amp;&amp;ku){\n\t\t\tku=0;\n\t\t\tif(C){\n\t\t\t\tR.push(C[1])\n\t\t\t}\n\t\t\telse {\n\t\t\t\tR.push(L[i])\n\t\t\t}\n\t\t}\n\t\tC=''; // clear it back out\n\t}\n\treturn s.join(R,{delim:d2})\n}\n\n\n /* Plugin: Performance Timing Tracking - 0.11 BETA */\n /*\ns.performanceTiming=new Function(&quot;v&quot;,&quot;var s=this;if(v)s.ptv=v;if(typeof performance!='undefined'){if(performance.timing.loadEventEnd==0){s.pi=setInterval(function(){s.performanceWrite()},250);}if(!s.ptc||s.linkType=='e'){s.performanceRead();}else{s.rfe();s[s.ptv]='';}}&quot;);\ns.performanceWrite=new Function(&quot;&quot;,&quot;var s=this;if(performance.timing.loadEventEnd&gt;0)clearInterval(s.pi);try{if(s.c_r('s_ptc')==''&amp;&amp;performance.timing.loadEventEnd&gt;0){try{var pt=performance.timing;var pta='';pta=s.performanceCheck(pt.fetchStart,pt.navigationStart);pta+='^^'+s.performanceCheck(pt.domainLookupStart,pt.fetchStart);pta+='^^'+s.performanceCheck(pt.domainLookupEnd,pt.domainLookupStart);pta+='^^'+s.performanceCheck(pt.connectEnd,pt.connectStart);pta+='^^'+s.performanceCheck(pt.responseStart,pt.connectEnd);pta+='^^'+s.performanceCheck(pt.responseEnd,pt.responseStart);pta+='^^'+s.performanceCheck(pt.loadEventStart,pt.domLoading);pta+='^^'+s.performanceCheck(pt.loadEventEnd,pt.loadEventStart);pta+='^^'+s.performanceCheck(pt.loadEventEnd,pt.navigationStart);pta+='^^'+s.performanceCheck(performance.getEntriesByType('paint')[0].startTime,0);pta+='^^'+s.performanceCheck(performance.getEntriesByType('paint')[1].startTime,0);s.c_w('s_ptc',pta);if(sessionStorage&amp;&amp;navigator.cookieEnabled&amp;&amp;s.ptv!='undefined'){var pe=performance.getEntries();var tempPe='';for(var i=0;i&lt;pe.length;i++){tempPe+='!';tempPe+=pe[i].name.indexOf('?')&gt;-1?pe[i].name.split('?')[0]:pe[i].name;tempPe+='|'+(Math.round(pe[i].startTime)/1000).toFixed(1)+'|'+(Math.round(pe[i].duration)/1000).toFixed(1)+'|'+pe[i].initiatorType;}sessionStorage.setItem('s_pec',tempPe);}}catch(err){return;}}}catch(err){return;}&quot;);\ns.performanceCheck=new Function(&quot;a&quot;,&quot;b&quot;,&quot;if(a&gt;=0&amp;&amp;b&gt;=0){if((a-b)&lt;60000&amp;&amp;((a-b)&gt;=0)){return((a-b)/1000).toFixed(2);}else{return 600;}}&quot;);\ns.performanceRead=new Function(&quot;&quot;,&quot;var s=this;if(performance.timing.loadEventEnd&gt;0)clearInterval(s.pi);var cv=s.c_r('s_ptc');if(s.pte){var ela=s.pte.split(',');}if(cv!=''){var cva=s.split(cv,'^^');if(cva[1]!=''){for(var x=0;x&lt;(ela.length-1);x++){s.events=s.apl(s.events,ela[x]+'='+cva[x],',',2);}}s.events=s.apl(s.events,ela[ela.length-1],',',2);}s.linkTrackEvents=s.apl(s.linkTrackEvents,s.pte,',',2);s.c_w('s_ptc','',0);if(sessionStorage&amp;&amp;navigator.cookieEnabled&amp;&amp;s.ptv!='undefined'){s[s.ptv]=sessionStorage.getItem('s_pec');sessionStorage.setItem('s_pec','',0);}else{s[s.ptv]='sessionStorage Unavailable';}s.ptc=true;&quot;),s.rfe=new Function(&quot;&quot;,&quot;var s=this;var ea=s.split(s.events,',');var pta=s.split(s.pte,',');try{for(x in pta){s.events=s.rfl(s.events,pta[x]);s.contextData['events']=s.events;}}catch(e){return;}&quot;),s.rfl=new Function(&quot;l&quot;,&quot;v&quot;,&quot;d1&quot;,&quot;d2&quot;,&quot;ku&quot;,&quot;var s=this,R=new Array(),C='',d1=!d1?',':d1,d2=!d2?',':d2,ku=!ku?0:1;if(!l)return'';L=l.split(d1);for(i=0;i&lt;L.length;i++){if(L[i].indexOf(':')&gt;-1){C=L[i].split(':');C[1]=C[0]+':'+C[1];L[i]=C[0];}if(L[i].indexOf('=')&gt;-1){C=L[i].split('=');C[1]=C[0]+'='+C[1];L[i]=C[0];}if(L[i]!=v&amp;&amp;C)R.push(C[1]);else if(L[i]!=v)R.push(L[i]);else if(L[i]==v&amp;&amp;ku){ku=0;if(C)R.push(C[1]);else R.push(L[i]);}C='';}return s.join(R,{delim:d2})&quot;);\n*/\n /* s.join: 1.0 - Joins an array into a string\n */\ns.join=new Function(&quot;v&quot;,&quot;p&quot;,&quot;&quot;\n+&quot;var s=this;var f,b,d,w;if(p){f=p.front?p.front:'';b=p.back?p.back:'&quot;\n+&quot;';d=p.delim?p.delim:'';w=p.wrap?p.wrap:'';}var str='';for(var x=0;x&quot;\n+&quot;&lt;v.length;x++){if(typeof(v[x])=='object')str+=s.join(v[x],p);else s&quot;\n+&quot;tr+=w+v[x]+w;if(x&lt;v.length-1)str+=d;}return f+str+b;&quot;);\n \n/********************************************************************\n *\n * Supporting functions that may be shared between plug-ins\n *\n *******************************************************************/\n\n//Europe\ns._tpDST = { \n\t2012:'3/25,10/28', \n\t2013:'3/31,10/27', \n\t2014:'3/30,10/26', \n\t2015:'3/29,10/25', \n\t2016:'3/27,10/30', \n\t2017:'3/26,10/29', \n\t2018:'3/25,10/28', \n\t2019:'3/31,10/27',\n\t2020:'3/29,10/25',\n\t2021:'3/28,10/31'\n};\n\n\n/*\n * Plugin: getPreviousValue_v1.0 - return previous value of designated\n *   variable (requires split utility)\n */\ns.getPreviousValue=new Function(&quot;v&quot;,&quot;c&quot;,&quot;el&quot;,&quot;&quot;\n+&quot;var s=this,t=new Date,i,j,r='';t.setTime(t.getTime()+1800000);if(el&quot;\n+&quot;){if(s.events){i=s.split(el,',');j=s.split(s.events,',');for(x in i&quot;\n+&quot;){for(y in j){if(i[x]==j[y]){if(s.c_r(c)) r=s.c_r(c);v?s.c_w(c,v,t)&quot;\n+&quot;:s.c_w(c,'no value',t);return r}}}}}else{if(s.c_r(c)) r=s.c_r(c);v?&quot;\n+&quot;s.c_w(c,v,t):s.c_w(c,'no value',t);return r}&quot;);\n\n\n/*\n * Plugin: getTimeParting 3.3\n */\ns.getTimeParting=new Function(&quot;h&quot;,&quot;z&quot;,&quot;&quot;\n+&quot;var s=this,od;od=new Date('1/1/2000');if(od.getDay()!=6||od.getMont&quot;\n+&quot;h()!=0){return'Data Not Available';}else{var H,M,D,W,U,ds,de,tm,tt,&quot;\n+&quot;da=['Sunday','Monday','Tuesday','Wednesday','Thursday','Friday','Sa&quot;\n+&quot;turday'],d=new Date(),a=[];z=z?z:0;z=parseFloat(z);if(s._tpDST){var&quot;\n+&quot; dso=s._tpDST[d.getFullYear()].split(/,/);ds=new Date(dso[0]+'/'+d.&quot;\n+&quot;getFullYear());de=new Date(dso[1]+'/'+d.getFullYear());if(h=='n'&amp;&amp;d&quot;\n+&quot;&gt;ds&amp;&amp;d&lt;de){z=z+1;}else if(h=='s'&amp;&amp;(d&gt;de||d&lt;ds)){z=z+1;}}d=d.getTime&quot;\n+&quot;()+(d.getTimezoneOffset()*60000);d=new Date(d+(3600000*z));H=d.getH&quot;\n+&quot;ours();M=d.getMinutes();M=(M&lt;10)?'0'+M:M;D=d.getDay();U='AM';W='Wee&quot;\n+&quot;kday';if(H&gt;=12){U='PM';H=H-12;}if(H==0){H=12;}if(D==6||D==0){W='Wee&quot;\n+&quot;kend';}D=da[D];tm=H+':'+M+U;tt=H+':'+((M&gt;30)?'30':'00')+U;a=[tm,tt,&quot;\n+&quot;D,W];return a;}&quot;);\n\n/* Adobe Consulting Plugin: getTimeParting v6.2 (No Prerequisites Needed) */\n/* Changed name from getTimeParting to getTimeParting2 for parallel testing of v6.2 with v3.3 */\nvar getTimeParting2 = function(a) {\n  a = document.documentMode ? void 0 : a || &quot;Etc/GMT&quot;;\n  a = (new Date).toLocaleDateString(&quot;en-US&quot;, {\n    timeZone: a,\n    minute: &quot;numeric&quot;,\n    hour: &quot;numeric&quot;,\n    weekday: &quot;long&quot;,\n    day: &quot;numeric&quot;,\n    year: &quot;numeric&quot;,\n    month: &quot;long&quot;\n  });\n  a = /([a-zA-Z]+).*?([a-zA-Z]+).*?([0-9]+).*?([0-9]+)(.*?)([0-9])(.*)/.exec(a);\n  return &quot;year=&quot; + a[4] + &quot; | month=&quot; + a[2] + &quot; | date=&quot; + a[3] + &quot; | day=&quot; + a[1] + &quot; | time=&quot; + (a[6] + a[7])\n};\n\n/*\n * Plugin: getNewRepeat 1.2 - Returns whether user is new or repeat\n */\ns.getNewRepeat=new Function(&quot;d&quot;,&quot;cn&quot;,&quot;&quot;\n+&quot;var s=this,e=new Date(),cval,sval,ct=e.getTime();d=d?d:30;cn=cn?cn:&quot;\n+&quot;'s_nr';e.setTime(ct+d*24*60*60*1000);cval=s.c_r(cn);if(cval.length=&quot;\n+&quot;=0){s.c_w(cn,ct+'-New',e);return'New';}sval=s.split(cval,'-');if(ct&quot;\n+&quot;-sval[0]&lt;30*60*1000&amp;&amp;sval[1]=='New'){s.c_w(cn,ct+'-New',e);return'N&quot;\n+&quot;ew';}else{s.c_w(cn,ct+'-Repeat',e);return'Repeat';}&quot;);\n\n/*\n * Utility Function: split v1.5 (JS 1.0 compatible)\n */\ns.split=new Function(&quot;l&quot;,&quot;d&quot;,&quot;&quot;\n+&quot;var i,x=0,a=new Array;while(l){i=l.indexOf(d);i=i&gt;-1?i:l.length;a[x&quot;\n+&quot;++]=l.substring(0,i);l=l.substring(i+d.length);}return a&quot;);\n\n/*\n * Plugin: getValOnce_v1.11\n */\ns.getValOnce=new Function(&quot;v&quot;,&quot;c&quot;,&quot;e&quot;,&quot;t&quot;,&quot;&quot;\n+&quot;var s=this,a=new Date,v=v?v:'',c=c?c:'s_gvo',e=e?e:0,i=t=='m'?6000&quot;\n+&quot;0:86400000,k=s.c_r(c);if(v){a.setTime(a.getTime()+e*i);s.c_w(c,v,e&quot;\n+&quot;==0?0:a);}return v==k?'':v&quot;);\n\n/********************************************************************\n *\n * Main Plug-in code (should be in Plug-ins section)\n *\n *******************************************************************/\n \n/*\n * Plugin: Days since last Visit 1.1.H - capture time from last visit\n */\ns.getDaysSinceLastVisit=new Function(&quot;c&quot;,&quot;&quot;\n+&quot;var s=this,e=new Date(),es=new Date(),cval,cval_s,cval_ss,ct=e.getT&quot;\n+&quot;ime(),day=24*60*60*1000,f1,f2,f3,f4,f5;e.setTime(ct+3*365*day);es.s&quot;\n+&quot;etTime(ct+30*60*1000);f0='Cookies Not Supported';f1='First Visit';f&quot;\n+&quot;2='More than 30 days';f3='More than 7 days';f4='Less than 7 days';f&quot;\n+&quot;5='Less than 1 day';cval=s.c_r(c);if(cval.length==0){s.c_w(c,ct,e);&quot;\n+&quot;s.c_w(c+'_s',f1,es);}else{var d=ct-cval;if(d&gt;30*60*1000){if(d&gt;30*da&quot;\n+&quot;y){s.c_w(c,ct,e);s.c_w(c+'_s',f2,es);}else if(d&lt;30*day+1 &amp;&amp; d&gt;7*day&quot;\n+&quot;){s.c_w(c,ct,e);s.c_w(c+'_s',f3,es);}else if(d&lt;7*day+1 &amp;&amp; d&gt;day){s.&quot;\n+&quot;c_w(c,ct,e);s.c_w(c+'_s',f4,es);}else if(d&lt;day+1){s.c_w(c,ct,e);s.c&quot;\n+&quot;_w(c+'_s',f5,es);}}else{s.c_w(c,ct,e);cval_ss=s.c_r(c+'_s');s.c_w(c&quot;\n+&quot;+'_s',cval_ss,es);}}cval_s=s.c_r(c+'_s');if(cval_s.length==0) retur&quot;\n+&quot;n f0;else if(cval_s!=f1&amp;&amp;cval_s!=f2&amp;&amp;cval_s!=f3&amp;&amp;cval_s!=f4&amp;&amp;cval_s&quot;\n+&quot;!=f5) return '';else return cval_s;&quot;);\n\n/********************************************************************\n *\n * Main Plug-in code (should be in Plug-ins section)\n *\n *******************************************************************/\n/*\n * Plugin: getTimeToComplete 0.4 - return the time from start to stop\n */\ns.getTimeToComplete=new Function(&quot;v&quot;,&quot;cn&quot;,&quot;e&quot;,&quot;&quot;\n+&quot;var s=this,d=new Date,x=d,k;if(!s.ttcr){e=e?e:0;if(v=='start'||v=='&quot;\n+&quot;stop')s.ttcr=1;x.setTime(x.getTime()+e*86400000);if(v=='start'){s.c&quot;\n+&quot;_w(cn,d.getTime(),e?x:0);return '';}if(v=='stop'){k=s.c_r(cn);if(!s&quot;\n+&quot;.c_w(cn,'',d)||!k)return '';v=(d.getTime()-k)/1000;var td=86400,th=&quot;\n+&quot;3600,tm=60,r=5,u,un;if(v&gt;td){u=td;un='days';}else if(v&gt;th){u=th;un=&quot;\n+&quot;'hours';}else if(v&gt;tm){r=2;u=tm;un='minutes';}else{r=.2;u=1;un='sec&quot;\n+&quot;onds';}v=v*r/u;return (Math.round(v)/r)+' '+un;}}return '';&quot;);\n\n\n/*\n * Plugin Utility: apl v1.1\n */\ns.apl=new Function(&quot;l&quot;,&quot;v&quot;,&quot;d&quot;,&quot;u&quot;,&quot;&quot;\n+&quot;var s=this,m=0;if(!l)l='';if(u){var i,n,a=s.split(l,d);for(i=0;i&lt;a.&quot;\n+&quot;length;i++){n=a[i];m=m||(u==1?(n==v):(n.toLowerCase()==v.toLowerCas&quot;\n+&quot;e()));}}if(!m)l=l?l+d+v:v;return l&quot;);\n\n\n/************************** CONFIG SECTION END**************************/\n\n\n/*\n==========START MEDIA MODULE==========\nThe Media Module is required to implement Adobe Analytics Video Milestone Tracking\n*/\n\nfunction AppMeasurement_Module_Media(q){var b=this;b.s=q;q=window;q.s_c_in||(q.s_c_il=[],q.s_c_in=0);b._il=q.s_c_il;b._in=q.s_c_in;b._il[b._in]=b;q.s_c_in++;b._c=&quot;s_m&quot;;b.list=[];b.open=function(d,c,e,k){var f={},a=new Date,l=&quot;&quot;,g;c||(c=-1);if(d&amp;&amp;e){b.list||(b.list={});b.list[d]&amp;&amp;b.close(d);k&amp;&amp;k.id&amp;&amp;(l=k.id);if(l)for(g in b.list)!Object.prototype[g]&amp;&amp;b.list[g]&amp;&amp;b.list[g].R==l&amp;&amp;b.close(b.list[g].name);f.name=d;f.length=c;f.offset=0;f.e=0;f.playerName=b.playerName?b.playerName:e;f.R=l;f.C=0;f.a=0;f.timestamp=\nMath.floor(a.getTime()/1E3);f.k=0;f.u=f.timestamp;f.c=-1;f.n=&quot;&quot;;f.g=-1;f.D=0;f.I={};f.G=0;f.m=0;f.f=&quot;&quot;;f.B=0;f.L=0;f.A=0;f.F=0;f.l=!1;f.v=&quot;&quot;;f.J=&quot;&quot;;f.K=0;f.r=!1;f.H=&quot;&quot;;f.complete=0;f.Q=0;f.p=0;f.q=0;b.list[d]=f}};b.openAd=function(d,c,e,k,f,a,l,g){var h={};b.open(d,c,e,g);if(h=b.list[d])h.l=!0,h.v=k,h.J=f,h.K=a,h.H=l};b.M=function(d){var c=b.list[d];b.list[d]=0;c&amp;&amp;c.monitor&amp;&amp;clearTimeout(c.monitor.interval)};b.close=function(d){b.i(d,0,-1)};b.play=function(d,c,e,k){var f=b.i(d,1,c,e,k);f&amp;&amp;!f.monitor&amp;&amp;\n(f.monitor={},f.monitor.update=function(){1==f.k&amp;&amp;b.i(f.name,3,-1);f.monitor.interval=setTimeout(f.monitor.update,1E3)},f.monitor.update())};b.click=function(d,c){b.i(d,7,c)};b.complete=function(d,c){b.i(d,5,c)};b.stop=function(d,c){b.i(d,2,c)};b.track=function(d){b.i(d,4,-1)};b.P=function(d,c){var e=&quot;a.media.&quot;,k=d.linkTrackVars,f=d.linkTrackEvents,a=&quot;m_i&quot;,l,g=d.contextData,h;c.l&amp;&amp;(e+=&quot;ad.&quot;,c.v&amp;&amp;(g[&quot;a.media.name&quot;]=c.v,g[e+&quot;pod&quot;]=c.J,g[e+&quot;podPosition&quot;]=c.K),c.G||(g[e+&quot;CPM&quot;]=c.H));c.r&amp;&amp;(g[e+&quot;clicked&quot;]=\n!0,c.r=!1);g[&quot;a.contentType&quot;]=&quot;video&quot;+(c.l?&quot;Ad&quot;:&quot;&quot;);g[&quot;a.media.channel&quot;]=b.channel;g[e+&quot;name&quot;]=c.name;g[e+&quot;playerName&quot;]=c.playerName;0&lt;c.length&amp;&amp;(g[e+&quot;length&quot;]=c.length);g[e+&quot;timePlayed&quot;]=Math.floor(c.a);0&lt;Math.floor(c.a)&amp;&amp;(g[e+&quot;timePlayed&quot;]=Math.floor(c.a));c.G||(g[e+&quot;view&quot;]=!0,a=&quot;m_s&quot;,b.Heartbeat&amp;&amp;b.Heartbeat.enabled&amp;&amp;(a=c.l?b.__primetime?&quot;mspa_s&quot;:&quot;msa_s&quot;:b.__primetime?&quot;msp_s&quot;:&quot;ms_s&quot;),c.G=1);c.f&amp;&amp;(g[e+&quot;segmentNum&quot;]=c.m,g[e+&quot;segment&quot;]=c.f,0&lt;c.B&amp;&amp;(g[e+&quot;segmentLength&quot;]=c.B),c.A&amp;&amp;0&lt;c.a&amp;&amp;(g[e+&quot;segmentView&quot;]=\n!0));!c.Q&amp;&amp;c.complete&amp;&amp;(g[e+&quot;complete&quot;]=!0,c.S=1);0&lt;c.p&amp;&amp;(g[e+&quot;milestone&quot;]=c.p);0&lt;c.q&amp;&amp;(g[e+&quot;offsetMilestone&quot;]=c.q);if(k)for(h in g)Object.prototype[h]||(k+=&quot;,contextData.&quot;+h);l=g[&quot;a.contentType&quot;];d.pe=a;d.pev3=l;var q,s;if(b.contextDataMapping)for(h in d.events2||(d.events2=&quot;&quot;),k&amp;&amp;(k+=&quot;,events&quot;),b.contextDataMapping)if(!Object.prototype[h]){a=h.length&gt;e.length&amp;&amp;h.substring(0,e.length)==e?h.substring(e.length):&quot;&quot;;l=b.contextDataMapping[h];if(&quot;string&quot;==typeof l)for(q=l.split(&quot;,&quot;),s=0;s&lt;q.length;s++)l=\nq[s],&quot;a.contentType&quot;==h?(k&amp;&amp;(k+=&quot;,&quot;+l),d[l]=g[h]):&quot;view&quot;==a||&quot;segmentView&quot;==a||&quot;clicked&quot;==a||&quot;complete&quot;==a||&quot;timePlayed&quot;==a||&quot;CPM&quot;==a?(f&amp;&amp;(f+=&quot;,&quot;+l),&quot;timePlayed&quot;==a||&quot;CPM&quot;==a?g[h]&amp;&amp;(d.events2+=(d.events2?&quot;,&quot;:&quot;&quot;)+l+&quot;=&quot;+g[h]):g[h]&amp;&amp;(d.events2+=(d.events2?&quot;,&quot;:&quot;&quot;)+l)):&quot;segment&quot;==a&amp;&amp;g[h+&quot;Num&quot;]?(k&amp;&amp;(k+=&quot;,&quot;+l),d[l]=g[h+&quot;Num&quot;]+&quot;:&quot;+g[h]):(k&amp;&amp;(k+=&quot;,&quot;+l),d[l]=g[h]);else if(&quot;milestones&quot;==a||&quot;offsetMilestones&quot;==a)h=h.substring(0,h.length-1),g[h]&amp;&amp;b.contextDataMapping[h+&quot;s&quot;][g[h]]&amp;&amp;(f&amp;&amp;(f+=&quot;,&quot;+b.contextDataMapping[h+\n&quot;s&quot;][g[h]]),d.events2+=(d.events2?&quot;,&quot;:&quot;&quot;)+b.contextDataMapping[h+&quot;s&quot;][g[h]]);g[h]&amp;&amp;(g[h]=0);&quot;segment&quot;==a&amp;&amp;g[h+&quot;Num&quot;]&amp;&amp;(g[h+&quot;Num&quot;]=0)}d.linkTrackVars=k;d.linkTrackEvents=f};b.i=function(d,c,e,k,f){var a={},l=(new Date).getTime()/1E3,g,h,q=b.trackVars,s=b.trackEvents,t=b.trackSeconds,u=b.trackMilestones,v=b.trackOffsetMilestones,w=b.segmentByMilestones,x=b.segmentByOffsetMilestones,p,n,r=1,m={},y;b.channel||(b.channel=b.s.w.location.hostname);if(a=d&amp;&amp;b.list&amp;&amp;b.list[d]?b.list[d]:0)if(a.l&amp;&amp;(t=b.adTrackSeconds,\nu=b.adTrackMilestones,v=b.adTrackOffsetMilestones,w=b.adSegmentByMilestones,x=b.adSegmentByOffsetMilestones),0&gt;e&amp;&amp;(e=1==a.k&amp;&amp;0&lt;a.u?l-a.u+a.c:a.c),0&lt;a.length&amp;&amp;(e=e&lt;a.length?e:a.length),0&gt;e&amp;&amp;(e=0),a.offset=e,0&lt;a.length&amp;&amp;(a.e=a.offset/a.length*100,a.e=100&lt;a.e?100:a.e),0&gt;a.c&amp;&amp;(a.c=e),y=a.D,m.name=d,m.ad=a.l,m.length=a.length,m.openTime=new Date,m.openTime.setTime(1E3*a.timestamp),m.offset=a.offset,m.percent=a.e,m.playerName=a.playerName,m.mediaEvent=0&gt;a.g?&quot;OPEN&quot;:1==c?&quot;PLAY&quot;:2==c?&quot;STOP&quot;:3==c?&quot;MONITOR&quot;:\n4==c?&quot;TRACK&quot;:5==c?&quot;COMPLETE&quot;:7==c?&quot;CLICK&quot;:&quot;CLOSE&quot;,2&lt;c||c!=a.k&amp;&amp;(2!=c||1==a.k)){f||(k=a.m,f=a.f);if(c){1==c&amp;&amp;(a.c=e);if((3&gt;=c||5&lt;=c)&amp;&amp;0&lt;=a.g&amp;&amp;(r=!1,q=s=&quot;None&quot;,a.g!=e)){h=a.g;h&gt;e&amp;&amp;(h=a.c,h&gt;e&amp;&amp;(h=e));p=u?u.split(&quot;,&quot;):0;if(0&lt;a.length&amp;&amp;p&amp;&amp;e&gt;=h)for(n=0;n&lt;p.length;n++)(g=p[n]?parseFloat(&quot;&quot;+p[n]):0)&amp;&amp;h/a.length*100&lt;g&amp;&amp;a.e&gt;=g&amp;&amp;(r=!0,n=p.length,m.mediaEvent=&quot;MILESTONE&quot;,a.p=m.milestone=g);if((p=v?v.split(&quot;,&quot;):0)&amp;&amp;e&gt;=h)for(n=0;n&lt;p.length;n++)(g=p[n]?parseFloat(&quot;&quot;+p[n]):0)&amp;&amp;h&lt;g&amp;&amp;e&gt;=g&amp;&amp;(r=!0,n=p.length,m.mediaEvent=\n&quot;OFFSET_MILESTONE&quot;,a.q=m.offsetMilestone=g)}if(a.L||!f){if(w&amp;&amp;u&amp;&amp;0&lt;a.length){if(p=u.split(&quot;,&quot;))for(p.push(&quot;100&quot;),n=h=0;n&lt;p.length;n++)if(g=p[n]?parseFloat(&quot;&quot;+p[n]):0)a.e&lt;g&amp;&amp;(k=n+1,f=&quot;M:&quot;+h+&quot;-&quot;+g,n=p.length),h=g}else if(x&amp;&amp;v&amp;&amp;(p=v.split(&quot;,&quot;)))for(p.push(&quot;&quot;+(0&lt;a.length?a.length:&quot;E&quot;)),n=h=0;n&lt;p.length;n++)if((g=p[n]?parseFloat(&quot;&quot;+p[n]):0)||&quot;E&quot;==p[n]){if(e&lt;g||&quot;E&quot;==p[n])k=n+1,f=&quot;O:&quot;+h+&quot;-&quot;+g,n=p.length;h=g}f&amp;&amp;(a.L=!0)}(f||a.f)&amp;&amp;f!=a.f&amp;&amp;(a.F=!0,a.f||(a.m=k,a.f=f),0&lt;=a.g&amp;&amp;(r=!0));(2&lt;=c||100&lt;=a.e)&amp;&amp;a.c&lt;e&amp;&amp;\n(a.C+=e-a.c,a.a+=e-a.c);if(2&gt;=c||3==c&amp;&amp;!a.k)a.n+=(1==c||3==c?&quot;S&quot;:&quot;E&quot;)+Math.floor(e),a.k=3==c?1:c;!r&amp;&amp;0&lt;=a.g&amp;&amp;3&gt;=c&amp;&amp;(t=t?t:0)&amp;&amp;a.a&gt;=t&amp;&amp;(r=!0,m.mediaEvent=&quot;SECONDS&quot;);a.u=l;a.c=e}if(!c||3&gt;=c&amp;&amp;100&lt;=a.e)2!=a.k&amp;&amp;(a.n+=&quot;E&quot;+Math.floor(e)),c=0,q=s=&quot;None&quot;,m.mediaEvent=&quot;CLOSE&quot;;7==c&amp;&amp;(r=m.clicked=a.r=!0);if(5==c||b.completeByCloseOffset&amp;&amp;(!c||100&lt;=a.e)&amp;&amp;0&lt;a.length&amp;&amp;e&gt;=a.length-b.completeCloseOffsetThreshold)r=m.complete=a.complete=!0;l=m.mediaEvent;&quot;MILESTONE&quot;==l?l+=&quot;_&quot;+m.milestone:&quot;OFFSET_MILESTONE&quot;==l&amp;&amp;(l+=\n&quot;_&quot;+m.offsetMilestone);a.I[l]?m.eventFirstTime=!1:(m.eventFirstTime=!0,a.I[l]=1);m.event=m.mediaEvent;m.timePlayed=a.C;m.segmentNum=a.m;m.segment=a.f;m.segmentLength=a.B;b.monitor&amp;&amp;4!=c&amp;&amp;b.monitor(b.s,m);b.Heartbeat&amp;&amp;b.Heartbeat.enabled&amp;&amp;0&lt;=a.g&amp;&amp;(r=!1);0==c&amp;&amp;b.M(d);r&amp;&amp;a.D==y&amp;&amp;(d={contextData:{}},d.linkTrackVars=q,d.linkTrackEvents=s,d.linkTrackVars||(d.linkTrackVars=&quot;&quot;),d.linkTrackEvents||(d.linkTrackEvents=&quot;&quot;),b.P(d,a),d.linkTrackVars||(d[&quot;!linkTrackVars&quot;]=1),d.linkTrackEvents||(d[&quot;!linkTrackEvents&quot;]=\n1),b.s.track(d),a.F?(a.m=k,a.f=f,a.A=!0,a.F=!1):0&lt;a.a&amp;&amp;(a.A=!1),a.n=&quot;&quot;,a.p=a.q=0,a.a-=Math.floor(a.a),a.g=e,a.D++)}return a};b.O=function(d,c,e,k,f){var a=0;if(d&amp;&amp;(!b.autoTrackMediaLengthRequired||c&amp;&amp;0&lt;c)){if(b.list&amp;&amp;b.list[d])a=1;else if(1==e||3==e)b.open(d,c,&quot;HTML5 Video&quot;,f),a=1;a&amp;&amp;b.i(d,e,k,-1,0)}};b.attach=function(d){var c,e,k;d&amp;&amp;d.tagName&amp;&amp;&quot;VIDEO&quot;==d.tagName.toUpperCase()&amp;&amp;(b.o||(b.o=function(c,a,d){var e,h;b.autoTrack&amp;&amp;(e=c.currentSrc,(h=c.duration)||(h=-1),0&gt;d&amp;&amp;(d=c.currentTime),b.O(e,h,a,\nd,c))}),c=function(){b.o(d,1,-1)},e=function(){b.o(d,1,-1)},b.j(d,&quot;play&quot;,c),b.j(d,&quot;pause&quot;,e),b.j(d,&quot;seeking&quot;,e),b.j(d,&quot;seeked&quot;,c),b.j(d,&quot;ended&quot;,function(){b.o(d,0,-1)}),b.j(d,&quot;timeupdate&quot;,c),k=function(){d.paused||d.ended||d.seeking||b.o(d,3,-1);setTimeout(k,1E3)},k())};b.j=function(b,c,e){b.attachEvent?b.attachEvent(&quot;on&quot;+c,e):b.addEventListener&amp;&amp;b.addEventListener(c,e,!1)};void 0==b.completeByCloseOffset&amp;&amp;(b.completeByCloseOffset=1);void 0==b.completeCloseOffsetThreshold&amp;&amp;(b.completeCloseOffsetThreshold=\n1);b.Heartbeat={};b.N=function(){var d,c;if(b.autoTrack&amp;&amp;(d=b.s.d.getElementsByTagName(&quot;VIDEO&quot;)))for(c=0;c&lt;d.length;c++)b.attach(d[c])};b.j(q,&quot;load&quot;,b.N)}\n\n/*\n==========END MEDIA MODULE==========\n*/\n\n\n/***** MEDIA MODULE CONFIGURATION FOR MILESTONE TRACKING START*****/\n\ns.loadModule(&quot;Media&quot;)\ns.Media.onLoad = function(s,m) {\n\ts.Media.autoTrack= false;\n\t/*Track Milestone 10%, 25%, 50%, 75%, 95%\n\t* Delete unwanted milestone if necessary\n\t*/\n\ts.Media.trackMilestones=&quot;10,25,50,75,95&quot;;\n\ts.Media.playerName= &quot;TUI Brightcove HTML5 Player&quot;;\n\ts.Media.segmentByMilestones = true;\n\ts.Media.trackUsingContextData = true;\n\t/* Add reserved context data variables as needed to populate default metrics\n\t*   a.media.progress10, a.media.progress25, a.media.progress50 ,a.media.progress75, a.media.progress95\n\t*\ta.media.friendlyname --&gt; to populate Video Name report\n\t*/\n\ts.Media.trackVars=&quot;contextData.a.media.progress10,contextData.a.media.progress25,contextData.a.media.progress50,contextData.a.media.progress75,contextData.a.media.progress95,contextData.a.media.friendlyname&quot;;\n};\n\n/*\n* USE MEDIA MONITOR TO SEND THE ADDITIONAL a.media.progressXX variables: needed as no processing rules are created by default to handle media.milestone\n*/\n\ns.Media.monitor = function (s,media){\n\t\n\t\t\n\t//Reset Variables\n\ts.contextData['a.media.progress10'] = s.contextData['a.media.progress25'] = s.contextData['a.media.progress50'] = s.contextData['a.media.progress75'] = s.contextData['a.media.progress95'] = s.contextData['a.media.friendlyname'] =  '';\n\t\n\ts.contextData['a.media.friendlyname'] = '' //assign custom friendly name if needed\n\t//if no custom friendly name\n\tif(!s.contextData['a.media.friendlyname']){\n\t\t//default to media.name\n\t\ts.contextData['a.media.friendlyname'] = media.name;\n\t}\n\t\n\t//If MILESTONE EVENT\n\tif(media.event==&quot;MILESTONE&quot;) {\n\t\t//Check which milestone has been reached: media.milestone\n\t\tswitch (media.milestone) {\n\t\t\t//When the 10% milestone is reached add a.media.progress10 to the Adobe Analytics request\n\t\t\tcase 10:\n\t\t\t\ts.contextData['a.media.progress10'] = true;\n\t\t\t\ts.Media.track(media.name);\n\t\t\t\tbreak;\n\t\t\t//When the 25% milestone is reached add a.media.progress25 to the Adobe Analytics request\n\t\t\tcase 25:\n\t\t\t\ts.contextData['a.media.progress25'] = true;\n\t\t\t\ts.Media.track(media.name);\n\t\t\t\tbreak;\n\t\t\t//When the 50% milestone is reached add a.media.progress50 to the Adobe Analytics request\n\t\t\tcase 50:\n\t\t\t\ts.contextData['a.media.progress50'] = true;\n\t\t\t\ts.Media.track(media.name);\n\t\t\t\tbreak;\n\t\t\t//When the 75% milestone is reached add a.media.progress75 to the Adobe Analytics request\n\t\t\tcase 75:\n\t\t\t\ts.contextData['a.media.progress75'] = true;\n\t\t\t\ts.Media.track(media.name);\n\t\t\t\tbreak;\n\t\t\t//When the 95% milestone is reached add a.media.progress95 to the Adobe Analytics request\n\t\t\tcase 95:\n\t\t\t\ts.contextData['a.media.progress95'] = true;\n\t\t\t\ts.Media.track(media.name);\n\t\t\t\tbreak;\n\t\t\t//When any other % milestone is reached do nothing\n\t\t\tdefault:\n\t\t\t\tbreak;\n\t\t}\n\t}\n}\n/***** MEDIA MODULE CONFIGURATION FOR MILESTONE TRACKING END*****/\n","name":"Draft 1"}},"draftSeq":"1","promotedSnippets":{"ef260e9aa3c673af240d17a2660480361a8e081d1ffeca2a5ed0e3219fc18567":{"name":"dev","code":"// Performance Timing Events\ns.pte = 'event980,event981,event982,event983,event984,event985,event986,event987,event988,event989,event990,event1000';\n//[--------------------------- 1 to 8 ---------------------------][-- 9 --][- 10 -]\ns.ptc = false;\n\ns.usePlugins=true;\nfunction s_doPlugins(s) {\n\n    // Sets server\n\ts.server = document.location.host;\n\t\n\ts.events = (function ensightenAdobeEventLogic(existingEventString) {\n        s.events = existingEventString || ''\n        \n        var bookingReference = (window.tui &amp;&amp; tui.analytics &amp;&amp; tui.analytics.page &amp;&amp; tui.analytics.page.Tracsref ? tui.analytics.page.Tracsref : window.dataLayer &amp;&amp; dataLayer[0] &amp;&amp; dataLayer[0].transactions &amp;&amp; dataLayer[0].transactions.total &amp;&amp; dataLayer[0].transactions.total.transactionId ? dataLayer[0].transactions.total.transactionId : &quot;&quot;),\n        \n        totalPrice = (window.tui &amp;&amp; tui.analytics &amp;&amp; tui.analytics.page &amp;&amp; tui.analytics.page.Sum ? parseFloat(tui.analytics.page.Sum) : window.dataLayer &amp;&amp; dataLayer[0] &amp;&amp; dataLayer[0].transactions &amp;&amp; dataLayer[0].transactions.total &amp;&amp; dataLayer[0].transactions.total.totalPrice ? parseFloat(dataLayer[0].transactions.total.totalPrice) : 0),\n        \n        creditNoteDiscountValue = (window.tui &amp;&amp; tui.analytics &amp;&amp; tui.analytics.page &amp;&amp; tui.analytics.page.bookingLevelCreditNoteDiscount &amp;&amp; tui.analytics.page.bookingLevelCreditNoteDiscount != 'null' ? parseFloat(tui.analytics.page.bookingLevelCreditNoteDiscount) : window.dataLayer &amp;&amp; dataLayer[0] &amp;&amp; dataLayer[0].transactions &amp;&amp; dataLayer[0].transactions.total &amp;&amp; dataLayer[0].transactions.total.bookingLevelCreditNoteDiscount ? parseFloat(dataLayer[0].transactions.total.bookingLevelCreditNoteDiscount) : 0),\n        \n        creditNoteRefundValue = (window.tui &amp;&amp; tui.analytics &amp;&amp; tui.analytics.page &amp;&amp; tui.analytics.page.creditNoteRefundValue &amp;&amp; tui.analytics.page.creditNoteRefundValue != 'null' ? parseFloat(tui.analytics.page.creditNoteRefundValue) : window.dataLayer &amp;&amp; dataLayer[0] &amp;&amp; dataLayer[0].transactions &amp;&amp; dataLayer[0].transactions.total &amp;&amp; dataLayer[0].transactions.total.creditNoteRefundValue ? parseFloat(dataLayer[0].transactions.total.creditNoteRefundValue) : 0),\n        \n        onlineDiscount = (window.tui &amp;&amp; tui.analytics &amp;&amp; tui.analytics.page &amp;&amp; tui.analytics.page &amp;&amp; tui.analytics.page.Disc &amp;&amp; tui.analytics.page.Disc != 'null' ? parseFloat(tui.analytics.page.Disc) : window.dataLayer &amp;&amp; dataLayer[0] &amp;&amp; dataLayer[0].transactions &amp;&amp; dataLayer[0].transactions.total &amp;&amp; dataLayer[0].transactions.total.discount ? parseFloat(dataLayer[0].transactions.total.discount) : 0),\n        \n        bookingPax = (window.tui &amp;&amp; tui.analytics &amp;&amp; tui.analytics.page &amp;&amp; tui.analytics.page &amp;&amp; tui.analytics.page.Pax &amp;&amp; tui.analytics.page.Pax != 'null' ? parseInt(tui.analytics.page.Pax) : window.dataLayer &amp;&amp; dataLayer[0] &amp;&amp; dataLayer[0].transactions &amp;&amp; dataLayer[0].transactions.items &amp;&amp; dataLayer[0].transactions.items.quantity &amp;&amp; dataLayer[0].transactions.items.quantity.pax ? parseInt(dataLayer[0].transactions.items.quantity.pax) : 0),\n        \n        incentivePromoValue = incentivePromoDiscount();\n        \n        function incentivePromoDiscount() {\n        \n        if (window.dataLayer &amp;&amp; dataLayer[0] &amp;&amp; dataLayer[0].transactions &amp;&amp; dataLayer[0].transactions.total &amp;&amp; dataLayer[0].transactions.total.bookingLevelPromoCodes &amp;&amp; dataLayer[0].transactions.total.bookingLevelPromoCodes.length &gt; 0) {\n          var rgx = new RegExp('/CVRHC|CVRW20|CVRS21|CVRI|CVRM|CVRV/i', 'i');\n          var promoCodeArray = dataLayer[0].transactions.total.bookingLevelPromoCodes;\n          var result = 0;\n          for (i = 0; i &lt; promoCodeArray.length; i++) {\n            if (rgx.test(promoCodeArray[i].bookingLevelPromoCode)) {\n              result = promoCodeArray[i].bookingLevelPromoDiscount;\n            }\n          }\n          return result;\n        } else if (window.tui &amp;&amp; tui.analytics &amp;&amp; tui.analytics.page &amp;&amp; tui.analytics.page.IncentivePromoValue &amp;&amp; tui.analytics.page.IncentivePromoValue != 'null') {\n          return parseFloat(tui.analytics.page.IncentivePromoValue);\n        } else {\n          return 0;\n        }\n        }\n        \n        //Normal Bookflow &amp; LYP with same confirmation url\n        if ((document.URL.indexOf('/book/confirmation') !== -1 || document.URL.indexOf('/book/mobile/confirmation') !== -1 || document.URL.indexOf('/book/bookingConfirmation') !== -1) &amp;&amp; bookingReference &amp;&amp; typeof bookingReference === &quot;string&quot; &amp;&amp; bookingReference.length &gt; 5) {\n        if ((window.dataLayer &amp;&amp; dataLayer[0] &amp;&amp; dataLayer[0].transactions &amp;&amp; dataLayer[0].transactions.total &amp;&amp; dataLayer[0].transactions.total.isLockYourPrice == &quot;Yes&quot;) || (window.dataLayer &amp;&amp; dataLayer[0] &amp;&amp; dataLayer[0].page &amp;&amp; dataLayer[0].page.pageID == &quot;lockYourPriceConfirmationpage_react&quot;)) {\n          s.events = &quot;event78:&quot; + bookingReference + &quot;LYP&quot; // event serialisation with event78 (LYP Unconfirmed Booking)\n            +\n            &quot;,event80=&quot; + window.dataLayer[0].transactions.total.lockYourPriceValue + &quot;:&quot; + bookingReference + &quot;LYP&quot; + &quot;,event81=&quot; + totalPrice + &quot;:&quot; + bookingReference + &quot;LYP&quot;;\n        } else {\n          s.events = &quot;purchase&quot; + &quot;,event4=&quot; + (creditNoteDiscountValue &gt; 0 ? totalPrice + creditNoteDiscountValue : totalPrice) + &quot;,event5=&quot; + onlineDiscount + &quot;,event9=&quot; + bookingPax + &quot;,event150,event151,event152,event153,event154,event158,event159&quot; //added 158&amp;159 for PC Incentive \n            +\n            &quot;,event155=&quot; + creditNoteDiscountValue // Added for credit note launch\n            +\n            &quot;,event156=&quot; + creditNoteRefundValue // Added for credit note launch\n            +\n            &quot;,event157=&quot; + (creditNoteDiscountValue &gt; 0 ? totalPrice : 0) // Addded for credit note launch\n            +\n            &quot;,event160=&quot; + (creditNoteDiscountValue &gt; 0 ? totalPrice + creditNoteDiscountValue + incentivePromoValue : totalPrice); // multiple promocode - maintaining redemption code reporting\n        }\n        }\n        \n        //LYP mmb Bookflow (managemybooking/paymentconfirmation is the MMB confirmation page)\n        else if ((document.URL.indexOf('/managemybooking/paymentconfirmation') !== -1) &amp;&amp; window.dataLayer[0] &amp;&amp; dataLayer[0].transactions &amp;&amp; dataLayer[0].transactions.total &amp;&amp; bookingReference &amp;&amp; typeof bookingReference === &quot;string&quot; &amp;&amp; bookingReference.length &gt; 5 &amp;&amp; dataLayer[0].transactions.total.isLockYourPrice == &quot;Yes&quot;) {\n        s.events = &quot;purchase&quot; + &quot;,event4=&quot; + (creditNoteDiscountValue &gt; 0 ? totalPrice + creditNoteDiscountValue : totalPrice) + &quot;,event5=&quot; + onlineDiscount + &quot;,event9=&quot; + bookingPax + &quot;,event79&quot; // Lock Your Price confirmed booking\n          +\n          &quot;,event80=&quot; + (window.dataLayer[0].transactions.total.lockYourPriceValue * -1) + &quot;,event150,event151,event152,event153,event154,event158,event159&quot;; //added 158&amp;159 for PC Incentive\n        }\n        \n        //MMB Unpaid\n        else if (document.URL.indexOf('your-account/managemybooking/amendmentsuccess') !== -1 &amp;&amp; typeof window.tui.analytics.events != 'undefined' &amp;&amp; window.tui.analytics.events !== null) {\n        for (var i = 0; i &lt; window.tui.analytics.events.length; i++) {\n          if (window.tui.analytics.events[i].eventAction == 'MMB Unpaid') {\n            s.events = &quot;event301:&quot; + window.tui.analytics.events[i].eventSerialisationNumber;\n            /*\n            if(window.tui &amp;&amp; tui.analytics &amp;&amp; tui.analytics.page &amp;&amp; tui.analytics.page.bookingLevelPromoCode &amp;&amp; tui.analytics.page.bookingLevelPromoDiscount){\n               if(tui.analytics.page.bookingLevelPromoCode == 'CVRM'|| tui.analytics.page.bookingLevelPromoCode == 'CVRHC'){\n                s.events = s.apl(s.events,'event154=' + tui.analytics.page.bookingLevelPromoDiscount ,',',1);\n               }\n            }*/\n        \n            // Start\n            var dl = window.dataLayer\n            if (dl &amp;&amp; dl[0] &amp;&amp; dl[0].transactions &amp;&amp; dl[0].transactions.total) {\n              // If old object is shown - can be removed at a later date\n              if (dl[0].transactions.total.bookingLevelPromoDiscount &amp;&amp; typeof dl[0].transactions.total.bookingLevelPromoDiscount !== 'undefined') {\n                // Check for PC &amp; MMB/Booking Incentive\n                if (/CVRHC|CVRW20|CVRS21|CVRI|CVRM|CVRV/i.test(dl[0].transactions.total.bookingLevelPromoCode)) {\n                  // Programme Change Incentive\n                  if (/CVRHC|CVRW20|CVRS21/i.test(dl[0].transactions.total.bookingLevelPromoCode)) {\n                    s.events = s.apl(s.events, 'event158=' + Math.abs(dl[0].transactions.total.bookingLevelPromoDiscount), ',', 1);\n                  }\n                  // MMB/Booking Incentive\n                  if (/CVRI|CVRM|CVRV/i.test(dl[0].transactions.total.bookingLevelPromoCode)) {\n                    s.events = s.apl(s.events, 'event159=' + Math.abs(dl[0].transactions.total.bookingLevelPromoDiscount), ',', 1);\n                  }\n                } else {\n                  s.events = s.apl(s.events, 'event154=' + Math.abs(dl[0].transactions.total.bookingLevelPromoDiscount), ',', 1);\n                }\n                // Added to handle new promo code array\n              } else if (dl[0].transactions.total.bookingLevelPromoCodes &amp;&amp; dl[0].transactions.total.bookingLevelPromoCodes.length &gt; 0) {\n                var promoCodeArray = dl[0].transactions.total.bookingLevelPromoCodes;\n                for (i = 0; i &lt; promoCodeArray.length; i++) {\n        \n                  if (/CVRHC|CVRW20|CVRS21|CVRI|CVRM|CVRV/i.test(promoCodeArray[i].bookingLevelPromoCode)) {\n                    // Programme Change Incentive\n                    if (/CVRHC|CVRW20|CVRS21/i.test(promoCodeArray[i].bookingLevelPromoCode)) {\n                      s.events = s.apl(s.events, 'event158=' + Math.abs(promoCodeArray[i].bookingLevelPromoDiscount), ',', 1);\n                    }\n                    // MMB/Booking Incentive\n                    if (/CVRI|CVRM|CVRV/i.test(promoCodeArray[i].bookingLevelPromoCode)) {\n                      s.events = s.apl(s.events, 'event159=' + Math.abs(promoCodeArray[i].bookingLevelPromoDiscount), ',', 1);\n                    }\n                  } else {\n                    s.events = s.apl(s.events, 'event154=' + Math.abs(promoCodeArray[i].bookingLevelPromoDiscount), ',', 1);\n                  }\n                }\n              }\n              // For legacy data layer (only single promo code &amp; value)\t\n            } else if (window.tui &amp;&amp; tui.analytics &amp;&amp; tui.analytics.page) {\n              if (typeof tui.analytics.page.PromoValue !== 'undefined' &amp;&amp; tui.analytics.page.PromoValue !== 'null') {\n                if (/CVRHC|CVRW20|CVRS21/i.test(tui.analytics.page.PromoCode)) {\n                  s.events = s.apl(s.events, 'event158' + parseFloat(tui.analytics.page.PromoValue), ',', 1);\n                } else if (/CVRI|CVRM|CVRV/i.test(tui.analytics.page.PromoCode)) {\n                  s.events = s.apl(s.events, 'event159' + parseFloat(tui.analytics.page.PromoValue), ',', 1);\n                } else {\n                  s.events = s.apl(s.events, 'event154' + parseFloat(tui.analytics.page.PromoValue), ',', 1);\n                }\n              }\n            } //End\n          }\n        }\n        }\n        \n        //MMB Paid\n        else if (document.URL.indexOf('your-account/managemybooking/managepaymentconfirmation') !== -1 &amp;&amp; typeof window.tui.analytics.events != 'undefined' &amp;&amp; window.tui.analytics.events !== null) {\n        for (var i = 0; i &lt; window.tui.analytics.events.length; i++) {\n          if (window.tui.analytics.events[i].eventAction == 'MMB Paid') {\n            s.events = &quot;event302:&quot; + window.tui.analytics.events[i].eventSerialisationNumber;\n            /*\n            if(window.tui &amp;&amp; tui.analytics &amp;&amp; tui.analytics.page &amp;&amp; tui.analytics.page.bookingLevelPromoCode &amp;&amp; tui.analytics.page.bookingLevelPromoDiscount){\n               if(tui.analytics.page.bookingLevelPromoCode == 'CVRM'|| tui.analytics.page.bookingLevelPromoCode == 'CVRHC'){\n                s.events = s.apl(s.events,'event154=' + tui.analytics.page.bookingLevelPromoDiscount ,',',1);\n               }\n            }*/\n        \n            // Start\n            var dl = window.dataLayer\n            if (dl &amp;&amp; dl[0] &amp;&amp; dl[0].transactions &amp;&amp; dl[0].transactions.total) {\n              // If old object is shown - can be removed at a later date\n              if (dl[0].transactions.total.bookingLevelPromoDiscount &amp;&amp; typeof dl[0].transactions.total.bookingLevelPromoDiscount !== 'undefined') {\n                // Check for PC &amp; MMB/Booking Incentive\n                if (/CVRHC|CVRW20|CVRS21|CVRI|CVRM|CVRV/i.test(dl[0].transactions.total.bookingLevelPromoCode)) {\n                  // Programme Change Incentive\n                  if (/CVRHC|CVRW20|CVRS21/i.test(dl[0].transactions.total.bookingLevelPromoCode)) {\n                    s.events = s.apl(s.events, 'event158=' + Math.abs(dl[0].transactions.total.bookingLevelPromoDiscount), ',', 1);\n                  }\n                  // MMB/Booking Incentive\n                  if (/CVRI|CVRM|CVRV/i.test(dl[0].transactions.total.bookingLevelPromoCode)) {\n                    s.events = s.apl(s.events, 'event159=' + Math.abs(dl[0].transactions.total.bookingLevelPromoDiscount), ',', 1);\n                  }\n                } else {\n                  s.events = s.apl(s.events, 'event154=' + Math.abs(dl[0].transactions.total.bookingLevelPromoDiscount), ',', 1);\n                }\n                // Added to handle new promo code array\n              } else if (dl[0].transactions.total.bookingLevelPromoCodes &amp;&amp; dl[0].transactions.total.bookingLevelPromoCodes.length &gt; 0) {\n                var promoCodeArray = dl[0].transactions.total.bookingLevelPromoCodes\n                for (i = 0; i &lt; promoCodeArray.length; i++) {\n        \n                  if (/CVRHC|CVRW20|CVRS21|CVRI|CVRM|CVRV/i.test(promoCodeArray[i].bookingLevelPromoCode)) {\n                    // Programme Change Incentive\n                    if (/CVRHC|CVRW20|CVRS21/i.test(promoCodeArray[i].bookingLevelPromoCode)) {\n                      s.events = s.apl(s.events, 'event158=' + Math.abs(promoCodeArray[i].bookingLevelPromoDiscount), ',', 1);\n                    }\n                    // MMB/Booking Incentive\n                    if (/CVRI|CVRM|CVRV/i.test(promoCodeArray[i].bookingLevelPromoCode)) {\n                      s.events = s.apl(s.events, 'event159=' + Math.abs(promoCodeArray[i].bookingLevelPromoDiscount), ',', 1);\n                    }\n                  } else {\n                    s.events = s.apl(s.events, 'event154=' + Math.abs(promoCodeArray[i].bookingLevelPromoDiscount), ',', 1);\n                  }\n                }\n              }\n              // For legacy data layer (only single promo code &amp; value)\t\n            } else if (window.tui &amp;&amp; tui.analytics &amp;&amp; tui.analytics.page) {\n              if (typeof tui.analytics.page.PromoValue !== 'undefined' &amp;&amp; tui.analytics.page.PromoValue !== 'null') {\n                if (/CVRHC|CVRW20|CVRS21/i.test(tui.analytics.page.PromoCode)) {\n                  s.events = s.apl(s.events, 'event158' + parseFloat(tui.analytics.page.PromoValue), ',', 1);\n                } else if (/CVRI|CVRM|CVRV/i.test(tui.analytics.page.PromoCode)) {\n                  s.events = s.apl(s.events, 'event159' + parseFloat(tui.analytics.page.PromoValue), ',', 1);\n                } else {\n                  s.events = s.apl(s.events, 'event154' + parseFloat(tui.analytics.page.PromoValue), ',', 1);\n                }\n              }\n            } //End\n          }\n        }\n        }\n        \n        //MMB Cancel\n        else if (document.URL.indexOf('your-account/managemybooking/cancelbooking') !== -1 &amp;&amp; typeof window.tui.analytics.events != 'undefined' &amp;&amp; window.tui.analytics.events !== null) {\n        for (var i = 0; i &lt; window.tui.analytics.events.length; i++) {\n          if (window.tui.analytics.events[i].eventAction == 'MMB Cancel') {\n            s.events = &quot;event303:&quot; + window.tui.analytics.events[i].eventSerialisationNumber;\n          }\n        }\n        }\n        \n        //Price Variation Alert\n        else if (document.URL.indexOf('/book/flow/summary') !== -1 || document.URL.indexOf('/book/passengerdetails') !== -1 || document.URL.indexOf('/cps/pageRender') !== -1) {\n        var priceStatus = document.querySelectorAll('.PriceVariationAlert__infoTextHeading');\n        var price = document.querySelectorAll('.alertprice');\n        if (priceStatus.length &gt; 0 &amp;&amp; priceStatus[0].innerText.includes(&quot;INCREASED&quot;)) {\n          s.events = &quot;event47,event48=&quot; + price[0].innerText.replace(/[]/g, '');\n        } else if (priceStatus.length &gt; 0 &amp;&amp; priceStatus[0].innerText.includes(&quot;DECREASED&quot;)) {\n          s.events = &quot;event47,event48=&quot; + -price[0].innerText.replace(/[]/g, '');\n        }\n        }\n        \n        // Credit Note Booking\n        if ((document.URL.indexOf('/book/confirmation') !== -1 || document.URL.indexOf('/book/mobile/confirmation') !== -1 || document.URL.indexOf('/book/bookingConfirmation') !== -1) &amp;&amp; bookingReference &amp;&amp; typeof bookingReference === &quot;string&quot; &amp;&amp; bookingReference.length &gt; 5) {\n        // var creditNoteBooking = Bootstrapper._SC.dataHandler(arguments, &quot;62528&quot;);\n        var creditNoteBooking = b.legacy_isCreditNoteBooking || ''\n        if (creditNoteBooking.toLowerCase() == &quot;yes&quot;) {\n          s.events = s.apl(s.events, 'event70', ',', 1);\n        }\n        }\n        \n        \n        // Performance Timing Replacement\n        /*\n        var pt = (Bootstrapper.PTE &amp;&amp; Bootstrapper.PTE.performanceTimings &amp;&amp; Bootstrapper.PTE.performanceTimings.get ? Bootstrapper.PTE.performanceTimings.get() : '');\n        \n        if (pt) {\n            pt = pt.split('|');\n            s.events = s.apl(s.events,'event980=' + pt[0],',',1);\n            s.events = s.apl(s.events,'event981=' + pt[1],',',1);\n            s.events = s.apl(s.events,'event982=' + pt[2],',',1);\n            s.events = s.apl(s.events,'event983=' + pt[3],',',1);\n            s.events = s.apl(s.events,'event984=' + pt[4],',',1);\n            s.events = s.apl(s.events,'event985=' + pt[5],',',1);\n            s.events = s.apl(s.events,'event986=' + pt[6],',',1);\n            s.events = s.apl(s.events,'event987=' + pt[7],',',1);\n            s.events = s.apl(s.events,'event988=' + pt[8],',',1);\n            \n            if (pt[9] &gt; 0) {\n                s.events = s.apl(s.events,'event989=' + pt[9],',',1);\n            }\n            if (pt[10] &gt; 0) {\n            s.events = s.apl(s.events,'event990=' + pt[10],',',1);\n            }\n            s.events = s.apl(s.events,'event1000',',',1);\n        }\n        */\n        \n        // Bookflow Events\n        // Search\n        if (document.URL.indexOf('/destinations/packages') != -1 || document.URL.indexOf('/flight/search') != -1 || document.URL.indexOf('/cruise/packages') != -1 || document.URL.indexOf('/holiday/packages') != -1 || document.URL.indexOf('/f/packages') != -1 || document.URL.indexOf('/river-cruises/packages') != -1 || document.URL.indexOf('/retail/packages') != -1) {\n        s.events = s.apl(s.events, &quot;event1&quot;, &quot;,&quot;, 1);\n        }\n        \n        // Product View &amp; Custom Product View\n        if (document.URL.indexOf('/bookaccommodation') != -1 || document.URL.indexOf('/flight/book/flightoptions') != -1 || document.URL.indexOf('/flight/book/mobile/flightoptions') != -1 || document.URL.indexOf('/cruise/bookitineraries') != -1) {\n        s.events = s.apl(s.events, &quot;event11,prodView&quot;, &quot;,&quot;, 1);\n        }\n        \n        // Beach Bookflow Events\n        if (document.URL.indexOf('bookaccommodation') != -1) {\n        s.events = s.apl(s.events, &quot;event15&quot;, &quot;,&quot;, 1);\n        } else if (document.URL.indexOf('/book/mobile/hubsummary') != -1) {\n        s.events = s.apl(s.events, &quot;event16&quot;, &quot;,&quot;, 1);\n        } else if (document.URL.indexOf('/destinations/book/flightoptions') != -1 || document.URL.indexOf('/destinations/book/mobile/flightoptions') != -1 || document.URL.indexOf('/destinations/book/flow/flightoptions') != -1 || document.URL.indexOf('/holiday/book/flightoptions') != -1 || document.URL.indexOf('/holiday/book/mobile/flightoptions') != -1 || document.URL.indexOf('/holiday/book/flow/flightoptions') != -1 || document.URL.indexOf('/f/book/flightoptions') != -1 || document.URL.indexOf('/f/book/flow/flightoptions') != -1 || document.URL.indexOf('/f/book/mobile/flightoptions') != -1 || document.URL.indexOf('/retail/book/flow/flightoptions') != -1) {\n        s.events = s.apl(s.events, &quot;event17,scView,scOpen,scAdd&quot;, &quot;,&quot;, 1);\n        } else if (document.URL.indexOf('/destinations/book/roomoptions') != -1 || document.URL.indexOf('/destinations/book/mobile/roomoptions') != -1 || document.URL.indexOf('/destinations/book/flow/roomoptions') != -1 || document.URL.indexOf('/holiday/book/roomoptions') != -1 || document.URL.indexOf('/holiday/book/mobile/roomoptions') != -1 || document.URL.indexOf('/holiday/book/flow/roomoptions') != -1 || document.URL.indexOf('/f/book/roomoptions') != -1 || document.URL.indexOf('/f/book/flow/roomoptions') != -1 || document.URL.indexOf('/f/book/mobile/roomoptions') != -1 || document.URL.indexOf('/retail/book/flow/roomoptions') != -1) {\n        s.events = s.apl(s.events, &quot;event18&quot;, &quot;,&quot;, 1);\n        } else if (document.URL.indexOf('/destinations/book/extraoptions') != -1 || document.URL.indexOf('/destinations/book/mobile/extraoptions') != -1 || document.URL.indexOf('/destinations/book/flow/extraoptions') != -1 || document.URL.indexOf('/holiday/book/extraoptions') != -1 || document.URL.indexOf('/holiday/book/mobile/extraoptions') != -1 || document.URL.indexOf('/holiday/book/flow/extraoptions') != -1 || document.URL.indexOf('/f/book/extraoptions') != -1 || document.URL.indexOf('/f/book/flow/extraoptions') != -1 || document.URL.indexOf('/f/book/mobile/extraoptions') != -1 || document.URL.indexOf('/retail/book/flow/extraoptions') != -1) {\n        s.events = s.apl(s.events, &quot;event19&quot;, &quot;,&quot;, 1);\n        } else if (document.URL.indexOf('/destinations/book/passengerdetails') != -1 || document.URL.indexOf('/destinations/book/mobile/passengerdetails') != -1 || document.URL.indexOf('/holiday/book/passengerdetails') != -1 || document.URL.indexOf('/holiday/book/mobile/passengerdetails') != -1 || document.URL.indexOf('/f/book/passengerdetails') != -1 || document.URL.indexOf('/f/book/mobile/passengerdetails') != -1 || document.URL.indexOf('/retail/book/passengerdetails') != -1) {\n        s.events = s.apl(s.events, &quot;event20,scCheckout&quot;, &quot;,&quot;, 1);\n        } else if (document.URL.indexOf('/cps/pageRender') != -1 &amp;&amp; (s.Util.getQueryParam('b').indexOf('25000') != -1 || s.Util.getQueryParam('b').indexOf('32000') != -1 || s.Util.getQueryParam('b').indexOf('50000') != -1 || s.Util.getQueryParam('b').indexOf('19000') != -1 || s.Util.getQueryParam('b').indexOf('41000') != -1 || s.Util.getQueryParam('b').indexOf('31000') != -1 || s.Util.getQueryParam('b').indexOf('10000') != -1 || s.Util.getQueryParam('b').indexOf('20000') != -1 || s.Util.getQueryParam('b').indexOf('42000') != -1 || s.Util.getQueryParam('b').indexOf('51000') != -1 || s.Util.getQueryParam('b').indexOf('52000') != -1 || s.Util.getQueryParam('b').indexOf('53000') != -1 || s.Util.getQueryParam('b').indexOf('38000') != -1)) {\n        s.events = s.apl(s.events, &quot;event21&quot;, &quot;,&quot;, 1);\n        } else if (document.URL.indexOf('/destinations/book/confirmation') != -1 || document.URL.indexOf('/destinations/book/mobile/confirmation') != -1 || document.URL.indexOf('/holiday/book/confirmation') != -1 || document.URL.indexOf('/holiday/book/mobile/confirmation') != -1 || document.URL.indexOf('/f/book/confirmation') != -1 || document.URL.indexOf('/f/book/mobile/confirmation') != -1 || document.URL.indexOf('/managemybooking/paymentconfirmation') != -1 || document.URL.indexOf('/retail/book/bookingConfirmation') != -1 || document.URL.indexOf('/retail/f/book/bookingConfirmation') != -1) {\n        if (window.tui.analytics.page.pageUid != 'lockYourPriceConfirmationpage_react' || dataLayer[0].page.pageID != 'lockYourPriceConfirmationpage_react') {\n          s.events = s.apl(s.events, &quot;event22&quot;, &quot;,&quot;, 1);\n        }\n        }\n        \n        // Cruise Bookflow Events\t\n        /*else if (document.URL.indexOf('/cruise/bookitineraries') != -1) {\n        s.events = s.apl(s.events, &quot;event23&quot;, &quot;,&quot;, 1);\n        }*/ else if (document.URL.indexOf('/cruise/packages/hotels') != -1) {\n        s.events = s.apl(s.events, &quot;event24&quot;, &quot;,&quot;, 1);\n        } else if (document.URL.indexOf('/cruise/bookHotelDetails') != -1) {\n        s.events = s.apl(s.events, &quot;event25&quot;, &quot;,&quot;, 1);\n        } else if (document.URL.indexOf('/cruise/book/cruiseoptions') != -1 || document.URL.indexOf('/cruise/book/flow/cruiseoptions') != -1) {\n        s.events = s.apl(s.events, &quot;event26,scView,scOpen,scAdd&quot;, &quot;,&quot;, 1);\n        } else if (document.URL.indexOf('/cruise/book/flightoptions') != -1 || document.URL.indexOf('/cruise/book/flow/flightoptions') != -1) {\n        s.events = s.apl(s.events, &quot;event27&quot;, &quot;,&quot;, 1);\n        } else if (document.URL.indexOf('/cruise/book/roomoptions') != -1 || document.URL.indexOf('/cruise/book/flow/roomoptions') != -1) {\n        s.events = s.apl(s.events, &quot;event28&quot;, &quot;,&quot;, 1);\n        } else if (document.URL.indexOf('/cruise/book/extraoptions') != -1 || document.URL.indexOf('/cruise/book/flow/extraoptions') != -1) {\n        s.events = s.apl(s.events, &quot;event29&quot;, &quot;,&quot;, 1);\n        } else if (document.URL.indexOf('/cruise/book/passengerdetails') != -1) {\n        s.events = s.apl(s.events, &quot;event30,scCheckout&quot;, &quot;,&quot;, 1);\n        } else if (document.URL.indexOf('/cps/pageRender') != -1 &amp;&amp; (s.Util.getQueryParam('b').indexOf('37000') != -1 || s.Util.getQueryParam('b').indexOf('54000') != -1 || s.Util.getQueryParam('b').indexOf('49000') != -1)) {\n        s.events = s.apl(s.events, &quot;event31&quot;, &quot;,&quot;, 1);\n        } else if (document.URL.indexOf('/cruise/book/confirmation') != -1 || document.URL.indexOf('/retail/cruise/book/bookingConfirmation') != -1 || document.URL.indexOf('/retail/f/cruise/book/bookingConfirmation') != -1) {\n        s.events = s.apl(s.events, &quot;event32&quot;, &quot;,&quot;, 1);\n        }\n        \n        \n        // Flight Only Bookflow Events\t\t\n        else if (document.URL.indexOf('/flight/book/flightoptions') != -1 || document.URL.indexOf('/flight/book/mobile/flightoptions') != -1) {\n        s.events = s.apl(s.events, &quot;event33,scView,scOpen,scAdd&quot;, &quot;,&quot;, 1);\n        } else if (document.URL.indexOf('/flight/book/extraoptions') != -1 || document.URL.indexOf('/flight/book/mobile/extraoptions') != -1) {\n        s.events = s.apl(s.events, &quot;event34&quot;, &quot;,&quot;, 1);\n        } else if (document.URL.indexOf('/flight/book/passengerdetails') != -1 || document.URL.indexOf('/flight/book/mobile/passengerdetails') != -1) {\n        s.events = s.apl(s.events, &quot;event35,scCheckout&quot;, &quot;,&quot;, 1);\n        } else if (document.URL.indexOf('/cps/pageRender') != -1 &amp;&amp; (s.Util.getQueryParam('b').indexOf('39000') != -1 || s.Util.getQueryParam('b').indexOf('47000') != -1 || s.Util.getQueryParam('b').indexOf('40000') != -1 || s.Util.getQueryParam('b').indexOf('48000') != -1 || s.Util.getQueryParam('b').indexOf('59000') != -1 || s.Util.getQueryParam('b').indexOf('60000') != -1)) {\n        s.events = s.apl(s.events, &quot;event36&quot;, &quot;,&quot;, 1);\n        } else if (document.URL.indexOf('/flight/book/confirmation') != -1 || document.URL.indexOf('/flight/book/mobile/confirmation') != -1 || document.URL.indexOf('/retail/flight/book/bookingConfirmation') != -1 || document.URL.indexOf('/retail/f/flight/book/bookingConfirmation') != -1) {\n        s.events = s.apl(s.events, &quot;event37&quot;, &quot;,&quot;, 1);\n        }\n        \n        \n        // This is for event 8 (Pax) (legacy_numberOfPax)\n        // MOVED to mapping\n        /*\n        if (window.tui &amp;&amp; tui.analytics &amp;&amp; tui.analytics.page &amp;&amp; tui.analytics.page.Pax) {\n        s.events = s.apl(s.events, &quot;event8=&quot; + tui.analytics.page.Pax, &quot;,&quot;, 1);\n        } else if (window.dataLayer &amp;&amp; dataLayer[0] &amp;&amp; dataLayer[0].transactions &amp;&amp; dataLayer[0].transactions.total &amp;&amp; dataLayer[0].transactions.total.paxDetails &amp;&amp; dataLayer[0].transactions.total.paxDetails.total) {\n        s.events = s.apl(s.events, &quot;event8=&quot; + dataLayer[0].transactions.total.paxDetails.total, &quot;,&quot;, 1);\n        } else if (window.dataLayer &amp;&amp; dataLayer[0] &amp;&amp; dataLayer[0].basket &amp;&amp; dataLayer[0].basket.price &amp;&amp; dataLayer[0].basket.price.paxDetails &amp;&amp; dataLayer[0].basket.price.paxDetails.total) {\n        s.events = s.apl(s.events, &quot;event8=&quot; + dataLayer[0].basket.price.paxDetails.total, &quot;,&quot;, 1);\n        } else if (window.dataLayer &amp;&amp; dataLayer[0] &amp;&amp; dataLayer[0].product &amp;&amp; dataLayer[0].product.noOfPax) {\n        s.events = s.apl(s.events, &quot;event8=&quot; + dataLayer[0].product.noOfPax, &quot;,&quot;, 1);\n        } else if (window.dataLayer &amp;&amp; dataLayer[0] &amp;&amp; dataLayer[0].page &amp;&amp; dataLayer[0].page.search &amp;&amp; dataLayer[0].page.search.noOfPax) {\n        s.events = s.apl(s.events, &quot;event8=&quot; + dataLayer[0].page.search.noOfPax, &quot;,&quot;, 1);\n        }\n        */\n        \n        // This is for event 10 (Discount) (legacy_onlineDiscount)\n        // MOVED to mapping\n        /*\n        if (window.tui &amp;&amp; tui.analytics &amp;&amp; tui.analytics.page &amp;&amp; tui.analytics.page.Disc) {\n        s.events = s.apl(s.events, &quot;event10=&quot; + tui.analytics.page.Disc, &quot;,&quot;, 1);\n        } else if (window.dataLayer &amp;&amp; dataLayer[0] &amp;&amp; dataLayer[0].transactions &amp;&amp; dataLayer[0].transactions.total &amp;&amp; dataLayer[0].transactions.total.discount) {\n        s.events = s.apl(s.events, &quot;event10=&quot; + Math.round(dataLayer[0].transactions.total.discount).toString(), &quot;,&quot;, 1);\n        } else if (window.dataLayer &amp;&amp; dataLayer[0] &amp;&amp; dataLayer[0].basket &amp;&amp; dataLayer[0].basket.price &amp;&amp; dataLayer[0].basket.price.discount) {\n        s.events = s.apl(s.events, &quot;event10=&quot; + Math.round(dataLayer[0].basket.price.discount).toString(), &quot;,&quot;, 1);\n        } else if (window.dataLayer &amp;&amp; dataLayer[0] &amp;&amp; dataLayer[0].product &amp;&amp; dataLayer[0].product.discount) {\n        s.events = s.apl(s.events, &quot;event10=&quot; + Math.round(dataLayer[0].product.discount).toString(), &quot;,&quot;, 1);\n        } else if (window.jsonData &amp;&amp; jsonData.packageViewData &amp;&amp; jsonData.packageViewData.onlineDiscount) {\n        s.events = s.apl(s.events, &quot;event10=&quot; + Math.round(jsonData.packageViewData.onlineDiscount).toString(), &quot;,&quot;, 1);\n        }\n        */\n        \n        \n        // This is for event 38 (Revenue) \n        \n        if (window.tui &amp;&amp; tui.analytics &amp;&amp; tui.analytics.page &amp;&amp; tui.analytics.page.Sum) {\n        if (window.tui.analytics.page.bookingLevelCreditNoteDiscount &amp;&amp; (parseFloat(tui.analytics.page.bookingLevelCreditNoteDiscount) &gt; 0)) {\n          s.events = s.apl(s.events, &quot;event38=&quot; + (parseFloat(tui.analytics.page.Sum) + parseFloat(tui.analytics.page.bookingLevelCreditNoteDiscount)), &quot;,&quot;, 1);\n        } else {\n          s.events = s.events = s.apl(s.events, &quot;event38=&quot; + tui.analytics.page.Sum, &quot;,&quot;, 1);\n        }\n        } else if (window.dataLayer &amp;&amp; dataLayer[0] &amp;&amp; dataLayer[0].transactions &amp;&amp; dataLayer[0].transactions.total &amp;&amp; dataLayer[0].transactions.total.totalPrice) {\n        if (window.dataLayer[0].transactions.total.bookingLevelCreditNoteDiscount &amp;&amp; dataLayer[0].transactions.total.bookingLevelCreditNoteDiscount &gt; 0) {\n          s.events = s.apl(s.events, &quot;event38=&quot; + (dataLayer[0].transactions.total.totalPrice + dataLayer[0].transactions.total.bookingLevelCreditNoteDiscount), &quot;,&quot;, 1);\n        } else {\n          s.events = s.apl(s.events, &quot;event38=&quot; + dataLayer[0].transactions.total.totalPrice, &quot;,&quot;, 1);\n        }\n        } else if (window.dataLayer &amp;&amp; dataLayer[0] &amp;&amp; dataLayer[0].basket &amp;&amp; dataLayer[0].basket.price &amp;&amp; dataLayer[0].basket.price.totalPrice) {\n        if (window.dataLayer[0].basket.price.bookingLevelCreditNoteDiscount &amp;&amp; dataLayer[0].basket.price.bookingLevelCreditNoteDiscount &gt; 0) {\n          s.events = s.apl(s.events, &quot;event38=&quot; + (dataLayer[0].basket.price.totalPrice + dataLayer[0].basket.price.bookingLevelCreditNoteDiscount), &quot;,&quot;, 1);\n        } else {\n          s.events = s.apl(s.events, &quot;event38=&quot; + dataLayer[0].basket.price.totalPrice, &quot;,&quot;, 1);\n        }\n        } else if (window.dataLayer &amp;&amp; dataLayer[0] &amp;&amp; dataLayer[0].product &amp;&amp; dataLayer[0].product.currentPrice) {\n        s.events = s.apl(s.events, &quot;event38=&quot; + dataLayer[0].product.currentPrice, &quot;,&quot;, 1);\n        }\n        \n        // For Privacy\n        /* // moved, since this logic isn't relevant post-migration\n        try {\n        var privacyExperience = Bootstrapper.Cookies.get('TUI_ENSIGHTEN_PRIVACY_Experience');\n        if (privacyExperience !== 'C') {\n          if (window.gateway &amp;&amp; window.gateway.isInitialized &amp;&amp; String(Bootstrapper.gateway.getCookie('BANNER_VIEWED')) !== '1') {\n            s.events = s.apl(s.events, 'event107', ',', 1);\n          }\n        }\n        } catch (err) {\n        console.log('Ensighten:event107 not set');\n        }\n        */\n        \n        return s.events;\n        })(s.events)\n\t\n\t// Custom pageview event\n\ts.events = s.apl(s.events,&quot;event3&quot;,&quot;,&quot;,1);\n\t\n    // Time parting used for eVar 31 and 32\n\ttpA = s.getTimeParting('n','0');\n\ttpAh = tpA[1].split(':')[0];\n\tif(tpA[1].indexOf('PM')!=-1)\n\t{\n\t\tif(eval(tpAh) != 12)\n\t\ttpAh = eval(tpAh) + 12;\n\t}\n\tif (tpA[1].indexOf(&quot;AM&quot;) != -1) \n\tif (eval(tpAh) == 12) tpAh = &quot;0&quot;;\n\ttmAm = tpA[0].split(':')[1];\n\ttmAm = tmAm.replace(/\\D/g, '');\n\t\n\n\t/* Performance Timing Called */\n\ts.performanceTiming();\n    /*    \n    if (s.linkType === 'e') {\n        var pt = (window.Bootstrapper.PTE &amp;&amp; window.Bootstrapper.PTE.performanceTimings &amp;&amp; window.Bootstrapper.PTE.performanceTimings.get ? window.Bootstrapper.PTE.performanceTimings.get(true) : ''),\n            timingEvents = ['980', '981', '982', '983', '984', '985', '986', '987', '988', '989', '990'];\n\n        if (pt) {\n            pt = pt.split('|');\n            s.linkTrackVars = s.apl(s.linkTrackVars, 'events', ',', 1);\n\n            for (var i = 0; i &lt; pt.length; i++) {\n                if ((i &lt; 9) || pt[i] &gt; 0) {\n                    s.events = s.apl(s.events, 'event' + timingEvents[i] + '=' + pt[i], ',', 1);\n                    s.linkTrackEvents = s.apl(s.linkTrackEvents, 'event' + timingEvents[i], ',', 1);\n                }\n            }\n            s.events = s.apl(s.events, 'event1000', ',', 1);\n        }\n        else {\n            for (var i = 0; i &lt; timingEvents.length; i++) {\n                var regex = new RegExp('event' + timingEvents[i] + ',?', 'g');\n                s.linkTrackEvents = s.linkTrackEvents.replace(regex, '');\n            }\n        }\n    }\n\t*/\n    /* If GSA Internal search term exists then fire search event*/\n\tif(s.eVar8!==&quot;&quot;){\n        s.events = s.apl(s.events,&quot;event1&quot;,&quot;,&quot;,1);\n\t}\n\n\ts.eVar31 = tpAh;\n\ts.eVar32 = tpA[2];\n\t\n    //Note: IE browsers can be in only visitor's local time\n    s.eVar7 = getTimeParting2(&quot;Europe/London&quot;);\t\n\n    // Prod View event initiates time to complete calculation\n\tif(s.events.indexOf('prodView')&gt;-1)\n        s.eVar34='start';\n\n    // Purchase event finishes time to complete calculation \n\tif(s.events.indexOf('purchase')&gt;-1)\n        s.eVar34='stop';\n\n    // Time To Complete Checkout\n\ts.eVar34 = s.getTimeToComplete(s.eVar34,'ttc',0);\n\n    // New or Repeat\n\ts.eVar35 = s.getNewRepeat();\n\n    // Days Since Last Visit\n\ts.eVar36 = s.getDaysSinceLastVisit('s_lv');\n\n    // Page URL\n\t//.prop38 = s.eVar38 = document.location.host + document.location.pathname;\n\t\n\t// Previous Page URL eVar\n\ts.eVar159 = s.getPreviousValue(s.eVar38,'gpv_pn');\n\t\n\t// Previous Page ID eVar\n\ts.eVar160 = s.getPreviousValue(s.eVar45,'gpv_pn2');\n    \n    // Query String eVar\n\tvar url_split = document.URL.split('?')[1];\n\tif(typeof url_split != 'undefined')\n\ts.eVar39 =  url_split;\n\n    // Minute of hour eVar\n\ts.eVar40 = tmAm;\n\n    // User Agent eVar\n\t//s.eVar41 =&quot;D=User-Agent&quot;;\n\n    // Marketing Cloud Visitor ID eVar\n\tif(typeof visitor != 'undefined')\n\ts.eVar44 = visitor.getMarketingCloudVisitorID();\n\n    // Brand\n\t//s.eVar48 = s.prop48 = brand; \n    \n    \n    // Page Depth Tracking - Action Depth Test was previously defined in base code\n    s.ActionDepthTest = true;\n    if (s.ActionDepthTest) {\n      s.eVar75 = s.getActionDepthVisitor(&quot;s_depth&quot;);\n      s.eVar76 = s.getActionDepth('s_depth_visit');\n      s.ActionDepthTest = false;\n    }\n\t\n\t//Time Stamp \n\n\ts.eVar77 = startTime();\n\n}\n\ns.doPlugins=s_doPlugins;\n\n\n  /*\n   * Plugin: getActionDepth v1.0 - Returns the current\n   * page number of the visit\n   */\n  s.getActionDepth = new Function(&quot;c&quot;, &quot;&quot; + &quot;var s=this,v=1,t=new Date;t.setTime(t.getTime()+1800000);&quot; + &quot;if(!s.c_r(c)){v=1}if(s.c_r(c)){v=s.c_r(c);v++}&quot; + &quot;if(!s.c_w(c,v,t)){s.c_w(c,v,0)}return v;&quot;);\n\n  /*\n   * Plugin: getActionDepth v1.0 - Returns the current\n   * page number of the visit\n   */\n  s.getActionDepthVisitor = new Function(&quot;c&quot;, &quot;&quot; + &quot;var s=this,v,t=new Date;t.setFullYear(t.getFullYear()+2);&quot; + &quot;if(!s.c_r(c)){v=1}if(s.c_r(c)){v=s.c_r(c);v++}&quot; + &quot;if(!s.c_w(c,v,t)){s.c_w(c,v,0)}return v;&quot;);\n \n \n// Used for Timestamp eVar\nfunction checkTime(i) {\n    if (i &lt; 10) {\n        i = &quot;0&quot; + i;\n    }\nreturn i;\n}\n\nfunction startTime() {\n    var today = new Date();\n    var h = today.getHours();\n    var m = today.getMinutes();\n    var s = today.getSeconds();\n    // add a zero in front of numbers&lt;10\n    m = checkTime(m);\n    s = checkTime(s);\n    h = checkTime(h);\n\treturn h + &quot;:&quot; + m + &quot;:&quot; + s;\n}\n\n/********************************************************************\n *\n * Main Plug-in code (should be in Plug-ins section)\n *\n *******************************************************************/\n/* Plugin: Performance Timing Tracking - 0.1 BETA */\ns.performanceTiming = function(v){\n    var s=this;\n    if(v) s.ptv=v;\n    if(typeof performance!='undefined'){\n        if(performance.timing.loadEventEnd==0){\n            s.pi=setInterval(function(){s.performanceWrite()},250);\n        }\n        if(!s.ptc||s.linkType=='e'){\n            s.performanceRead();\n        }\n        else{s.rfe();\n        s[s.ptv]='';\n        }\n     }\n};\n\ns.performanceWrite = function(){\n    var s=this;\n    if(performance.timing.loadEventEnd&gt;0)clearInterval(s.pi);\n    try{\n        if(s.c_r('s_ptc')==''&amp;&amp;performance.timing.loadEventEnd&gt;0){\n            try{\n                var pt=performance.timing;\n                var pta='';\n                pta=s.performanceCheck(pt.fetchStart,pt.navigationStart);\n                pta+='^^'+s.performanceCheck(pt.domainLookupStart,pt.fetchStart);\n                pta+='^^'+s.performanceCheck(pt.domainLookupEnd,pt.domainLookupStart);\n                pta+='^^'+s.performanceCheck(pt.connectEnd,pt.connectStart);\n                pta+='^^'+s.performanceCheck(pt.responseStart,pt.connectEnd); \n                pta+='^^'+s.performanceCheck(pt.responseEnd,pt.responseStart);\n                pta+='^^'+s.performanceCheck(pt.loadEventStart,pt.domLoading);\n                pta+='^^'+s.performanceCheck(pt.loadEventEnd,pt.loadEventStart);\n                pta+='^^'+s.performanceCheck(pt.loadEventEnd,pt.navigationStart);\n\t\t\t\tpta+='^^'+s.performanceCheck(performance.getEntriesByType('paint')[0].startTime,0); // Added for First Paint Metric\n\t\t\t\tpta+='^^'+s.performanceCheck(performance.getEntriesByType('paint')[1].startTime,0); // Added for First Contentful Paint Metric\n                s.c_w('s_ptc',pta);\n                    if(sessionStorage&amp;&amp;navigator.cookieEnabled&amp;&amp;s.ptv!='undefined'){\n                        var pe=performance.getEntries();\n                        var tempPe='';\n                        for(var i=0;i&lt;pe.length;i++){\n                            tempPe+='!';tempPe+=pe[i].name.indexOf('?')&gt;-1?pe[i].name.split('?')[0]:pe[i].name;\n                            tempPe+='|'+(Math.round(pe[i].startTime)/1000).toFixed(1)+'|'+(Math.round(pe[i].duration)/1000).toFixed(1)+'|'+pe[i].initiatorType;}\n                            sessionStorage.setItem('s_pec',tempPe);\n                    }\n            }\n            catch(err){\n                return;\n            }\n        }\n    }\n    catch(err){\n        return;\n    }\n};\ns.performanceCheck = function(a,b){\n    if(a&gt;=0&amp;&amp;b&gt;=0){\n        if((a-b)&lt;60000&amp;&amp;((a-b)&gt;=0)){\n            return((a-b)/1000).toFixed(2);\n        }\n        else{\n            return 600;\n        }\n    }\n};\ns.performanceRead = function(){\n    var s=this;\n    if(performance.timing.loadEventEnd&gt;0)clearInterval(s.pi);\n    var cv=s.c_r('s_ptc');\n    if(s.pte){\n        var ela=s.pte.split(',');\n    }\n    if(cv!=''){\n        var cva=s.split(cv,'^^');\n        if(cva[1]!=''){\n            for(var x=0;x&lt;(ela.length-1);x++){\n                s.events=s.apl(s.events,ela[x]+'='+cva[x],',',2);\n            }\n        }\n        s.events=s.apl(s.events,ela[ela.length-1],',',2);\n    }\n    s.linkTrackEvents=s.apl(s.linkTrackEvents,s.pte,',',2);\n    s.c_w('s_ptc','',0);\n    if(sessionStorage&amp;&amp;navigator.cookieEnabled&amp;&amp;s.ptv!='undefined'){\n        s[s.ptv]=sessionStorage.getItem('s_pec');\n        sessionStorage.setItem('s_pec','',0);\n    }\n    else{\n        s[s.ptv]='sessionStorage Unavailable';\n    }\n    s.ptc=true;\n}\n\ns.rfe = function(){\n    var s=this;\n    var ea=s.split(s.events,',');\n    var pta=s.split(s.pte,',');\n    try{\n        for(x in pta){\n            s.events=s.rfl(s.events,pta[x]);\n            s.contextData['events']=s.events;\n        }\n    }\n    catch(e){\n        return;\n    }\n}\n\ns.rfl = function(l,v,d1,d2,ku){\n\tvar s=this,\n\t\tR=new Array(),\n\t\tC='',\n\t\td1=!d1?',':d1,\n\t\td2=!d2?',':d2,\n\t\tku=!ku?0:1;\n\tif(!l)return'';\n\tL=l.split(d1);\n\tfor(i=0;i&lt;L.length;i++){\n\t\tif(L[i].indexOf(':')&gt;-1){ // remove serialisation to get just the event number\n\t\t\tC=L[i].split(':');\n\t\t\tC[1]=C[0]+':'+C[1];\n\t\t\tL[i]=C[0];\n\t\t}\n\t\tif(L[i].indexOf('=')&gt;-1){ // remove numeric event to get just the event number\n\t\t\tC=L[i].split('=');\n\t\t\tC[1]=C[0]+'='+C[1];\n\t\t\tL[i]=C[0];\n\t\t}\n\t\tif(L[i]!=v&amp;&amp;C){ // if it wasn't a duplicate and the variable had extras\n\t\t\tR.push(C[1])\n\t\t}\n\t\telse if(L[i]!=v){ // if it was a duplicate\n\t\t\tR.push(L[i])\n\t\t}\n\t\telse if(L[i]==v&amp;&amp;ku){\n\t\t\tku=0;\n\t\t\tif(C){\n\t\t\t\tR.push(C[1])\n\t\t\t}\n\t\t\telse {\n\t\t\t\tR.push(L[i])\n\t\t\t}\n\t\t}\n\t\tC=''; // clear it back out\n\t}\n\treturn s.join(R,{delim:d2})\n}\n\n\n /* Plugin: Performance Timing Tracking - 0.11 BETA */\n /*\ns.performanceTiming=new Function(&quot;v&quot;,&quot;var s=this;if(v)s.ptv=v;if(typeof performance!='undefined'){if(performance.timing.loadEventEnd==0){s.pi=setInterval(function(){s.performanceWrite()},250);}if(!s.ptc||s.linkType=='e'){s.performanceRead();}else{s.rfe();s[s.ptv]='';}}&quot;);\ns.performanceWrite=new Function(&quot;&quot;,&quot;var s=this;if(performance.timing.loadEventEnd&gt;0)clearInterval(s.pi);try{if(s.c_r('s_ptc')==''&amp;&amp;performance.timing.loadEventEnd&gt;0){try{var pt=performance.timing;var pta='';pta=s.performanceCheck(pt.fetchStart,pt.navigationStart);pta+='^^'+s.performanceCheck(pt.domainLookupStart,pt.fetchStart);pta+='^^'+s.performanceCheck(pt.domainLookupEnd,pt.domainLookupStart);pta+='^^'+s.performanceCheck(pt.connectEnd,pt.connectStart);pta+='^^'+s.performanceCheck(pt.responseStart,pt.connectEnd);pta+='^^'+s.performanceCheck(pt.responseEnd,pt.responseStart);pta+='^^'+s.performanceCheck(pt.loadEventStart,pt.domLoading);pta+='^^'+s.performanceCheck(pt.loadEventEnd,pt.loadEventStart);pta+='^^'+s.performanceCheck(pt.loadEventEnd,pt.navigationStart);pta+='^^'+s.performanceCheck(performance.getEntriesByType('paint')[0].startTime,0);pta+='^^'+s.performanceCheck(performance.getEntriesByType('paint')[1].startTime,0);s.c_w('s_ptc',pta);if(sessionStorage&amp;&amp;navigator.cookieEnabled&amp;&amp;s.ptv!='undefined'){var pe=performance.getEntries();var tempPe='';for(var i=0;i&lt;pe.length;i++){tempPe+='!';tempPe+=pe[i].name.indexOf('?')&gt;-1?pe[i].name.split('?')[0]:pe[i].name;tempPe+='|'+(Math.round(pe[i].startTime)/1000).toFixed(1)+'|'+(Math.round(pe[i].duration)/1000).toFixed(1)+'|'+pe[i].initiatorType;}sessionStorage.setItem('s_pec',tempPe);}}catch(err){return;}}}catch(err){return;}&quot;);\ns.performanceCheck=new Function(&quot;a&quot;,&quot;b&quot;,&quot;if(a&gt;=0&amp;&amp;b&gt;=0){if((a-b)&lt;60000&amp;&amp;((a-b)&gt;=0)){return((a-b)/1000).toFixed(2);}else{return 600;}}&quot;);\ns.performanceRead=new Function(&quot;&quot;,&quot;var s=this;if(performance.timing.loadEventEnd&gt;0)clearInterval(s.pi);var cv=s.c_r('s_ptc');if(s.pte){var ela=s.pte.split(',');}if(cv!=''){var cva=s.split(cv,'^^');if(cva[1]!=''){for(var x=0;x&lt;(ela.length-1);x++){s.events=s.apl(s.events,ela[x]+'='+cva[x],',',2);}}s.events=s.apl(s.events,ela[ela.length-1],',',2);}s.linkTrackEvents=s.apl(s.linkTrackEvents,s.pte,',',2);s.c_w('s_ptc','',0);if(sessionStorage&amp;&amp;navigator.cookieEnabled&amp;&amp;s.ptv!='undefined'){s[s.ptv]=sessionStorage.getItem('s_pec');sessionStorage.setItem('s_pec','',0);}else{s[s.ptv]='sessionStorage Unavailable';}s.ptc=true;&quot;),s.rfe=new Function(&quot;&quot;,&quot;var s=this;var ea=s.split(s.events,',');var pta=s.split(s.pte,',');try{for(x in pta){s.events=s.rfl(s.events,pta[x]);s.contextData['events']=s.events;}}catch(e){return;}&quot;),s.rfl=new Function(&quot;l&quot;,&quot;v&quot;,&quot;d1&quot;,&quot;d2&quot;,&quot;ku&quot;,&quot;var s=this,R=new Array(),C='',d1=!d1?',':d1,d2=!d2?',':d2,ku=!ku?0:1;if(!l)return'';L=l.split(d1);for(i=0;i&lt;L.length;i++){if(L[i].indexOf(':')&gt;-1){C=L[i].split(':');C[1]=C[0]+':'+C[1];L[i]=C[0];}if(L[i].indexOf('=')&gt;-1){C=L[i].split('=');C[1]=C[0]+'='+C[1];L[i]=C[0];}if(L[i]!=v&amp;&amp;C)R.push(C[1]);else if(L[i]!=v)R.push(L[i]);else if(L[i]==v&amp;&amp;ku){ku=0;if(C)R.push(C[1]);else R.push(L[i]);}C='';}return s.join(R,{delim:d2})&quot;);\n*/\n /* s.join: 1.0 - Joins an array into a string\n */\ns.join=new Function(&quot;v&quot;,&quot;p&quot;,&quot;&quot;\n+&quot;var s=this;var f,b,d,w;if(p){f=p.front?p.front:'';b=p.back?p.back:'&quot;\n+&quot;';d=p.delim?p.delim:'';w=p.wrap?p.wrap:'';}var str='';for(var x=0;x&quot;\n+&quot;&lt;v.length;x++){if(typeof(v[x])=='object')str+=s.join(v[x],p);else s&quot;\n+&quot;tr+=w+v[x]+w;if(x&lt;v.length-1)str+=d;}return f+str+b;&quot;);\n \n/********************************************************************\n *\n * Supporting functions that may be shared between plug-ins\n *\n *******************************************************************/\n\n//Europe\ns._tpDST = { \n\t2012:'3/25,10/28', \n\t2013:'3/31,10/27', \n\t2014:'3/30,10/26', \n\t2015:'3/29,10/25', \n\t2016:'3/27,10/30', \n\t2017:'3/26,10/29', \n\t2018:'3/25,10/28', \n\t2019:'3/31,10/27',\n\t2020:'3/29,10/25',\n\t2021:'3/28,10/31'\n};\n\n\n/*\n * Plugin: getPreviousValue_v1.0 - return previous value of designated\n *   variable (requires split utility)\n */\ns.getPreviousValue=new Function(&quot;v&quot;,&quot;c&quot;,&quot;el&quot;,&quot;&quot;\n+&quot;var s=this,t=new Date,i,j,r='';t.setTime(t.getTime()+1800000);if(el&quot;\n+&quot;){if(s.events){i=s.split(el,',');j=s.split(s.events,',');for(x in i&quot;\n+&quot;){for(y in j){if(i[x]==j[y]){if(s.c_r(c)) r=s.c_r(c);v?s.c_w(c,v,t)&quot;\n+&quot;:s.c_w(c,'no value',t);return r}}}}}else{if(s.c_r(c)) r=s.c_r(c);v?&quot;\n+&quot;s.c_w(c,v,t):s.c_w(c,'no value',t);return r}&quot;);\n\n\n/*\n * Plugin: getTimeParting 3.3\n */\ns.getTimeParting=new Function(&quot;h&quot;,&quot;z&quot;,&quot;&quot;\n+&quot;var s=this,od;od=new Date('1/1/2000');if(od.getDay()!=6||od.getMont&quot;\n+&quot;h()!=0){return'Data Not Available';}else{var H,M,D,W,U,ds,de,tm,tt,&quot;\n+&quot;da=['Sunday','Monday','Tuesday','Wednesday','Thursday','Friday','Sa&quot;\n+&quot;turday'],d=new Date(),a=[];z=z?z:0;z=parseFloat(z);if(s._tpDST){var&quot;\n+&quot; dso=s._tpDST[d.getFullYear()].split(/,/);ds=new Date(dso[0]+'/'+d.&quot;\n+&quot;getFullYear());de=new Date(dso[1]+'/'+d.getFullYear());if(h=='n'&amp;&amp;d&quot;\n+&quot;&gt;ds&amp;&amp;d&lt;de){z=z+1;}else if(h=='s'&amp;&amp;(d&gt;de||d&lt;ds)){z=z+1;}}d=d.getTime&quot;\n+&quot;()+(d.getTimezoneOffset()*60000);d=new Date(d+(3600000*z));H=d.getH&quot;\n+&quot;ours();M=d.getMinutes();M=(M&lt;10)?'0'+M:M;D=d.getDay();U='AM';W='Wee&quot;\n+&quot;kday';if(H&gt;=12){U='PM';H=H-12;}if(H==0){H=12;}if(D==6||D==0){W='Wee&quot;\n+&quot;kend';}D=da[D];tm=H+':'+M+U;tt=H+':'+((M&gt;30)?'30':'00')+U;a=[tm,tt,&quot;\n+&quot;D,W];return a;}&quot;);\n\n/* Adobe Consulting Plugin: getTimeParting v6.2 (No Prerequisites Needed) */\n/* Changed name from getTimeParting to getTimeParting2 for parallel testing of v6.2 with v3.3 */\nvar getTimeParting2 = function(a) {\n  a = document.documentMode ? void 0 : a || &quot;Etc/GMT&quot;;\n  a = (new Date).toLocaleDateString(&quot;en-US&quot;, {\n    timeZone: a,\n    minute: &quot;numeric&quot;,\n    hour: &quot;numeric&quot;,\n    weekday: &quot;long&quot;,\n    day: &quot;numeric&quot;,\n    year: &quot;numeric&quot;,\n    month: &quot;long&quot;\n  });\n  a = /([a-zA-Z]+).*?([a-zA-Z]+).*?([0-9]+).*?([0-9]+)(.*?)([0-9])(.*)/.exec(a);\n  return &quot;year=&quot; + a[4] + &quot; | month=&quot; + a[2] + &quot; | date=&quot; + a[3] + &quot; | day=&quot; + a[1] + &quot; | time=&quot; + (a[6] + a[7])\n};\n\n/*\n * Plugin: getNewRepeat 1.2 - Returns whether user is new or repeat\n */\ns.getNewRepeat=new Function(&quot;d&quot;,&quot;cn&quot;,&quot;&quot;\n+&quot;var s=this,e=new Date(),cval,sval,ct=e.getTime();d=d?d:30;cn=cn?cn:&quot;\n+&quot;'s_nr';e.setTime(ct+d*24*60*60*1000);cval=s.c_r(cn);if(cval.length=&quot;\n+&quot;=0){s.c_w(cn,ct+'-New',e);return'New';}sval=s.split(cval,'-');if(ct&quot;\n+&quot;-sval[0]&lt;30*60*1000&amp;&amp;sval[1]=='New'){s.c_w(cn,ct+'-New',e);return'N&quot;\n+&quot;ew';}else{s.c_w(cn,ct+'-Repeat',e);return'Repeat';}&quot;);\n\n/*\n * Utility Function: split v1.5 (JS 1.0 compatible)\n */\ns.split=new Function(&quot;l&quot;,&quot;d&quot;,&quot;&quot;\n+&quot;var i,x=0,a=new Array;while(l){i=l.indexOf(d);i=i&gt;-1?i:l.length;a[x&quot;\n+&quot;++]=l.substring(0,i);l=l.substring(i+d.length);}return a&quot;);\n\n/*\n * Plugin: getValOnce_v1.11\n */\ns.getValOnce=new Function(&quot;v&quot;,&quot;c&quot;,&quot;e&quot;,&quot;t&quot;,&quot;&quot;\n+&quot;var s=this,a=new Date,v=v?v:'',c=c?c:'s_gvo',e=e?e:0,i=t=='m'?6000&quot;\n+&quot;0:86400000,k=s.c_r(c);if(v){a.setTime(a.getTime()+e*i);s.c_w(c,v,e&quot;\n+&quot;==0?0:a);}return v==k?'':v&quot;);\n\n/********************************************************************\n *\n * Main Plug-in code (should be in Plug-ins section)\n *\n *******************************************************************/\n \n/*\n * Plugin: Days since last Visit 1.1.H - capture time from last visit\n */\ns.getDaysSinceLastVisit=new Function(&quot;c&quot;,&quot;&quot;\n+&quot;var s=this,e=new Date(),es=new Date(),cval,cval_s,cval_ss,ct=e.getT&quot;\n+&quot;ime(),day=24*60*60*1000,f1,f2,f3,f4,f5;e.setTime(ct+3*365*day);es.s&quot;\n+&quot;etTime(ct+30*60*1000);f0='Cookies Not Supported';f1='First Visit';f&quot;\n+&quot;2='More than 30 days';f3='More than 7 days';f4='Less than 7 days';f&quot;\n+&quot;5='Less than 1 day';cval=s.c_r(c);if(cval.length==0){s.c_w(c,ct,e);&quot;\n+&quot;s.c_w(c+'_s',f1,es);}else{var d=ct-cval;if(d&gt;30*60*1000){if(d&gt;30*da&quot;\n+&quot;y){s.c_w(c,ct,e);s.c_w(c+'_s',f2,es);}else if(d&lt;30*day+1 &amp;&amp; d&gt;7*day&quot;\n+&quot;){s.c_w(c,ct,e);s.c_w(c+'_s',f3,es);}else if(d&lt;7*day+1 &amp;&amp; d&gt;day){s.&quot;\n+&quot;c_w(c,ct,e);s.c_w(c+'_s',f4,es);}else if(d&lt;day+1){s.c_w(c,ct,e);s.c&quot;\n+&quot;_w(c+'_s',f5,es);}}else{s.c_w(c,ct,e);cval_ss=s.c_r(c+'_s');s.c_w(c&quot;\n+&quot;+'_s',cval_ss,es);}}cval_s=s.c_r(c+'_s');if(cval_s.length==0) retur&quot;\n+&quot;n f0;else if(cval_s!=f1&amp;&amp;cval_s!=f2&amp;&amp;cval_s!=f3&amp;&amp;cval_s!=f4&amp;&amp;cval_s&quot;\n+&quot;!=f5) return '';else return cval_s;&quot;);\n\n/********************************************************************\n *\n * Main Plug-in code (should be in Plug-ins section)\n *\n *******************************************************************/\n/*\n * Plugin: getTimeToComplete 0.4 - return the time from start to stop\n */\ns.getTimeToComplete=new Function(&quot;v&quot;,&quot;cn&quot;,&quot;e&quot;,&quot;&quot;\n+&quot;var s=this,d=new Date,x=d,k;if(!s.ttcr){e=e?e:0;if(v=='start'||v=='&quot;\n+&quot;stop')s.ttcr=1;x.setTime(x.getTime()+e*86400000);if(v=='start'){s.c&quot;\n+&quot;_w(cn,d.getTime(),e?x:0);return '';}if(v=='stop'){k=s.c_r(cn);if(!s&quot;\n+&quot;.c_w(cn,'',d)||!k)return '';v=(d.getTime()-k)/1000;var td=86400,th=&quot;\n+&quot;3600,tm=60,r=5,u,un;if(v&gt;td){u=td;un='days';}else if(v&gt;th){u=th;un=&quot;\n+&quot;'hours';}else if(v&gt;tm){r=2;u=tm;un='minutes';}else{r=.2;u=1;un='sec&quot;\n+&quot;onds';}v=v*r/u;return (Math.round(v)/r)+' '+un;}}return '';&quot;);\n\n\n/*\n * Plugin Utility: apl v1.1\n */\ns.apl=new Function(&quot;l&quot;,&quot;v&quot;,&quot;d&quot;,&quot;u&quot;,&quot;&quot;\n+&quot;var s=this,m=0;if(!l)l='';if(u){var i,n,a=s.split(l,d);for(i=0;i&lt;a.&quot;\n+&quot;length;i++){n=a[i];m=m||(u==1?(n==v):(n.toLowerCase()==v.toLowerCas&quot;\n+&quot;e()));}}if(!m)l=l?l+d+v:v;return l&quot;);\n\n\n/************************** CONFIG SECTION END**************************/\n\n\n/*\n==========START MEDIA MODULE==========\nThe Media Module is required to implement Adobe Analytics Video Milestone Tracking\n*/\n\nfunction AppMeasurement_Module_Media(q){var b=this;b.s=q;q=window;q.s_c_in||(q.s_c_il=[],q.s_c_in=0);b._il=q.s_c_il;b._in=q.s_c_in;b._il[b._in]=b;q.s_c_in++;b._c=&quot;s_m&quot;;b.list=[];b.open=function(d,c,e,k){var f={},a=new Date,l=&quot;&quot;,g;c||(c=-1);if(d&amp;&amp;e){b.list||(b.list={});b.list[d]&amp;&amp;b.close(d);k&amp;&amp;k.id&amp;&amp;(l=k.id);if(l)for(g in b.list)!Object.prototype[g]&amp;&amp;b.list[g]&amp;&amp;b.list[g].R==l&amp;&amp;b.close(b.list[g].name);f.name=d;f.length=c;f.offset=0;f.e=0;f.playerName=b.playerName?b.playerName:e;f.R=l;f.C=0;f.a=0;f.timestamp=\nMath.floor(a.getTime()/1E3);f.k=0;f.u=f.timestamp;f.c=-1;f.n=&quot;&quot;;f.g=-1;f.D=0;f.I={};f.G=0;f.m=0;f.f=&quot;&quot;;f.B=0;f.L=0;f.A=0;f.F=0;f.l=!1;f.v=&quot;&quot;;f.J=&quot;&quot;;f.K=0;f.r=!1;f.H=&quot;&quot;;f.complete=0;f.Q=0;f.p=0;f.q=0;b.list[d]=f}};b.openAd=function(d,c,e,k,f,a,l,g){var h={};b.open(d,c,e,g);if(h=b.list[d])h.l=!0,h.v=k,h.J=f,h.K=a,h.H=l};b.M=function(d){var c=b.list[d];b.list[d]=0;c&amp;&amp;c.monitor&amp;&amp;clearTimeout(c.monitor.interval)};b.close=function(d){b.i(d,0,-1)};b.play=function(d,c,e,k){var f=b.i(d,1,c,e,k);f&amp;&amp;!f.monitor&amp;&amp;\n(f.monitor={},f.monitor.update=function(){1==f.k&amp;&amp;b.i(f.name,3,-1);f.monitor.interval=setTimeout(f.monitor.update,1E3)},f.monitor.update())};b.click=function(d,c){b.i(d,7,c)};b.complete=function(d,c){b.i(d,5,c)};b.stop=function(d,c){b.i(d,2,c)};b.track=function(d){b.i(d,4,-1)};b.P=function(d,c){var e=&quot;a.media.&quot;,k=d.linkTrackVars,f=d.linkTrackEvents,a=&quot;m_i&quot;,l,g=d.contextData,h;c.l&amp;&amp;(e+=&quot;ad.&quot;,c.v&amp;&amp;(g[&quot;a.media.name&quot;]=c.v,g[e+&quot;pod&quot;]=c.J,g[e+&quot;podPosition&quot;]=c.K),c.G||(g[e+&quot;CPM&quot;]=c.H));c.r&amp;&amp;(g[e+&quot;clicked&quot;]=\n!0,c.r=!1);g[&quot;a.contentType&quot;]=&quot;video&quot;+(c.l?&quot;Ad&quot;:&quot;&quot;);g[&quot;a.media.channel&quot;]=b.channel;g[e+&quot;name&quot;]=c.name;g[e+&quot;playerName&quot;]=c.playerName;0&lt;c.length&amp;&amp;(g[e+&quot;length&quot;]=c.length);g[e+&quot;timePlayed&quot;]=Math.floor(c.a);0&lt;Math.floor(c.a)&amp;&amp;(g[e+&quot;timePlayed&quot;]=Math.floor(c.a));c.G||(g[e+&quot;view&quot;]=!0,a=&quot;m_s&quot;,b.Heartbeat&amp;&amp;b.Heartbeat.enabled&amp;&amp;(a=c.l?b.__primetime?&quot;mspa_s&quot;:&quot;msa_s&quot;:b.__primetime?&quot;msp_s&quot;:&quot;ms_s&quot;),c.G=1);c.f&amp;&amp;(g[e+&quot;segmentNum&quot;]=c.m,g[e+&quot;segment&quot;]=c.f,0&lt;c.B&amp;&amp;(g[e+&quot;segmentLength&quot;]=c.B),c.A&amp;&amp;0&lt;c.a&amp;&amp;(g[e+&quot;segmentView&quot;]=\n!0));!c.Q&amp;&amp;c.complete&amp;&amp;(g[e+&quot;complete&quot;]=!0,c.S=1);0&lt;c.p&amp;&amp;(g[e+&quot;milestone&quot;]=c.p);0&lt;c.q&amp;&amp;(g[e+&quot;offsetMilestone&quot;]=c.q);if(k)for(h in g)Object.prototype[h]||(k+=&quot;,contextData.&quot;+h);l=g[&quot;a.contentType&quot;];d.pe=a;d.pev3=l;var q,s;if(b.contextDataMapping)for(h in d.events2||(d.events2=&quot;&quot;),k&amp;&amp;(k+=&quot;,events&quot;),b.contextDataMapping)if(!Object.prototype[h]){a=h.length&gt;e.length&amp;&amp;h.substring(0,e.length)==e?h.substring(e.length):&quot;&quot;;l=b.contextDataMapping[h];if(&quot;string&quot;==typeof l)for(q=l.split(&quot;,&quot;),s=0;s&lt;q.length;s++)l=\nq[s],&quot;a.contentType&quot;==h?(k&amp;&amp;(k+=&quot;,&quot;+l),d[l]=g[h]):&quot;view&quot;==a||&quot;segmentView&quot;==a||&quot;clicked&quot;==a||&quot;complete&quot;==a||&quot;timePlayed&quot;==a||&quot;CPM&quot;==a?(f&amp;&amp;(f+=&quot;,&quot;+l),&quot;timePlayed&quot;==a||&quot;CPM&quot;==a?g[h]&amp;&amp;(d.events2+=(d.events2?&quot;,&quot;:&quot;&quot;)+l+&quot;=&quot;+g[h]):g[h]&amp;&amp;(d.events2+=(d.events2?&quot;,&quot;:&quot;&quot;)+l)):&quot;segment&quot;==a&amp;&amp;g[h+&quot;Num&quot;]?(k&amp;&amp;(k+=&quot;,&quot;+l),d[l]=g[h+&quot;Num&quot;]+&quot;:&quot;+g[h]):(k&amp;&amp;(k+=&quot;,&quot;+l),d[l]=g[h]);else if(&quot;milestones&quot;==a||&quot;offsetMilestones&quot;==a)h=h.substring(0,h.length-1),g[h]&amp;&amp;b.contextDataMapping[h+&quot;s&quot;][g[h]]&amp;&amp;(f&amp;&amp;(f+=&quot;,&quot;+b.contextDataMapping[h+\n&quot;s&quot;][g[h]]),d.events2+=(d.events2?&quot;,&quot;:&quot;&quot;)+b.contextDataMapping[h+&quot;s&quot;][g[h]]);g[h]&amp;&amp;(g[h]=0);&quot;segment&quot;==a&amp;&amp;g[h+&quot;Num&quot;]&amp;&amp;(g[h+&quot;Num&quot;]=0)}d.linkTrackVars=k;d.linkTrackEvents=f};b.i=function(d,c,e,k,f){var a={},l=(new Date).getTime()/1E3,g,h,q=b.trackVars,s=b.trackEvents,t=b.trackSeconds,u=b.trackMilestones,v=b.trackOffsetMilestones,w=b.segmentByMilestones,x=b.segmentByOffsetMilestones,p,n,r=1,m={},y;b.channel||(b.channel=b.s.w.location.hostname);if(a=d&amp;&amp;b.list&amp;&amp;b.list[d]?b.list[d]:0)if(a.l&amp;&amp;(t=b.adTrackSeconds,\nu=b.adTrackMilestones,v=b.adTrackOffsetMilestones,w=b.adSegmentByMilestones,x=b.adSegmentByOffsetMilestones),0&gt;e&amp;&amp;(e=1==a.k&amp;&amp;0&lt;a.u?l-a.u+a.c:a.c),0&lt;a.length&amp;&amp;(e=e&lt;a.length?e:a.length),0&gt;e&amp;&amp;(e=0),a.offset=e,0&lt;a.length&amp;&amp;(a.e=a.offset/a.length*100,a.e=100&lt;a.e?100:a.e),0&gt;a.c&amp;&amp;(a.c=e),y=a.D,m.name=d,m.ad=a.l,m.length=a.length,m.openTime=new Date,m.openTime.setTime(1E3*a.timestamp),m.offset=a.offset,m.percent=a.e,m.playerName=a.playerName,m.mediaEvent=0&gt;a.g?&quot;OPEN&quot;:1==c?&quot;PLAY&quot;:2==c?&quot;STOP&quot;:3==c?&quot;MONITOR&quot;:\n4==c?&quot;TRACK&quot;:5==c?&quot;COMPLETE&quot;:7==c?&quot;CLICK&quot;:&quot;CLOSE&quot;,2&lt;c||c!=a.k&amp;&amp;(2!=c||1==a.k)){f||(k=a.m,f=a.f);if(c){1==c&amp;&amp;(a.c=e);if((3&gt;=c||5&lt;=c)&amp;&amp;0&lt;=a.g&amp;&amp;(r=!1,q=s=&quot;None&quot;,a.g!=e)){h=a.g;h&gt;e&amp;&amp;(h=a.c,h&gt;e&amp;&amp;(h=e));p=u?u.split(&quot;,&quot;):0;if(0&lt;a.length&amp;&amp;p&amp;&amp;e&gt;=h)for(n=0;n&lt;p.length;n++)(g=p[n]?parseFloat(&quot;&quot;+p[n]):0)&amp;&amp;h/a.length*100&lt;g&amp;&amp;a.e&gt;=g&amp;&amp;(r=!0,n=p.length,m.mediaEvent=&quot;MILESTONE&quot;,a.p=m.milestone=g);if((p=v?v.split(&quot;,&quot;):0)&amp;&amp;e&gt;=h)for(n=0;n&lt;p.length;n++)(g=p[n]?parseFloat(&quot;&quot;+p[n]):0)&amp;&amp;h&lt;g&amp;&amp;e&gt;=g&amp;&amp;(r=!0,n=p.length,m.mediaEvent=\n&quot;OFFSET_MILESTONE&quot;,a.q=m.offsetMilestone=g)}if(a.L||!f){if(w&amp;&amp;u&amp;&amp;0&lt;a.length){if(p=u.split(&quot;,&quot;))for(p.push(&quot;100&quot;),n=h=0;n&lt;p.length;n++)if(g=p[n]?parseFloat(&quot;&quot;+p[n]):0)a.e&lt;g&amp;&amp;(k=n+1,f=&quot;M:&quot;+h+&quot;-&quot;+g,n=p.length),h=g}else if(x&amp;&amp;v&amp;&amp;(p=v.split(&quot;,&quot;)))for(p.push(&quot;&quot;+(0&lt;a.length?a.length:&quot;E&quot;)),n=h=0;n&lt;p.length;n++)if((g=p[n]?parseFloat(&quot;&quot;+p[n]):0)||&quot;E&quot;==p[n]){if(e&lt;g||&quot;E&quot;==p[n])k=n+1,f=&quot;O:&quot;+h+&quot;-&quot;+g,n=p.length;h=g}f&amp;&amp;(a.L=!0)}(f||a.f)&amp;&amp;f!=a.f&amp;&amp;(a.F=!0,a.f||(a.m=k,a.f=f),0&lt;=a.g&amp;&amp;(r=!0));(2&lt;=c||100&lt;=a.e)&amp;&amp;a.c&lt;e&amp;&amp;\n(a.C+=e-a.c,a.a+=e-a.c);if(2&gt;=c||3==c&amp;&amp;!a.k)a.n+=(1==c||3==c?&quot;S&quot;:&quot;E&quot;)+Math.floor(e),a.k=3==c?1:c;!r&amp;&amp;0&lt;=a.g&amp;&amp;3&gt;=c&amp;&amp;(t=t?t:0)&amp;&amp;a.a&gt;=t&amp;&amp;(r=!0,m.mediaEvent=&quot;SECONDS&quot;);a.u=l;a.c=e}if(!c||3&gt;=c&amp;&amp;100&lt;=a.e)2!=a.k&amp;&amp;(a.n+=&quot;E&quot;+Math.floor(e)),c=0,q=s=&quot;None&quot;,m.mediaEvent=&quot;CLOSE&quot;;7==c&amp;&amp;(r=m.clicked=a.r=!0);if(5==c||b.completeByCloseOffset&amp;&amp;(!c||100&lt;=a.e)&amp;&amp;0&lt;a.length&amp;&amp;e&gt;=a.length-b.completeCloseOffsetThreshold)r=m.complete=a.complete=!0;l=m.mediaEvent;&quot;MILESTONE&quot;==l?l+=&quot;_&quot;+m.milestone:&quot;OFFSET_MILESTONE&quot;==l&amp;&amp;(l+=\n&quot;_&quot;+m.offsetMilestone);a.I[l]?m.eventFirstTime=!1:(m.eventFirstTime=!0,a.I[l]=1);m.event=m.mediaEvent;m.timePlayed=a.C;m.segmentNum=a.m;m.segment=a.f;m.segmentLength=a.B;b.monitor&amp;&amp;4!=c&amp;&amp;b.monitor(b.s,m);b.Heartbeat&amp;&amp;b.Heartbeat.enabled&amp;&amp;0&lt;=a.g&amp;&amp;(r=!1);0==c&amp;&amp;b.M(d);r&amp;&amp;a.D==y&amp;&amp;(d={contextData:{}},d.linkTrackVars=q,d.linkTrackEvents=s,d.linkTrackVars||(d.linkTrackVars=&quot;&quot;),d.linkTrackEvents||(d.linkTrackEvents=&quot;&quot;),b.P(d,a),d.linkTrackVars||(d[&quot;!linkTrackVars&quot;]=1),d.linkTrackEvents||(d[&quot;!linkTrackEvents&quot;]=\n1),b.s.track(d),a.F?(a.m=k,a.f=f,a.A=!0,a.F=!1):0&lt;a.a&amp;&amp;(a.A=!1),a.n=&quot;&quot;,a.p=a.q=0,a.a-=Math.floor(a.a),a.g=e,a.D++)}return a};b.O=function(d,c,e,k,f){var a=0;if(d&amp;&amp;(!b.autoTrackMediaLengthRequired||c&amp;&amp;0&lt;c)){if(b.list&amp;&amp;b.list[d])a=1;else if(1==e||3==e)b.open(d,c,&quot;HTML5 Video&quot;,f),a=1;a&amp;&amp;b.i(d,e,k,-1,0)}};b.attach=function(d){var c,e,k;d&amp;&amp;d.tagName&amp;&amp;&quot;VIDEO&quot;==d.tagName.toUpperCase()&amp;&amp;(b.o||(b.o=function(c,a,d){var e,h;b.autoTrack&amp;&amp;(e=c.currentSrc,(h=c.duration)||(h=-1),0&gt;d&amp;&amp;(d=c.currentTime),b.O(e,h,a,\nd,c))}),c=function(){b.o(d,1,-1)},e=function(){b.o(d,1,-1)},b.j(d,&quot;play&quot;,c),b.j(d,&quot;pause&quot;,e),b.j(d,&quot;seeking&quot;,e),b.j(d,&quot;seeked&quot;,c),b.j(d,&quot;ended&quot;,function(){b.o(d,0,-1)}),b.j(d,&quot;timeupdate&quot;,c),k=function(){d.paused||d.ended||d.seeking||b.o(d,3,-1);setTimeout(k,1E3)},k())};b.j=function(b,c,e){b.attachEvent?b.attachEvent(&quot;on&quot;+c,e):b.addEventListener&amp;&amp;b.addEventListener(c,e,!1)};void 0==b.completeByCloseOffset&amp;&amp;(b.completeByCloseOffset=1);void 0==b.completeCloseOffsetThreshold&amp;&amp;(b.completeCloseOffsetThreshold=\n1);b.Heartbeat={};b.N=function(){var d,c;if(b.autoTrack&amp;&amp;(d=b.s.d.getElementsByTagName(&quot;VIDEO&quot;)))for(c=0;c&lt;d.length;c++)b.attach(d[c])};b.j(q,&quot;load&quot;,b.N)}\n\n/*\n==========END MEDIA MODULE==========\n*/\n\n\n/***** MEDIA MODULE CONFIGURATION FOR MILESTONE TRACKING START*****/\n\ns.loadModule(&quot;Media&quot;)\ns.Media.onLoad = function(s,m) {\n\ts.Media.autoTrack= false;\n\t/*Track Milestone 10%, 25%, 50%, 75%, 95%\n\t* Delete unwanted milestone if necessary\n\t*/\n\ts.Media.trackMilestones=&quot;10,25,50,75,95&quot;;\n\ts.Media.playerName= &quot;TUI Brightcove HTML5 Player&quot;;\n\ts.Media.segmentByMilestones = true;\n\ts.Media.trackUsingContextData = true;\n\t/* Add reserved context data variables as needed to populate default metrics\n\t*   a.media.progress10, a.media.progress25, a.media.progress50 ,a.media.progress75, a.media.progress95\n\t*\ta.media.friendlyname --&gt; to populate Video Name report\n\t*/\n\ts.Media.trackVars=&quot;contextData.a.media.progress10,contextData.a.media.progress25,contextData.a.media.progress50,contextData.a.media.progress75,contextData.a.media.progress95,contextData.a.media.friendlyname&quot;;\n};\n\n/*\n* USE MEDIA MONITOR TO SEND THE ADDITIONAL a.media.progressXX variables: needed as no processing rules are created by default to handle media.milestone\n*/\n\ns.Media.monitor = function (s,media){\n\t\n\t\t\n\t//Reset Variables\n\ts.contextData['a.media.progress10'] = s.contextData['a.media.progress25'] = s.contextData['a.media.progress50'] = s.contextData['a.media.progress75'] = s.contextData['a.media.progress95'] = s.contextData['a.media.friendlyname'] =  '';\n\t\n\ts.contextData['a.media.friendlyname'] = '' //assign custom friendly name if needed\n\t//if no custom friendly name\n\tif(!s.contextData['a.media.friendlyname']){\n\t\t//default to media.name\n\t\ts.contextData['a.media.friendlyname'] = media.name;\n\t}\n\t\n\t//If MILESTONE EVENT\n\tif(media.event==&quot;MILESTONE&quot;) {\n\t\t//Check which milestone has been reached: media.milestone\n\t\tswitch (media.milestone) {\n\t\t\t//When the 10% milestone is reached add a.media.progress10 to the Adobe Analytics request\n\t\t\tcase 10:\n\t\t\t\ts.contextData['a.media.progress10'] = true;\n\t\t\t\ts.Media.track(media.name);\n\t\t\t\tbreak;\n\t\t\t//When the 25% milestone is reached add a.media.progress25 to the Adobe Analytics request\n\t\t\tcase 25:\n\t\t\t\ts.contextData['a.media.progress25'] = true;\n\t\t\t\ts.Media.track(media.name);\n\t\t\t\tbreak;\n\t\t\t//When the 50% milestone is reached add a.media.progress50 to the Adobe Analytics request\n\t\t\tcase 50:\n\t\t\t\ts.contextData['a.media.progress50'] = true;\n\t\t\t\ts.Media.track(media.name);\n\t\t\t\tbreak;\n\t\t\t//When the 75% milestone is reached add a.media.progress75 to the Adobe Analytics request\n\t\t\tcase 75:\n\t\t\t\ts.contextData['a.media.progress75'] = true;\n\t\t\t\ts.Media.track(media.name);\n\t\t\t\tbreak;\n\t\t\t//When the 95% milestone is reached add a.media.progress95 to the Adobe Analytics request\n\t\t\tcase 95:\n\t\t\t\ts.contextData['a.media.progress95'] = true;\n\t\t\t\ts.Media.track(media.name);\n\t\t\t\tbreak;\n\t\t\t//When any other % milestone is reached do nothing\n\t\t\tdefault:\n\t\t\t\tbreak;\n\t\t}\n\t}\n}\n/***** MEDIA MODULE CONFIGURATION FOR MILESTONE TRACKING END*****/\n","promotedBy":"caleb.jaquith@tealium.com","promotedTimestamp":"202101191346","promotedDraftName":"Draft 1"},"3f3ef786b34d6dd716e1812c8b74a7a0e1f05aa5f3230588f6f5bcd00c6c8392":{"promotedTimestamp":"202101191346","promotedDraftName":"Draft 1","promotedBy":"caleb.jaquith@tealium.com","code":"// Performance Timing Events\ns.pte = 'event980,event981,event982,event983,event984,event985,event986,event987,event988,event989,event990,event1000';\n//[--------------------------- 1 to 8 ---------------------------][-- 9 --][- 10 -]\ns.ptc = false;\n\ns.usePlugins=true;\nfunction s_doPlugins(s) {\n\n    // Sets server\n\ts.server = document.location.host;\n\t\n\ts.events = (function ensightenAdobeEventLogic(existingEventString) {\n        s.events = existingEventString || ''\n        \n        var bookingReference = (window.tui &amp;&amp; tui.analytics &amp;&amp; tui.analytics.page &amp;&amp; tui.analytics.page.Tracsref ? tui.analytics.page.Tracsref : window.dataLayer &amp;&amp; dataLayer[0] &amp;&amp; dataLayer[0].transactions &amp;&amp; dataLayer[0].transactions.total &amp;&amp; dataLayer[0].transactions.total.transactionId ? dataLayer[0].transactions.total.transactionId : &quot;&quot;),\n        \n        totalPrice = (window.tui &amp;&amp; tui.analytics &amp;&amp; tui.analytics.page &amp;&amp; tui.analytics.page.Sum ? parseFloat(tui.analytics.page.Sum) : window.dataLayer &amp;&amp; dataLayer[0] &amp;&amp; dataLayer[0].transactions &amp;&amp; dataLayer[0].transactions.total &amp;&amp; dataLayer[0].transactions.total.totalPrice ? parseFloat(dataLayer[0].transactions.total.totalPrice) : 0),\n        \n        creditNoteDiscountValue = (window.tui &amp;&amp; tui.analytics &amp;&amp; tui.analytics.page &amp;&amp; tui.analytics.page.bookingLevelCreditNoteDiscount &amp;&amp; tui.analytics.page.bookingLevelCreditNoteDiscount != 'null' ? parseFloat(tui.analytics.page.bookingLevelCreditNoteDiscount) : window.dataLayer &amp;&amp; dataLayer[0] &amp;&amp; dataLayer[0].transactions &amp;&amp; dataLayer[0].transactions.total &amp;&amp; dataLayer[0].transactions.total.bookingLevelCreditNoteDiscount ? parseFloat(dataLayer[0].transactions.total.bookingLevelCreditNoteDiscount) : 0),\n        \n        creditNoteRefundValue = (window.tui &amp;&amp; tui.analytics &amp;&amp; tui.analytics.page &amp;&amp; tui.analytics.page.creditNoteRefundValue &amp;&amp; tui.analytics.page.creditNoteRefundValue != 'null' ? parseFloat(tui.analytics.page.creditNoteRefundValue) : window.dataLayer &amp;&amp; dataLayer[0] &amp;&amp; dataLayer[0].transactions &amp;&amp; dataLayer[0].transactions.total &amp;&amp; dataLayer[0].transactions.total.creditNoteRefundValue ? parseFloat(dataLayer[0].transactions.total.creditNoteRefundValue) : 0),\n        \n        onlineDiscount = (window.tui &amp;&amp; tui.analytics &amp;&amp; tui.analytics.page &amp;&amp; tui.analytics.page &amp;&amp; tui.analytics.page.Disc &amp;&amp; tui.analytics.page.Disc != 'null' ? parseFloat(tui.analytics.page.Disc) : window.dataLayer &amp;&amp; dataLayer[0] &amp;&amp; dataLayer[0].transactions &amp;&amp; dataLayer[0].transactions.total &amp;&amp; dataLayer[0].transactions.total.discount ? parseFloat(dataLayer[0].transactions.total.discount) : 0),\n        \n        bookingPax = (window.tui &amp;&amp; tui.analytics &amp;&amp; tui.analytics.page &amp;&amp; tui.analytics.page &amp;&amp; tui.analytics.page.Pax &amp;&amp; tui.analytics.page.Pax != 'null' ? parseInt(tui.analytics.page.Pax) : window.dataLayer &amp;&amp; dataLayer[0] &amp;&amp; dataLayer[0].transactions &amp;&amp; dataLayer[0].transactions.items &amp;&amp; dataLayer[0].transactions.items.quantity &amp;&amp; dataLayer[0].transactions.items.quantity.pax ? parseInt(dataLayer[0].transactions.items.quantity.pax) : 0),\n        \n        incentivePromoValue = incentivePromoDiscount();\n        \n        function incentivePromoDiscount() {\n        \n        if (window.dataLayer &amp;&amp; dataLayer[0] &amp;&amp; dataLayer[0].transactions &amp;&amp; dataLayer[0].transactions.total &amp;&amp; dataLayer[0].transactions.total.bookingLevelPromoCodes &amp;&amp; dataLayer[0].transactions.total.bookingLevelPromoCodes.length &gt; 0) {\n          var rgx = new RegExp('/CVRHC|CVRW20|CVRS21|CVRI|CVRM|CVRV/i', 'i');\n          var promoCodeArray = dataLayer[0].transactions.total.bookingLevelPromoCodes;\n          var result = 0;\n          for (i = 0; i &lt; promoCodeArray.length; i++) {\n            if (rgx.test(promoCodeArray[i].bookingLevelPromoCode)) {\n              result = promoCodeArray[i].bookingLevelPromoDiscount;\n            }\n          }\n          return result;\n        } else if (window.tui &amp;&amp; tui.analytics &amp;&amp; tui.analytics.page &amp;&amp; tui.analytics.page.IncentivePromoValue &amp;&amp; tui.analytics.page.IncentivePromoValue != 'null') {\n          return parseFloat(tui.analytics.page.IncentivePromoValue);\n        } else {\n          return 0;\n        }\n        }\n        \n        //Normal Bookflow &amp; LYP with same confirmation url\n        if ((document.URL.indexOf('/book/confirmation') !== -1 || document.URL.indexOf('/book/mobile/confirmation') !== -1 || document.URL.indexOf('/book/bookingConfirmation') !== -1) &amp;&amp; bookingReference &amp;&amp; typeof bookingReference === &quot;string&quot; &amp;&amp; bookingReference.length &gt; 5) {\n        if ((window.dataLayer &amp;&amp; dataLayer[0] &amp;&amp; dataLayer[0].transactions &amp;&amp; dataLayer[0].transactions.total &amp;&amp; dataLayer[0].transactions.total.isLockYourPrice == &quot;Yes&quot;) || (window.dataLayer &amp;&amp; dataLayer[0] &amp;&amp; dataLayer[0].page &amp;&amp; dataLayer[0].page.pageID == &quot;lockYourPriceConfirmationpage_react&quot;)) {\n          s.events = &quot;event78:&quot; + bookingReference + &quot;LYP&quot; // event serialisation with event78 (LYP Unconfirmed Booking)\n            +\n            &quot;,event80=&quot; + window.dataLayer[0].transactions.total.lockYourPriceValue + &quot;:&quot; + bookingReference + &quot;LYP&quot; + &quot;,event81=&quot; + totalPrice + &quot;:&quot; + bookingReference + &quot;LYP&quot;;\n        } else {\n          s.events = &quot;purchase&quot; + &quot;,event4=&quot; + (creditNoteDiscountValue &gt; 0 ? totalPrice + creditNoteDiscountValue : totalPrice) + &quot;,event5=&quot; + onlineDiscount + &quot;,event9=&quot; + bookingPax + &quot;,event150,event151,event152,event153,event154,event158,event159&quot; //added 158&amp;159 for PC Incentive \n            +\n            &quot;,event155=&quot; + creditNoteDiscountValue // Added for credit note launch\n            +\n            &quot;,event156=&quot; + creditNoteRefundValue // Added for credit note launch\n            +\n            &quot;,event157=&quot; + (creditNoteDiscountValue &gt; 0 ? totalPrice : 0) // Addded for credit note launch\n            +\n            &quot;,event160=&quot; + (creditNoteDiscountValue &gt; 0 ? totalPrice + creditNoteDiscountValue + incentivePromoValue : totalPrice); // multiple promocode - maintaining redemption code reporting\n        }\n        }\n        \n        //LYP mmb Bookflow (managemybooking/paymentconfirmation is the MMB confirmation page)\n        else if ((document.URL.indexOf('/managemybooking/paymentconfirmation') !== -1) &amp;&amp; window.dataLayer[0] &amp;&amp; dataLayer[0].transactions &amp;&amp; dataLayer[0].transactions.total &amp;&amp; bookingReference &amp;&amp; typeof bookingReference === &quot;string&quot; &amp;&amp; bookingReference.length &gt; 5 &amp;&amp; dataLayer[0].transactions.total.isLockYourPrice == &quot;Yes&quot;) {\n        s.events = &quot;purchase&quot; + &quot;,event4=&quot; + (creditNoteDiscountValue &gt; 0 ? totalPrice + creditNoteDiscountValue : totalPrice) + &quot;,event5=&quot; + onlineDiscount + &quot;,event9=&quot; + bookingPax + &quot;,event79&quot; // Lock Your Price confirmed booking\n          +\n          &quot;,event80=&quot; + (window.dataLayer[0].transactions.total.lockYourPriceValue * -1) + &quot;,event150,event151,event152,event153,event154,event158,event159&quot;; //added 158&amp;159 for PC Incentive\n        }\n        \n        //MMB Unpaid\n        else if (document.URL.indexOf('your-account/managemybooking/amendmentsuccess') !== -1 &amp;&amp; typeof window.tui.analytics.events != 'undefined' &amp;&amp; window.tui.analytics.events !== null) {\n        for (var i = 0; i &lt; window.tui.analytics.events.length; i++) {\n          if (window.tui.analytics.events[i].eventAction == 'MMB Unpaid') {\n            s.events = &quot;event301:&quot; + window.tui.analytics.events[i].eventSerialisationNumber;\n            /*\n            if(window.tui &amp;&amp; tui.analytics &amp;&amp; tui.analytics.page &amp;&amp; tui.analytics.page.bookingLevelPromoCode &amp;&amp; tui.analytics.page.bookingLevelPromoDiscount){\n               if(tui.analytics.page.bookingLevelPromoCode == 'CVRM'|| tui.analytics.page.bookingLevelPromoCode == 'CVRHC'){\n                s.events = s.apl(s.events,'event154=' + tui.analytics.page.bookingLevelPromoDiscount ,',',1);\n               }\n            }*/\n        \n            // Start\n            var dl = window.dataLayer\n            if (dl &amp;&amp; dl[0] &amp;&amp; dl[0].transactions &amp;&amp; dl[0].transactions.total) {\n              // If old object is shown - can be removed at a later date\n              if (dl[0].transactions.total.bookingLevelPromoDiscount &amp;&amp; typeof dl[0].transactions.total.bookingLevelPromoDiscount !== 'undefined') {\n                // Check for PC &amp; MMB/Booking Incentive\n                if (/CVRHC|CVRW20|CVRS21|CVRI|CVRM|CVRV/i.test(dl[0].transactions.total.bookingLevelPromoCode)) {\n                  // Programme Change Incentive\n                  if (/CVRHC|CVRW20|CVRS21/i.test(dl[0].transactions.total.bookingLevelPromoCode)) {\n                    s.events = s.apl(s.events, 'event158=' + Math.abs(dl[0].transactions.total.bookingLevelPromoDiscount), ',', 1);\n                  }\n                  // MMB/Booking Incentive\n                  if (/CVRI|CVRM|CVRV/i.test(dl[0].transactions.total.bookingLevelPromoCode)) {\n                    s.events = s.apl(s.events, 'event159=' + Math.abs(dl[0].transactions.total.bookingLevelPromoDiscount), ',', 1);\n                  }\n                } else {\n                  s.events = s.apl(s.events, 'event154=' + Math.abs(dl[0].transactions.total.bookingLevelPromoDiscount), ',', 1);\n                }\n                // Added to handle new promo code array\n              } else if (dl[0].transactions.total.bookingLevelPromoCodes &amp;&amp; dl[0].transactions.total.bookingLevelPromoCodes.length &gt; 0) {\n                var promoCodeArray = dl[0].transactions.total.bookingLevelPromoCodes;\n                for (i = 0; i &lt; promoCodeArray.length; i++) {\n        \n                  if (/CVRHC|CVRW20|CVRS21|CVRI|CVRM|CVRV/i.test(promoCodeArray[i].bookingLevelPromoCode)) {\n                    // Programme Change Incentive\n                    if (/CVRHC|CVRW20|CVRS21/i.test(promoCodeArray[i].bookingLevelPromoCode)) {\n                      s.events = s.apl(s.events, 'event158=' + Math.abs(promoCodeArray[i].bookingLevelPromoDiscount), ',', 1);\n                    }\n                    // MMB/Booking Incentive\n                    if (/CVRI|CVRM|CVRV/i.test(promoCodeArray[i].bookingLevelPromoCode)) {\n                      s.events = s.apl(s.events, 'event159=' + Math.abs(promoCodeArray[i].bookingLevelPromoDiscount), ',', 1);\n                    }\n                  } else {\n                    s.events = s.apl(s.events, 'event154=' + Math.abs(promoCodeArray[i].bookingLevelPromoDiscount), ',', 1);\n                  }\n                }\n              }\n              // For legacy data layer (only single promo code &amp; value)\t\n            } else if (window.tui &amp;&amp; tui.analytics &amp;&amp; tui.analytics.page) {\n              if (typeof tui.analytics.page.PromoValue !== 'undefined' &amp;&amp; tui.analytics.page.PromoValue !== 'null') {\n                if (/CVRHC|CVRW20|CVRS21/i.test(tui.analytics.page.PromoCode)) {\n                  s.events = s.apl(s.events, 'event158' + parseFloat(tui.analytics.page.PromoValue), ',', 1);\n                } else if (/CVRI|CVRM|CVRV/i.test(tui.analytics.page.PromoCode)) {\n                  s.events = s.apl(s.events, 'event159' + parseFloat(tui.analytics.page.PromoValue), ',', 1);\n                } else {\n                  s.events = s.apl(s.events, 'event154' + parseFloat(tui.analytics.page.PromoValue), ',', 1);\n                }\n              }\n            } //End\n          }\n        }\n        }\n        \n        //MMB Paid\n        else if (document.URL.indexOf('your-account/managemybooking/managepaymentconfirmation') !== -1 &amp;&amp; typeof window.tui.analytics.events != 'undefined' &amp;&amp; window.tui.analytics.events !== null) {\n        for (var i = 0; i &lt; window.tui.analytics.events.length; i++) {\n          if (window.tui.analytics.events[i].eventAction == 'MMB Paid') {\n            s.events = &quot;event302:&quot; + window.tui.analytics.events[i].eventSerialisationNumber;\n            /*\n            if(window.tui &amp;&amp; tui.analytics &amp;&amp; tui.analytics.page &amp;&amp; tui.analytics.page.bookingLevelPromoCode &amp;&amp; tui.analytics.page.bookingLevelPromoDiscount){\n               if(tui.analytics.page.bookingLevelPromoCode == 'CVRM'|| tui.analytics.page.bookingLevelPromoCode == 'CVRHC'){\n                s.events = s.apl(s.events,'event154=' + tui.analytics.page.bookingLevelPromoDiscount ,',',1);\n               }\n            }*/\n        \n            // Start\n            var dl = window.dataLayer\n            if (dl &amp;&amp; dl[0] &amp;&amp; dl[0].transactions &amp;&amp; dl[0].transactions.total) {\n              // If old object is shown - can be removed at a later date\n              if (dl[0].transactions.total.bookingLevelPromoDiscount &amp;&amp; typeof dl[0].transactions.total.bookingLevelPromoDiscount !== 'undefined') {\n                // Check for PC &amp; MMB/Booking Incentive\n                if (/CVRHC|CVRW20|CVRS21|CVRI|CVRM|CVRV/i.test(dl[0].transactions.total.bookingLevelPromoCode)) {\n                  // Programme Change Incentive\n                  if (/CVRHC|CVRW20|CVRS21/i.test(dl[0].transactions.total.bookingLevelPromoCode)) {\n                    s.events = s.apl(s.events, 'event158=' + Math.abs(dl[0].transactions.total.bookingLevelPromoDiscount), ',', 1);\n                  }\n                  // MMB/Booking Incentive\n                  if (/CVRI|CVRM|CVRV/i.test(dl[0].transactions.total.bookingLevelPromoCode)) {\n                    s.events = s.apl(s.events, 'event159=' + Math.abs(dl[0].transactions.total.bookingLevelPromoDiscount), ',', 1);\n                  }\n                } else {\n                  s.events = s.apl(s.events, 'event154=' + Math.abs(dl[0].transactions.total.bookingLevelPromoDiscount), ',', 1);\n                }\n                // Added to handle new promo code array\n              } else if (dl[0].transactions.total.bookingLevelPromoCodes &amp;&amp; dl[0].transactions.total.bookingLevelPromoCodes.length &gt; 0) {\n                var promoCodeArray = dl[0].transactions.total.bookingLevelPromoCodes\n                for (i = 0; i &lt; promoCodeArray.length; i++) {\n        \n                  if (/CVRHC|CVRW20|CVRS21|CVRI|CVRM|CVRV/i.test(promoCodeArray[i].bookingLevelPromoCode)) {\n                    // Programme Change Incentive\n                    if (/CVRHC|CVRW20|CVRS21/i.test(promoCodeArray[i].bookingLevelPromoCode)) {\n                      s.events = s.apl(s.events, 'event158=' + Math.abs(promoCodeArray[i].bookingLevelPromoDiscount), ',', 1);\n                    }\n                    // MMB/Booking Incentive\n                    if (/CVRI|CVRM|CVRV/i.test(promoCodeArray[i].bookingLevelPromoCode)) {\n                      s.events = s.apl(s.events, 'event159=' + Math.abs(promoCodeArray[i].bookingLevelPromoDiscount), ',', 1);\n                    }\n                  } else {\n                    s.events = s.apl(s.events, 'event154=' + Math.abs(promoCodeArray[i].bookingLevelPromoDiscount), ',', 1);\n                  }\n                }\n              }\n              // For legacy data layer (only single promo code &amp; value)\t\n            } else if (window.tui &amp;&amp; tui.analytics &amp;&amp; tui.analytics.page) {\n              if (typeof tui.analytics.page.PromoValue !== 'undefined' &amp;&amp; tui.analytics.page.PromoValue !== 'null') {\n                if (/CVRHC|CVRW20|CVRS21/i.test(tui.analytics.page.PromoCode)) {\n                  s.events = s.apl(s.events, 'event158' + parseFloat(tui.analytics.page.PromoValue), ',', 1);\n                } else if (/CVRI|CVRM|CVRV/i.test(tui.analytics.page.PromoCode)) {\n                  s.events = s.apl(s.events, 'event159' + parseFloat(tui.analytics.page.PromoValue), ',', 1);\n                } else {\n                  s.events = s.apl(s.events, 'event154' + parseFloat(tui.analytics.page.PromoValue), ',', 1);\n                }\n              }\n            } //End\n          }\n        }\n        }\n        \n        //MMB Cancel\n        else if (document.URL.indexOf('your-account/managemybooking/cancelbooking') !== -1 &amp;&amp; typeof window.tui.analytics.events != 'undefined' &amp;&amp; window.tui.analytics.events !== null) {\n        for (var i = 0; i &lt; window.tui.analytics.events.length; i++) {\n          if (window.tui.analytics.events[i].eventAction == 'MMB Cancel') {\n            s.events = &quot;event303:&quot; + window.tui.analytics.events[i].eventSerialisationNumber;\n          }\n        }\n        }\n        \n        //Price Variation Alert\n        else if (document.URL.indexOf('/book/flow/summary') !== -1 || document.URL.indexOf('/book/passengerdetails') !== -1 || document.URL.indexOf('/cps/pageRender') !== -1) {\n        var priceStatus = document.querySelectorAll('.PriceVariationAlert__infoTextHeading');\n        var price = document.querySelectorAll('.alertprice');\n        if (priceStatus.length &gt; 0 &amp;&amp; priceStatus[0].innerText.includes(&quot;INCREASED&quot;)) {\n          s.events = &quot;event47,event48=&quot; + price[0].innerText.replace(/[]/g, '');\n        } else if (priceStatus.length &gt; 0 &amp;&amp; priceStatus[0].innerText.includes(&quot;DECREASED&quot;)) {\n          s.events = &quot;event47,event48=&quot; + -price[0].innerText.replace(/[]/g, '');\n        }\n        }\n        \n        // Credit Note Booking\n        if ((document.URL.indexOf('/book/confirmation') !== -1 || document.URL.indexOf('/book/mobile/confirmation') !== -1 || document.URL.indexOf('/book/bookingConfirmation') !== -1) &amp;&amp; bookingReference &amp;&amp; typeof bookingReference === &quot;string&quot; &amp;&amp; bookingReference.length &gt; 5) {\n        // var creditNoteBooking = Bootstrapper._SC.dataHandler(arguments, &quot;62528&quot;);\n        var creditNoteBooking = b.legacy_isCreditNoteBooking || ''\n        if (creditNoteBooking.toLowerCase() == &quot;yes&quot;) {\n          s.events = s.apl(s.events, 'event70', ',', 1);\n        }\n        }\n        \n        \n        // Performance Timing Replacement\n        /*\n        var pt = (Bootstrapper.PTE &amp;&amp; Bootstrapper.PTE.performanceTimings &amp;&amp; Bootstrapper.PTE.performanceTimings.get ? Bootstrapper.PTE.performanceTimings.get() : '');\n        \n        if (pt) {\n            pt = pt.split('|');\n            s.events = s.apl(s.events,'event980=' + pt[0],',',1);\n            s.events = s.apl(s.events,'event981=' + pt[1],',',1);\n            s.events = s.apl(s.events,'event982=' + pt[2],',',1);\n            s.events = s.apl(s.events,'event983=' + pt[3],',',1);\n            s.events = s.apl(s.events,'event984=' + pt[4],',',1);\n            s.events = s.apl(s.events,'event985=' + pt[5],',',1);\n            s.events = s.apl(s.events,'event986=' + pt[6],',',1);\n            s.events = s.apl(s.events,'event987=' + pt[7],',',1);\n            s.events = s.apl(s.events,'event988=' + pt[8],',',1);\n            \n            if (pt[9] &gt; 0) {\n                s.events = s.apl(s.events,'event989=' + pt[9],',',1);\n            }\n            if (pt[10] &gt; 0) {\n            s.events = s.apl(s.events,'event990=' + pt[10],',',1);\n            }\n            s.events = s.apl(s.events,'event1000',',',1);\n        }\n        */\n        \n        // Bookflow Events\n        // Search\n        if (document.URL.indexOf('/destinations/packages') != -1 || document.URL.indexOf('/flight/search') != -1 || document.URL.indexOf('/cruise/packages') != -1 || document.URL.indexOf('/holiday/packages') != -1 || document.URL.indexOf('/f/packages') != -1 || document.URL.indexOf('/river-cruises/packages') != -1 || document.URL.indexOf('/retail/packages') != -1) {\n        s.events = s.apl(s.events, &quot;event1&quot;, &quot;,&quot;, 1);\n        }\n        \n        // Product View &amp; Custom Product View\n        if (document.URL.indexOf('/bookaccommodation') != -1 || document.URL.indexOf('/flight/book/flightoptions') != -1 || document.URL.indexOf('/flight/book/mobile/flightoptions') != -1 || document.URL.indexOf('/cruise/bookitineraries') != -1) {\n        s.events = s.apl(s.events, &quot;event11,prodView&quot;, &quot;,&quot;, 1);\n        }\n        \n        // Beach Bookflow Events\n        if (document.URL.indexOf('bookaccommodation') != -1) {\n        s.events = s.apl(s.events, &quot;event15&quot;, &quot;,&quot;, 1);\n        } else if (document.URL.indexOf('/book/mobile/hubsummary') != -1) {\n        s.events = s.apl(s.events, &quot;event16&quot;, &quot;,&quot;, 1);\n        } else if (document.URL.indexOf('/destinations/book/flightoptions') != -1 || document.URL.indexOf('/destinations/book/mobile/flightoptions') != -1 || document.URL.indexOf('/destinations/book/flow/flightoptions') != -1 || document.URL.indexOf('/holiday/book/flightoptions') != -1 || document.URL.indexOf('/holiday/book/mobile/flightoptions') != -1 || document.URL.indexOf('/holiday/book/flow/flightoptions') != -1 || document.URL.indexOf('/f/book/flightoptions') != -1 || document.URL.indexOf('/f/book/flow/flightoptions') != -1 || document.URL.indexOf('/f/book/mobile/flightoptions') != -1 || document.URL.indexOf('/retail/book/flow/flightoptions') != -1) {\n        s.events = s.apl(s.events, &quot;event17,scView,scOpen,scAdd&quot;, &quot;,&quot;, 1);\n        } else if (document.URL.indexOf('/destinations/book/roomoptions') != -1 || document.URL.indexOf('/destinations/book/mobile/roomoptions') != -1 || document.URL.indexOf('/destinations/book/flow/roomoptions') != -1 || document.URL.indexOf('/holiday/book/roomoptions') != -1 || document.URL.indexOf('/holiday/book/mobile/roomoptions') != -1 || document.URL.indexOf('/holiday/book/flow/roomoptions') != -1 || document.URL.indexOf('/f/book/roomoptions') != -1 || document.URL.indexOf('/f/book/flow/roomoptions') != -1 || document.URL.indexOf('/f/book/mobile/roomoptions') != -1 || document.URL.indexOf('/retail/book/flow/roomoptions') != -1) {\n        s.events = s.apl(s.events, &quot;event18&quot;, &quot;,&quot;, 1);\n        } else if (document.URL.indexOf('/destinations/book/extraoptions') != -1 || document.URL.indexOf('/destinations/book/mobile/extraoptions') != -1 || document.URL.indexOf('/destinations/book/flow/extraoptions') != -1 || document.URL.indexOf('/holiday/book/extraoptions') != -1 || document.URL.indexOf('/holiday/book/mobile/extraoptions') != -1 || document.URL.indexOf('/holiday/book/flow/extraoptions') != -1 || document.URL.indexOf('/f/book/extraoptions') != -1 || document.URL.indexOf('/f/book/flow/extraoptions') != -1 || document.URL.indexOf('/f/book/mobile/extraoptions') != -1 || document.URL.indexOf('/retail/book/flow/extraoptions') != -1) {\n        s.events = s.apl(s.events, &quot;event19&quot;, &quot;,&quot;, 1);\n        } else if (document.URL.indexOf('/destinations/book/passengerdetails') != -1 || document.URL.indexOf('/destinations/book/mobile/passengerdetails') != -1 || document.URL.indexOf('/holiday/book/passengerdetails') != -1 || document.URL.indexOf('/holiday/book/mobile/passengerdetails') != -1 || document.URL.indexOf('/f/book/passengerdetails') != -1 || document.URL.indexOf('/f/book/mobile/passengerdetails') != -1 || document.URL.indexOf('/retail/book/passengerdetails') != -1) {\n        s.events = s.apl(s.events, &quot;event20,scCheckout&quot;, &quot;,&quot;, 1);\n        } else if (document.URL.indexOf('/cps/pageRender') != -1 &amp;&amp; (s.Util.getQueryParam('b').indexOf('25000') != -1 || s.Util.getQueryParam('b').indexOf('32000') != -1 || s.Util.getQueryParam('b').indexOf('50000') != -1 || s.Util.getQueryParam('b').indexOf('19000') != -1 || s.Util.getQueryParam('b').indexOf('41000') != -1 || s.Util.getQueryParam('b').indexOf('31000') != -1 || s.Util.getQueryParam('b').indexOf('10000') != -1 || s.Util.getQueryParam('b').indexOf('20000') != -1 || s.Util.getQueryParam('b').indexOf('42000') != -1 || s.Util.getQueryParam('b').indexOf('51000') != -1 || s.Util.getQueryParam('b').indexOf('52000') != -1 || s.Util.getQueryParam('b').indexOf('53000') != -1 || s.Util.getQueryParam('b').indexOf('38000') != -1)) {\n        s.events = s.apl(s.events, &quot;event21&quot;, &quot;,&quot;, 1);\n        } else if (document.URL.indexOf('/destinations/book/confirmation') != -1 || document.URL.indexOf('/destinations/book/mobile/confirmation') != -1 || document.URL.indexOf('/holiday/book/confirmation') != -1 || document.URL.indexOf('/holiday/book/mobile/confirmation') != -1 || document.URL.indexOf('/f/book/confirmation') != -1 || document.URL.indexOf('/f/book/mobile/confirmation') != -1 || document.URL.indexOf('/managemybooking/paymentconfirmation') != -1 || document.URL.indexOf('/retail/book/bookingConfirmation') != -1 || document.URL.indexOf('/retail/f/book/bookingConfirmation') != -1) {\n        if (window.tui.analytics.page.pageUid != 'lockYourPriceConfirmationpage_react' || dataLayer[0].page.pageID != 'lockYourPriceConfirmationpage_react') {\n          s.events = s.apl(s.events, &quot;event22&quot;, &quot;,&quot;, 1);\n        }\n        }\n        \n        // Cruise Bookflow Events\t\n        /*else if (document.URL.indexOf('/cruise/bookitineraries') != -1) {\n        s.events = s.apl(s.events, &quot;event23&quot;, &quot;,&quot;, 1);\n        }*/ else if (document.URL.indexOf('/cruise/packages/hotels') != -1) {\n        s.events = s.apl(s.events, &quot;event24&quot;, &quot;,&quot;, 1);\n        } else if (document.URL.indexOf('/cruise/bookHotelDetails') != -1) {\n        s.events = s.apl(s.events, &quot;event25&quot;, &quot;,&quot;, 1);\n        } else if (document.URL.indexOf('/cruise/book/cruiseoptions') != -1 || document.URL.indexOf('/cruise/book/flow/cruiseoptions') != -1) {\n        s.events = s.apl(s.events, &quot;event26,scView,scOpen,scAdd&quot;, &quot;,&quot;, 1);\n        } else if (document.URL.indexOf('/cruise/book/flightoptions') != -1 || document.URL.indexOf('/cruise/book/flow/flightoptions') != -1) {\n        s.events = s.apl(s.events, &quot;event27&quot;, &quot;,&quot;, 1);\n        } else if (document.URL.indexOf('/cruise/book/roomoptions') != -1 || document.URL.indexOf('/cruise/book/flow/roomoptions') != -1) {\n        s.events = s.apl(s.events, &quot;event28&quot;, &quot;,&quot;, 1);\n        } else if (document.URL.indexOf('/cruise/book/extraoptions') != -1 || document.URL.indexOf('/cruise/book/flow/extraoptions') != -1) {\n        s.events = s.apl(s.events, &quot;event29&quot;, &quot;,&quot;, 1);\n        } else if (document.URL.indexOf('/cruise/book/passengerdetails') != -1) {\n        s.events = s.apl(s.events, &quot;event30,scCheckout&quot;, &quot;,&quot;, 1);\n        } else if (document.URL.indexOf('/cps/pageRender') != -1 &amp;&amp; (s.Util.getQueryParam('b').indexOf('37000') != -1 || s.Util.getQueryParam('b').indexOf('54000') != -1 || s.Util.getQueryParam('b').indexOf('49000') != -1)) {\n        s.events = s.apl(s.events, &quot;event31&quot;, &quot;,&quot;, 1);\n        } else if (document.URL.indexOf('/cruise/book/confirmation') != -1 || document.URL.indexOf('/retail/cruise/book/bookingConfirmation') != -1 || document.URL.indexOf('/retail/f/cruise/book/bookingConfirmation') != -1) {\n        s.events = s.apl(s.events, &quot;event32&quot;, &quot;,&quot;, 1);\n        }\n        \n        \n        // Flight Only Bookflow Events\t\t\n        else if (document.URL.indexOf('/flight/book/flightoptions') != -1 || document.URL.indexOf('/flight/book/mobile/flightoptions') != -1) {\n        s.events = s.apl(s.events, &quot;event33,scView,scOpen,scAdd&quot;, &quot;,&quot;, 1);\n        } else if (document.URL.indexOf('/flight/book/extraoptions') != -1 || document.URL.indexOf('/flight/book/mobile/extraoptions') != -1) {\n        s.events = s.apl(s.events, &quot;event34&quot;, &quot;,&quot;, 1);\n        } else if (document.URL.indexOf('/flight/book/passengerdetails') != -1 || document.URL.indexOf('/flight/book/mobile/passengerdetails') != -1) {\n        s.events = s.apl(s.events, &quot;event35,scCheckout&quot;, &quot;,&quot;, 1);\n        } else if (document.URL.indexOf('/cps/pageRender') != -1 &amp;&amp; (s.Util.getQueryParam('b').indexOf('39000') != -1 || s.Util.getQueryParam('b').indexOf('47000') != -1 || s.Util.getQueryParam('b').indexOf('40000') != -1 || s.Util.getQueryParam('b').indexOf('48000') != -1 || s.Util.getQueryParam('b').indexOf('59000') != -1 || s.Util.getQueryParam('b').indexOf('60000') != -1)) {\n        s.events = s.apl(s.events, &quot;event36&quot;, &quot;,&quot;, 1);\n        } else if (document.URL.indexOf('/flight/book/confirmation') != -1 || document.URL.indexOf('/flight/book/mobile/confirmation') != -1 || document.URL.indexOf('/retail/flight/book/bookingConfirmation') != -1 || document.URL.indexOf('/retail/f/flight/book/bookingConfirmation') != -1) {\n        s.events = s.apl(s.events, &quot;event37&quot;, &quot;,&quot;, 1);\n        }\n        \n        \n        // This is for event 8 (Pax) (legacy_numberOfPax)\n        // MOVED to mapping\n        /*\n        if (window.tui &amp;&amp; tui.analytics &amp;&amp; tui.analytics.page &amp;&amp; tui.analytics.page.Pax) {\n        s.events = s.apl(s.events, &quot;event8=&quot; + tui.analytics.page.Pax, &quot;,&quot;, 1);\n        } else if (window.dataLayer &amp;&amp; dataLayer[0] &amp;&amp; dataLayer[0].transactions &amp;&amp; dataLayer[0].transactions.total &amp;&amp; dataLayer[0].transactions.total.paxDetails &amp;&amp; dataLayer[0].transactions.total.paxDetails.total) {\n        s.events = s.apl(s.events, &quot;event8=&quot; + dataLayer[0].transactions.total.paxDetails.total, &quot;,&quot;, 1);\n        } else if (window.dataLayer &amp;&amp; dataLayer[0] &amp;&amp; dataLayer[0].basket &amp;&amp; dataLayer[0].basket.price &amp;&amp; dataLayer[0].basket.price.paxDetails &amp;&amp; dataLayer[0].basket.price.paxDetails.total) {\n        s.events = s.apl(s.events, &quot;event8=&quot; + dataLayer[0].basket.price.paxDetails.total, &quot;,&quot;, 1);\n        } else if (window.dataLayer &amp;&amp; dataLayer[0] &amp;&amp; dataLayer[0].product &amp;&amp; dataLayer[0].product.noOfPax) {\n        s.events = s.apl(s.events, &quot;event8=&quot; + dataLayer[0].product.noOfPax, &quot;,&quot;, 1);\n        } else if (window.dataLayer &amp;&amp; dataLayer[0] &amp;&amp; dataLayer[0].page &amp;&amp; dataLayer[0].page.search &amp;&amp; dataLayer[0].page.search.noOfPax) {\n        s.events = s.apl(s.events, &quot;event8=&quot; + dataLayer[0].page.search.noOfPax, &quot;,&quot;, 1);\n        }\n        */\n        \n        // This is for event 10 (Discount) (legacy_onlineDiscount)\n        // MOVED to mapping\n        /*\n        if (window.tui &amp;&amp; tui.analytics &amp;&amp; tui.analytics.page &amp;&amp; tui.analytics.page.Disc) {\n        s.events = s.apl(s.events, &quot;event10=&quot; + tui.analytics.page.Disc, &quot;,&quot;, 1);\n        } else if (window.dataLayer &amp;&amp; dataLayer[0] &amp;&amp; dataLayer[0].transactions &amp;&amp; dataLayer[0].transactions.total &amp;&amp; dataLayer[0].transactions.total.discount) {\n        s.events = s.apl(s.events, &quot;event10=&quot; + Math.round(dataLayer[0].transactions.total.discount).toString(), &quot;,&quot;, 1);\n        } else if (window.dataLayer &amp;&amp; dataLayer[0] &amp;&amp; dataLayer[0].basket &amp;&amp; dataLayer[0].basket.price &amp;&amp; dataLayer[0].basket.price.discount) {\n        s.events = s.apl(s.events, &quot;event10=&quot; + Math.round(dataLayer[0].basket.price.discount).toString(), &quot;,&quot;, 1);\n        } else if (window.dataLayer &amp;&amp; dataLayer[0] &amp;&amp; dataLayer[0].product &amp;&amp; dataLayer[0].product.discount) {\n        s.events = s.apl(s.events, &quot;event10=&quot; + Math.round(dataLayer[0].product.discount).toString(), &quot;,&quot;, 1);\n        } else if (window.jsonData &amp;&amp; jsonData.packageViewData &amp;&amp; jsonData.packageViewData.onlineDiscount) {\n        s.events = s.apl(s.events, &quot;event10=&quot; + Math.round(jsonData.packageViewData.onlineDiscount).toString(), &quot;,&quot;, 1);\n        }\n        */\n        \n        \n        // This is for event 38 (Revenue) \n        \n        if (window.tui &amp;&amp; tui.analytics &amp;&amp; tui.analytics.page &amp;&amp; tui.analytics.page.Sum) {\n        if (window.tui.analytics.page.bookingLevelCreditNoteDiscount &amp;&amp; (parseFloat(tui.analytics.page.bookingLevelCreditNoteDiscount) &gt; 0)) {\n          s.events = s.apl(s.events, &quot;event38=&quot; + (parseFloat(tui.analytics.page.Sum) + parseFloat(tui.analytics.page.bookingLevelCreditNoteDiscount)), &quot;,&quot;, 1);\n        } else {\n          s.events = s.events = s.apl(s.events, &quot;event38=&quot; + tui.analytics.page.Sum, &quot;,&quot;, 1);\n        }\n        } else if (window.dataLayer &amp;&amp; dataLayer[0] &amp;&amp; dataLayer[0].transactions &amp;&amp; dataLayer[0].transactions.total &amp;&amp; dataLayer[0].transactions.total.totalPrice) {\n        if (window.dataLayer[0].transactions.total.bookingLevelCreditNoteDiscount &amp;&amp; dataLayer[0].transactions.total.bookingLevelCreditNoteDiscount &gt; 0) {\n          s.events = s.apl(s.events, &quot;event38=&quot; + (dataLayer[0].transactions.total.totalPrice + dataLayer[0].transactions.total.bookingLevelCreditNoteDiscount), &quot;,&quot;, 1);\n        } else {\n          s.events = s.apl(s.events, &quot;event38=&quot; + dataLayer[0].transactions.total.totalPrice, &quot;,&quot;, 1);\n        }\n        } else if (window.dataLayer &amp;&amp; dataLayer[0] &amp;&amp; dataLayer[0].basket &amp;&amp; dataLayer[0].basket.price &amp;&amp; dataLayer[0].basket.price.totalPrice) {\n        if (window.dataLayer[0].basket.price.bookingLevelCreditNoteDiscount &amp;&amp; dataLayer[0].basket.price.bookingLevelCreditNoteDiscount &gt; 0) {\n          s.events = s.apl(s.events, &quot;event38=&quot; + (dataLayer[0].basket.price.totalPrice + dataLayer[0].basket.price.bookingLevelCreditNoteDiscount), &quot;,&quot;, 1);\n        } else {\n          s.events = s.apl(s.events, &quot;event38=&quot; + dataLayer[0].basket.price.totalPrice, &quot;,&quot;, 1);\n        }\n        } else if (window.dataLayer &amp;&amp; dataLayer[0] &amp;&amp; dataLayer[0].product &amp;&amp; dataLayer[0].product.currentPrice) {\n        s.events = s.apl(s.events, &quot;event38=&quot; + dataLayer[0].product.currentPrice, &quot;,&quot;, 1);\n        }\n        \n        // For Privacy\n        /* // moved, since this logic isn't relevant post-migration\n        try {\n        var privacyExperience = Bootstrapper.Cookies.get('TUI_ENSIGHTEN_PRIVACY_Experience');\n        if (privacyExperience !== 'C') {\n          if (window.gateway &amp;&amp; window.gateway.isInitialized &amp;&amp; String(Bootstrapper.gateway.getCookie('BANNER_VIEWED')) !== '1') {\n            s.events = s.apl(s.events, 'event107', ',', 1);\n          }\n        }\n        } catch (err) {\n        console.log('Ensighten:event107 not set');\n        }\n        */\n        \n        return s.events;\n        })(s.events)\n\t\n\t// Custom pageview event\n\ts.events = s.apl(s.events,&quot;event3&quot;,&quot;,&quot;,1);\n\t\n    // Time parting used for eVar 31 and 32\n\ttpA = s.getTimeParting('n','0');\n\ttpAh = tpA[1].split(':')[0];\n\tif(tpA[1].indexOf('PM')!=-1)\n\t{\n\t\tif(eval(tpAh) != 12)\n\t\ttpAh = eval(tpAh) + 12;\n\t}\n\tif (tpA[1].indexOf(&quot;AM&quot;) != -1) \n\tif (eval(tpAh) == 12) tpAh = &quot;0&quot;;\n\ttmAm = tpA[0].split(':')[1];\n\ttmAm = tmAm.replace(/\\D/g, '');\n\t\n\n\t/* Performance Timing Called */\n\ts.performanceTiming();\n    /*    \n    if (s.linkType === 'e') {\n        var pt = (window.Bootstrapper.PTE &amp;&amp; window.Bootstrapper.PTE.performanceTimings &amp;&amp; window.Bootstrapper.PTE.performanceTimings.get ? window.Bootstrapper.PTE.performanceTimings.get(true) : ''),\n            timingEvents = ['980', '981', '982', '983', '984', '985', '986', '987', '988', '989', '990'];\n\n        if (pt) {\n            pt = pt.split('|');\n            s.linkTrackVars = s.apl(s.linkTrackVars, 'events', ',', 1);\n\n            for (var i = 0; i &lt; pt.length; i++) {\n                if ((i &lt; 9) || pt[i] &gt; 0) {\n                    s.events = s.apl(s.events, 'event' + timingEvents[i] + '=' + pt[i], ',', 1);\n                    s.linkTrackEvents = s.apl(s.linkTrackEvents, 'event' + timingEvents[i], ',', 1);\n                }\n            }\n            s.events = s.apl(s.events, 'event1000', ',', 1);\n        }\n        else {\n            for (var i = 0; i &lt; timingEvents.length; i++) {\n                var regex = new RegExp('event' + timingEvents[i] + ',?', 'g');\n                s.linkTrackEvents = s.linkTrackEvents.replace(regex, '');\n            }\n        }\n    }\n\t*/\n    /* If GSA Internal search term exists then fire search event*/\n\tif(s.eVar8!==&quot;&quot;){\n        s.events = s.apl(s.events,&quot;event1&quot;,&quot;,&quot;,1);\n\t}\n\n\ts.eVar31 = tpAh;\n\ts.eVar32 = tpA[2];\n\t\n    //Note: IE browsers can be in only visitor's local time\n    s.eVar7 = getTimeParting2(&quot;Europe/London&quot;);\t\n\n    // Prod View event initiates time to complete calculation\n\tif(s.events.indexOf('prodView')&gt;-1)\n        s.eVar34='start';\n\n    // Purchase event finishes time to complete calculation \n\tif(s.events.indexOf('purchase')&gt;-1)\n        s.eVar34='stop';\n\n    // Time To Complete Checkout\n\ts.eVar34 = s.getTimeToComplete(s.eVar34,'ttc',0);\n\n    // New or Repeat\n\ts.eVar35 = s.getNewRepeat();\n\n    // Days Since Last Visit\n\ts.eVar36 = s.getDaysSinceLastVisit('s_lv');\n\n    // Page URL\n\t//.prop38 = s.eVar38 = document.location.host + document.location.pathname;\n\t\n\t// Previous Page URL eVar\n\ts.eVar159 = s.getPreviousValue(s.eVar38,'gpv_pn');\n\t\n\t// Previous Page ID eVar\n\ts.eVar160 = s.getPreviousValue(s.eVar45,'gpv_pn2');\n    \n    // Query String eVar\n\tvar url_split = document.URL.split('?')[1];\n\tif(typeof url_split != 'undefined')\n\ts.eVar39 =  url_split;\n\n    // Minute of hour eVar\n\ts.eVar40 = tmAm;\n\n    // User Agent eVar\n\t//s.eVar41 =&quot;D=User-Agent&quot;;\n\n    // Marketing Cloud Visitor ID eVar\n\tif(typeof visitor != 'undefined')\n\ts.eVar44 = visitor.getMarketingCloudVisitorID();\n\n    // Brand\n\t//s.eVar48 = s.prop48 = brand; \n    \n    \n    // Page Depth Tracking - Action Depth Test was previously defined in base code\n    s.ActionDepthTest = true;\n    if (s.ActionDepthTest) {\n      s.eVar75 = s.getActionDepthVisitor(&quot;s_depth&quot;);\n      s.eVar76 = s.getActionDepth('s_depth_visit');\n      s.ActionDepthTest = false;\n    }\n\t\n\t//Time Stamp \n\n\ts.eVar77 = startTime();\n\n}\n\ns.doPlugins=s_doPlugins;\n\n\n  /*\n   * Plugin: getActionDepth v1.0 - Returns the current\n   * page number of the visit\n   */\n  s.getActionDepth = new Function(&quot;c&quot;, &quot;&quot; + &quot;var s=this,v=1,t=new Date;t.setTime(t.getTime()+1800000);&quot; + &quot;if(!s.c_r(c)){v=1}if(s.c_r(c)){v=s.c_r(c);v++}&quot; + &quot;if(!s.c_w(c,v,t)){s.c_w(c,v,0)}return v;&quot;);\n\n  /*\n   * Plugin: getActionDepth v1.0 - Returns the current\n   * page number of the visit\n   */\n  s.getActionDepthVisitor = new Function(&quot;c&quot;, &quot;&quot; + &quot;var s=this,v,t=new Date;t.setFullYear(t.getFullYear()+2);&quot; + &quot;if(!s.c_r(c)){v=1}if(s.c_r(c)){v=s.c_r(c);v++}&quot; + &quot;if(!s.c_w(c,v,t)){s.c_w(c,v,0)}return v;&quot;);\n \n \n// Used for Timestamp eVar\nfunction checkTime(i) {\n    if (i &lt; 10) {\n        i = &quot;0&quot; + i;\n    }\nreturn i;\n}\n\nfunction startTime() {\n    var today = new Date();\n    var h = today.getHours();\n    var m = today.getMinutes();\n    var s = today.getSeconds();\n    // add a zero in front of numbers&lt;10\n    m = checkTime(m);\n    s = checkTime(s);\n    h = checkTime(h);\n\treturn h + &quot;:&quot; + m + &quot;:&quot; + s;\n}\n\n/********************************************************************\n *\n * Main Plug-in code (should be in Plug-ins section)\n *\n *******************************************************************/\n/* Plugin: Performance Timing Tracking - 0.1 BETA */\ns.performanceTiming = function(v){\n    var s=this;\n    if(v) s.ptv=v;\n    if(typeof performance!='undefined'){\n        if(performance.timing.loadEventEnd==0){\n            s.pi=setInterval(function(){s.performanceWrite()},250);\n        }\n        if(!s.ptc||s.linkType=='e'){\n            s.performanceRead();\n        }\n        else{s.rfe();\n        s[s.ptv]='';\n        }\n     }\n};\n\ns.performanceWrite = function(){\n    var s=this;\n    if(performance.timing.loadEventEnd&gt;0)clearInterval(s.pi);\n    try{\n        if(s.c_r('s_ptc')==''&amp;&amp;performance.timing.loadEventEnd&gt;0){\n            try{\n                var pt=performance.timing;\n                var pta='';\n                pta=s.performanceCheck(pt.fetchStart,pt.navigationStart);\n                pta+='^^'+s.performanceCheck(pt.domainLookupStart,pt.fetchStart);\n                pta+='^^'+s.performanceCheck(pt.domainLookupEnd,pt.domainLookupStart);\n                pta+='^^'+s.performanceCheck(pt.connectEnd,pt.connectStart);\n                pta+='^^'+s.performanceCheck(pt.responseStart,pt.connectEnd); \n                pta+='^^'+s.performanceCheck(pt.responseEnd,pt.responseStart);\n                pta+='^^'+s.performanceCheck(pt.loadEventStart,pt.domLoading);\n                pta+='^^'+s.performanceCheck(pt.loadEventEnd,pt.loadEventStart);\n                pta+='^^'+s.performanceCheck(pt.loadEventEnd,pt.navigationStart);\n\t\t\t\tpta+='^^'+s.performanceCheck(performance.getEntriesByType('paint')[0].startTime,0); // Added for First Paint Metric\n\t\t\t\tpta+='^^'+s.performanceCheck(performance.getEntriesByType('paint')[1].startTime,0); // Added for First Contentful Paint Metric\n                s.c_w('s_ptc',pta);\n                    if(sessionStorage&amp;&amp;navigator.cookieEnabled&amp;&amp;s.ptv!='undefined'){\n                        var pe=performance.getEntries();\n                        var tempPe='';\n                        for(var i=0;i&lt;pe.length;i++){\n                            tempPe+='!';tempPe+=pe[i].name.indexOf('?')&gt;-1?pe[i].name.split('?')[0]:pe[i].name;\n                            tempPe+='|'+(Math.round(pe[i].startTime)/1000).toFixed(1)+'|'+(Math.round(pe[i].duration)/1000).toFixed(1)+'|'+pe[i].initiatorType;}\n                            sessionStorage.setItem('s_pec',tempPe);\n                    }\n            }\n            catch(err){\n                return;\n            }\n        }\n    }\n    catch(err){\n        return;\n    }\n};\ns.performanceCheck = function(a,b){\n    if(a&gt;=0&amp;&amp;b&gt;=0){\n        if((a-b)&lt;60000&amp;&amp;((a-b)&gt;=0)){\n            return((a-b)/1000).toFixed(2);\n        }\n        else{\n            return 600;\n        }\n    }\n};\ns.performanceRead = function(){\n    var s=this;\n    if(performance.timing.loadEventEnd&gt;0)clearInterval(s.pi);\n    var cv=s.c_r('s_ptc');\n    if(s.pte){\n        var ela=s.pte.split(',');\n    }\n    if(cv!=''){\n        var cva=s.split(cv,'^^');\n        if(cva[1]!=''){\n            for(var x=0;x&lt;(ela.length-1);x++){\n                s.events=s.apl(s.events,ela[x]+'='+cva[x],',',2);\n            }\n        }\n        s.events=s.apl(s.events,ela[ela.length-1],',',2);\n    }\n    s.linkTrackEvents=s.apl(s.linkTrackEvents,s.pte,',',2);\n    s.c_w('s_ptc','',0);\n    if(sessionStorage&amp;&amp;navigator.cookieEnabled&amp;&amp;s.ptv!='undefined'){\n        s[s.ptv]=sessionStorage.getItem('s_pec');\n        sessionStorage.setItem('s_pec','',0);\n    }\n    else{\n        s[s.ptv]='sessionStorage Unavailable';\n    }\n    s.ptc=true;\n}\n\ns.rfe = function(){\n    var s=this;\n    var ea=s.split(s.events,',');\n    var pta=s.split(s.pte,',');\n    try{\n        for(x in pta){\n            s.events=s.rfl(s.events,pta[x]);\n            s.contextData['events']=s.events;\n        }\n    }\n    catch(e){\n        return;\n    }\n}\n\ns.rfl = function(l,v,d1,d2,ku){\n\tvar s=this,\n\t\tR=new Array(),\n\t\tC='',\n\t\td1=!d1?',':d1,\n\t\td2=!d2?',':d2,\n\t\tku=!ku?0:1;\n\tif(!l)return'';\n\tL=l.split(d1);\n\tfor(i=0;i&lt;L.length;i++){\n\t\tif(L[i].indexOf(':')&gt;-1){ // remove serialisation to get just the event number\n\t\t\tC=L[i].split(':');\n\t\t\tC[1]=C[0]+':'+C[1];\n\t\t\tL[i]=C[0];\n\t\t}\n\t\tif(L[i].indexOf('=')&gt;-1){ // remove numeric event to get just the event number\n\t\t\tC=L[i].split('=');\n\t\t\tC[1]=C[0]+'='+C[1];\n\t\t\tL[i]=C[0];\n\t\t}\n\t\tif(L[i]!=v&amp;&amp;C){ // if it wasn't a duplicate and the variable had extras\n\t\t\tR.push(C[1])\n\t\t}\n\t\telse if(L[i]!=v){ // if it was a duplicate\n\t\t\tR.push(L[i])\n\t\t}\n\t\telse if(L[i]==v&amp;&amp;ku){\n\t\t\tku=0;\n\t\t\tif(C){\n\t\t\t\tR.push(C[1])\n\t\t\t}\n\t\t\telse {\n\t\t\t\tR.push(L[i])\n\t\t\t}\n\t\t}\n\t\tC=''; // clear it back out\n\t}\n\treturn s.join(R,{delim:d2})\n}\n\n\n /* Plugin: Performance Timing Tracking - 0.11 BETA */\n /*\ns.performanceTiming=new Function(&quot;v&quot;,&quot;var s=this;if(v)s.ptv=v;if(typeof performance!='undefined'){if(performance.timing.loadEventEnd==0){s.pi=setInterval(function(){s.performanceWrite()},250);}if(!s.ptc||s.linkType=='e'){s.performanceRead();}else{s.rfe();s[s.ptv]='';}}&quot;);\ns.performanceWrite=new Function(&quot;&quot;,&quot;var s=this;if(performance.timing.loadEventEnd&gt;0)clearInterval(s.pi);try{if(s.c_r('s_ptc')==''&amp;&amp;performance.timing.loadEventEnd&gt;0){try{var pt=performance.timing;var pta='';pta=s.performanceCheck(pt.fetchStart,pt.navigationStart);pta+='^^'+s.performanceCheck(pt.domainLookupStart,pt.fetchStart);pta+='^^'+s.performanceCheck(pt.domainLookupEnd,pt.domainLookupStart);pta+='^^'+s.performanceCheck(pt.connectEnd,pt.connectStart);pta+='^^'+s.performanceCheck(pt.responseStart,pt.connectEnd);pta+='^^'+s.performanceCheck(pt.responseEnd,pt.responseStart);pta+='^^'+s.performanceCheck(pt.loadEventStart,pt.domLoading);pta+='^^'+s.performanceCheck(pt.loadEventEnd,pt.loadEventStart);pta+='^^'+s.performanceCheck(pt.loadEventEnd,pt.navigationStart);pta+='^^'+s.performanceCheck(performance.getEntriesByType('paint')[0].startTime,0);pta+='^^'+s.performanceCheck(performance.getEntriesByType('paint')[1].startTime,0);s.c_w('s_ptc',pta);if(sessionStorage&amp;&amp;navigator.cookieEnabled&amp;&amp;s.ptv!='undefined'){var pe=performance.getEntries();var tempPe='';for(var i=0;i&lt;pe.length;i++){tempPe+='!';tempPe+=pe[i].name.indexOf('?')&gt;-1?pe[i].name.split('?')[0]:pe[i].name;tempPe+='|'+(Math.round(pe[i].startTime)/1000).toFixed(1)+'|'+(Math.round(pe[i].duration)/1000).toFixed(1)+'|'+pe[i].initiatorType;}sessionStorage.setItem('s_pec',tempPe);}}catch(err){return;}}}catch(err){return;}&quot;);\ns.performanceCheck=new Function(&quot;a&quot;,&quot;b&quot;,&quot;if(a&gt;=0&amp;&amp;b&gt;=0){if((a-b)&lt;60000&amp;&amp;((a-b)&gt;=0)){return((a-b)/1000).toFixed(2);}else{return 600;}}&quot;);\ns.performanceRead=new Function(&quot;&quot;,&quot;var s=this;if(performance.timing.loadEventEnd&gt;0)clearInterval(s.pi);var cv=s.c_r('s_ptc');if(s.pte){var ela=s.pte.split(',');}if(cv!=''){var cva=s.split(cv,'^^');if(cva[1]!=''){for(var x=0;x&lt;(ela.length-1);x++){s.events=s.apl(s.events,ela[x]+'='+cva[x],',',2);}}s.events=s.apl(s.events,ela[ela.length-1],',',2);}s.linkTrackEvents=s.apl(s.linkTrackEvents,s.pte,',',2);s.c_w('s_ptc','',0);if(sessionStorage&amp;&amp;navigator.cookieEnabled&amp;&amp;s.ptv!='undefined'){s[s.ptv]=sessionStorage.getItem('s_pec');sessionStorage.setItem('s_pec','',0);}else{s[s.ptv]='sessionStorage Unavailable';}s.ptc=true;&quot;),s.rfe=new Function(&quot;&quot;,&quot;var s=this;var ea=s.split(s.events,',');var pta=s.split(s.pte,',');try{for(x in pta){s.events=s.rfl(s.events,pta[x]);s.contextData['events']=s.events;}}catch(e){return;}&quot;),s.rfl=new Function(&quot;l&quot;,&quot;v&quot;,&quot;d1&quot;,&quot;d2&quot;,&quot;ku&quot;,&quot;var s=this,R=new Array(),C='',d1=!d1?',':d1,d2=!d2?',':d2,ku=!ku?0:1;if(!l)return'';L=l.split(d1);for(i=0;i&lt;L.length;i++){if(L[i].indexOf(':')&gt;-1){C=L[i].split(':');C[1]=C[0]+':'+C[1];L[i]=C[0];}if(L[i].indexOf('=')&gt;-1){C=L[i].split('=');C[1]=C[0]+'='+C[1];L[i]=C[0];}if(L[i]!=v&amp;&amp;C)R.push(C[1]);else if(L[i]!=v)R.push(L[i]);else if(L[i]==v&amp;&amp;ku){ku=0;if(C)R.push(C[1]);else R.push(L[i]);}C='';}return s.join(R,{delim:d2})&quot;);\n*/\n /* s.join: 1.0 - Joins an array into a string\n */\ns.join=new Function(&quot;v&quot;,&quot;p&quot;,&quot;&quot;\n+&quot;var s=this;var f,b,d,w;if(p){f=p.front?p.front:'';b=p.back?p.back:'&quot;\n+&quot;';d=p.delim?p.delim:'';w=p.wrap?p.wrap:'';}var str='';for(var x=0;x&quot;\n+&quot;&lt;v.length;x++){if(typeof(v[x])=='object')str+=s.join(v[x],p);else s&quot;\n+&quot;tr+=w+v[x]+w;if(x&lt;v.length-1)str+=d;}return f+str+b;&quot;);\n \n/********************************************************************\n *\n * Supporting functions that may be shared between plug-ins\n *\n *******************************************************************/\n\n//Europe\ns._tpDST = { \n\t2012:'3/25,10/28', \n\t2013:'3/31,10/27', \n\t2014:'3/30,10/26', \n\t2015:'3/29,10/25', \n\t2016:'3/27,10/30', \n\t2017:'3/26,10/29', \n\t2018:'3/25,10/28', \n\t2019:'3/31,10/27',\n\t2020:'3/29,10/25',\n\t2021:'3/28,10/31'\n};\n\n\n/*\n * Plugin: getPreviousValue_v1.0 - return previous value of designated\n *   variable (requires split utility)\n */\ns.getPreviousValue=new Function(&quot;v&quot;,&quot;c&quot;,&quot;el&quot;,&quot;&quot;\n+&quot;var s=this,t=new Date,i,j,r='';t.setTime(t.getTime()+1800000);if(el&quot;\n+&quot;){if(s.events){i=s.split(el,',');j=s.split(s.events,',');for(x in i&quot;\n+&quot;){for(y in j){if(i[x]==j[y]){if(s.c_r(c)) r=s.c_r(c);v?s.c_w(c,v,t)&quot;\n+&quot;:s.c_w(c,'no value',t);return r}}}}}else{if(s.c_r(c)) r=s.c_r(c);v?&quot;\n+&quot;s.c_w(c,v,t):s.c_w(c,'no value',t);return r}&quot;);\n\n\n/*\n * Plugin: getTimeParting 3.3\n */\ns.getTimeParting=new Function(&quot;h&quot;,&quot;z&quot;,&quot;&quot;\n+&quot;var s=this,od;od=new Date('1/1/2000');if(od.getDay()!=6||od.getMont&quot;\n+&quot;h()!=0){return'Data Not Available';}else{var H,M,D,W,U,ds,de,tm,tt,&quot;\n+&quot;da=['Sunday','Monday','Tuesday','Wednesday','Thursday','Friday','Sa&quot;\n+&quot;turday'],d=new Date(),a=[];z=z?z:0;z=parseFloat(z);if(s._tpDST){var&quot;\n+&quot; dso=s._tpDST[d.getFullYear()].split(/,/);ds=new Date(dso[0]+'/'+d.&quot;\n+&quot;getFullYear());de=new Date(dso[1]+'/'+d.getFullYear());if(h=='n'&amp;&amp;d&quot;\n+&quot;&gt;ds&amp;&amp;d&lt;de){z=z+1;}else if(h=='s'&amp;&amp;(d&gt;de||d&lt;ds)){z=z+1;}}d=d.getTime&quot;\n+&quot;()+(d.getTimezoneOffset()*60000);d=new Date(d+(3600000*z));H=d.getH&quot;\n+&quot;ours();M=d.getMinutes();M=(M&lt;10)?'0'+M:M;D=d.getDay();U='AM';W='Wee&quot;\n+&quot;kday';if(H&gt;=12){U='PM';H=H-12;}if(H==0){H=12;}if(D==6||D==0){W='Wee&quot;\n+&quot;kend';}D=da[D];tm=H+':'+M+U;tt=H+':'+((M&gt;30)?'30':'00')+U;a=[tm,tt,&quot;\n+&quot;D,W];return a;}&quot;);\n\n/* Adobe Consulting Plugin: getTimeParting v6.2 (No Prerequisites Needed) */\n/* Changed name from getTimeParting to getTimeParting2 for parallel testing of v6.2 with v3.3 */\nvar getTimeParting2 = function(a) {\n  a = document.documentMode ? void 0 : a || &quot;Etc/GMT&quot;;\n  a = (new Date).toLocaleDateString(&quot;en-US&quot;, {\n    timeZone: a,\n    minute: &quot;numeric&quot;,\n    hour: &quot;numeric&quot;,\n    weekday: &quot;long&quot;,\n    day: &quot;numeric&quot;,\n    year: &quot;numeric&quot;,\n    month: &quot;long&quot;\n  });\n  a = /([a-zA-Z]+).*?([a-zA-Z]+).*?([0-9]+).*?([0-9]+)(.*?)([0-9])(.*)/.exec(a);\n  return &quot;year=&quot; + a[4] + &quot; | month=&quot; + a[2] + &quot; | date=&quot; + a[3] + &quot; | day=&quot; + a[1] + &quot; | time=&quot; + (a[6] + a[7])\n};\n\n/*\n * Plugin: getNewRepeat 1.2 - Returns whether user is new or repeat\n */\ns.getNewRepeat=new Function(&quot;d&quot;,&quot;cn&quot;,&quot;&quot;\n+&quot;var s=this,e=new Date(),cval,sval,ct=e.getTime();d=d?d:30;cn=cn?cn:&quot;\n+&quot;'s_nr';e.setTime(ct+d*24*60*60*1000);cval=s.c_r(cn);if(cval.length=&quot;\n+&quot;=0){s.c_w(cn,ct+'-New',e);return'New';}sval=s.split(cval,'-');if(ct&quot;\n+&quot;-sval[0]&lt;30*60*1000&amp;&amp;sval[1]=='New'){s.c_w(cn,ct+'-New',e);return'N&quot;\n+&quot;ew';}else{s.c_w(cn,ct+'-Repeat',e);return'Repeat';}&quot;);\n\n/*\n * Utility Function: split v1.5 (JS 1.0 compatible)\n */\ns.split=new Function(&quot;l&quot;,&quot;d&quot;,&quot;&quot;\n+&quot;var i,x=0,a=new Array;while(l){i=l.indexOf(d);i=i&gt;-1?i:l.length;a[x&quot;\n+&quot;++]=l.substring(0,i);l=l.substring(i+d.length);}return a&quot;);\n\n/*\n * Plugin: getValOnce_v1.11\n */\ns.getValOnce=new Function(&quot;v&quot;,&quot;c&quot;,&quot;e&quot;,&quot;t&quot;,&quot;&quot;\n+&quot;var s=this,a=new Date,v=v?v:'',c=c?c:'s_gvo',e=e?e:0,i=t=='m'?6000&quot;\n+&quot;0:86400000,k=s.c_r(c);if(v){a.setTime(a.getTime()+e*i);s.c_w(c,v,e&quot;\n+&quot;==0?0:a);}return v==k?'':v&quot;);\n\n/********************************************************************\n *\n * Main Plug-in code (should be in Plug-ins section)\n *\n *******************************************************************/\n \n/*\n * Plugin: Days since last Visit 1.1.H - capture time from last visit\n */\ns.getDaysSinceLastVisit=new Function(&quot;c&quot;,&quot;&quot;\n+&quot;var s=this,e=new Date(),es=new Date(),cval,cval_s,cval_ss,ct=e.getT&quot;\n+&quot;ime(),day=24*60*60*1000,f1,f2,f3,f4,f5;e.setTime(ct+3*365*day);es.s&quot;\n+&quot;etTime(ct+30*60*1000);f0='Cookies Not Supported';f1='First Visit';f&quot;\n+&quot;2='More than 30 days';f3='More than 7 days';f4='Less than 7 days';f&quot;\n+&quot;5='Less than 1 day';cval=s.c_r(c);if(cval.length==0){s.c_w(c,ct,e);&quot;\n+&quot;s.c_w(c+'_s',f1,es);}else{var d=ct-cval;if(d&gt;30*60*1000){if(d&gt;30*da&quot;\n+&quot;y){s.c_w(c,ct,e);s.c_w(c+'_s',f2,es);}else if(d&lt;30*day+1 &amp;&amp; d&gt;7*day&quot;\n+&quot;){s.c_w(c,ct,e);s.c_w(c+'_s',f3,es);}else if(d&lt;7*day+1 &amp;&amp; d&gt;day){s.&quot;\n+&quot;c_w(c,ct,e);s.c_w(c+'_s',f4,es);}else if(d&lt;day+1){s.c_w(c,ct,e);s.c&quot;\n+&quot;_w(c+'_s',f5,es);}}else{s.c_w(c,ct,e);cval_ss=s.c_r(c+'_s');s.c_w(c&quot;\n+&quot;+'_s',cval_ss,es);}}cval_s=s.c_r(c+'_s');if(cval_s.length==0) retur&quot;\n+&quot;n f0;else if(cval_s!=f1&amp;&amp;cval_s!=f2&amp;&amp;cval_s!=f3&amp;&amp;cval_s!=f4&amp;&amp;cval_s&quot;\n+&quot;!=f5) return '';else return cval_s;&quot;);\n\n/********************************************************************\n *\n * Main Plug-in code (should be in Plug-ins section)\n *\n *******************************************************************/\n/*\n * Plugin: getTimeToComplete 0.4 - return the time from start to stop\n */\ns.getTimeToComplete=new Function(&quot;v&quot;,&quot;cn&quot;,&quot;e&quot;,&quot;&quot;\n+&quot;var s=this,d=new Date,x=d,k;if(!s.ttcr){e=e?e:0;if(v=='start'||v=='&quot;\n+&quot;stop')s.ttcr=1;x.setTime(x.getTime()+e*86400000);if(v=='start'){s.c&quot;\n+&quot;_w(cn,d.getTime(),e?x:0);return '';}if(v=='stop'){k=s.c_r(cn);if(!s&quot;\n+&quot;.c_w(cn,'',d)||!k)return '';v=(d.getTime()-k)/1000;var td=86400,th=&quot;\n+&quot;3600,tm=60,r=5,u,un;if(v&gt;td){u=td;un='days';}else if(v&gt;th){u=th;un=&quot;\n+&quot;'hours';}else if(v&gt;tm){r=2;u=tm;un='minutes';}else{r=.2;u=1;un='sec&quot;\n+&quot;onds';}v=v*r/u;return (Math.round(v)/r)+' '+un;}}return '';&quot;);\n\n\n/*\n * Plugin Utility: apl v1.1\n */\ns.apl=new Function(&quot;l&quot;,&quot;v&quot;,&quot;d&quot;,&quot;u&quot;,&quot;&quot;\n+&quot;var s=this,m=0;if(!l)l='';if(u){var i,n,a=s.split(l,d);for(i=0;i&lt;a.&quot;\n+&quot;length;i++){n=a[i];m=m||(u==1?(n==v):(n.toLowerCase()==v.toLowerCas&quot;\n+&quot;e()));}}if(!m)l=l?l+d+v:v;return l&quot;);\n\n\n/************************** CONFIG SECTION END**************************/\n\n\n/*\n==========START MEDIA MODULE==========\nThe Media Module is required to implement Adobe Analytics Video Milestone Tracking\n*/\n\nfunction AppMeasurement_Module_Media(q){var b=this;b.s=q;q=window;q.s_c_in||(q.s_c_il=[],q.s_c_in=0);b._il=q.s_c_il;b._in=q.s_c_in;b._il[b._in]=b;q.s_c_in++;b._c=&quot;s_m&quot;;b.list=[];b.open=function(d,c,e,k){var f={},a=new Date,l=&quot;&quot;,g;c||(c=-1);if(d&amp;&amp;e){b.list||(b.list={});b.list[d]&amp;&amp;b.close(d);k&amp;&amp;k.id&amp;&amp;(l=k.id);if(l)for(g in b.list)!Object.prototype[g]&amp;&amp;b.list[g]&amp;&amp;b.list[g].R==l&amp;&amp;b.close(b.list[g].name);f.name=d;f.length=c;f.offset=0;f.e=0;f.playerName=b.playerName?b.playerName:e;f.R=l;f.C=0;f.a=0;f.timestamp=\nMath.floor(a.getTime()/1E3);f.k=0;f.u=f.timestamp;f.c=-1;f.n=&quot;&quot;;f.g=-1;f.D=0;f.I={};f.G=0;f.m=0;f.f=&quot;&quot;;f.B=0;f.L=0;f.A=0;f.F=0;f.l=!1;f.v=&quot;&quot;;f.J=&quot;&quot;;f.K=0;f.r=!1;f.H=&quot;&quot;;f.complete=0;f.Q=0;f.p=0;f.q=0;b.list[d]=f}};b.openAd=function(d,c,e,k,f,a,l,g){var h={};b.open(d,c,e,g);if(h=b.list[d])h.l=!0,h.v=k,h.J=f,h.K=a,h.H=l};b.M=function(d){var c=b.list[d];b.list[d]=0;c&amp;&amp;c.monitor&amp;&amp;clearTimeout(c.monitor.interval)};b.close=function(d){b.i(d,0,-1)};b.play=function(d,c,e,k){var f=b.i(d,1,c,e,k);f&amp;&amp;!f.monitor&amp;&amp;\n(f.monitor={},f.monitor.update=function(){1==f.k&amp;&amp;b.i(f.name,3,-1);f.monitor.interval=setTimeout(f.monitor.update,1E3)},f.monitor.update())};b.click=function(d,c){b.i(d,7,c)};b.complete=function(d,c){b.i(d,5,c)};b.stop=function(d,c){b.i(d,2,c)};b.track=function(d){b.i(d,4,-1)};b.P=function(d,c){var e=&quot;a.media.&quot;,k=d.linkTrackVars,f=d.linkTrackEvents,a=&quot;m_i&quot;,l,g=d.contextData,h;c.l&amp;&amp;(e+=&quot;ad.&quot;,c.v&amp;&amp;(g[&quot;a.media.name&quot;]=c.v,g[e+&quot;pod&quot;]=c.J,g[e+&quot;podPosition&quot;]=c.K),c.G||(g[e+&quot;CPM&quot;]=c.H));c.r&amp;&amp;(g[e+&quot;clicked&quot;]=\n!0,c.r=!1);g[&quot;a.contentType&quot;]=&quot;video&quot;+(c.l?&quot;Ad&quot;:&quot;&quot;);g[&quot;a.media.channel&quot;]=b.channel;g[e+&quot;name&quot;]=c.name;g[e+&quot;playerName&quot;]=c.playerName;0&lt;c.length&amp;&amp;(g[e+&quot;length&quot;]=c.length);g[e+&quot;timePlayed&quot;]=Math.floor(c.a);0&lt;Math.floor(c.a)&amp;&amp;(g[e+&quot;timePlayed&quot;]=Math.floor(c.a));c.G||(g[e+&quot;view&quot;]=!0,a=&quot;m_s&quot;,b.Heartbeat&amp;&amp;b.Heartbeat.enabled&amp;&amp;(a=c.l?b.__primetime?&quot;mspa_s&quot;:&quot;msa_s&quot;:b.__primetime?&quot;msp_s&quot;:&quot;ms_s&quot;),c.G=1);c.f&amp;&amp;(g[e+&quot;segmentNum&quot;]=c.m,g[e+&quot;segment&quot;]=c.f,0&lt;c.B&amp;&amp;(g[e+&quot;segmentLength&quot;]=c.B),c.A&amp;&amp;0&lt;c.a&amp;&amp;(g[e+&quot;segmentView&quot;]=\n!0));!c.Q&amp;&amp;c.complete&amp;&amp;(g[e+&quot;complete&quot;]=!0,c.S=1);0&lt;c.p&amp;&amp;(g[e+&quot;milestone&quot;]=c.p);0&lt;c.q&amp;&amp;(g[e+&quot;offsetMilestone&quot;]=c.q);if(k)for(h in g)Object.prototype[h]||(k+=&quot;,contextData.&quot;+h);l=g[&quot;a.contentType&quot;];d.pe=a;d.pev3=l;var q,s;if(b.contextDataMapping)for(h in d.events2||(d.events2=&quot;&quot;),k&amp;&amp;(k+=&quot;,events&quot;),b.contextDataMapping)if(!Object.prototype[h]){a=h.length&gt;e.length&amp;&amp;h.substring(0,e.length)==e?h.substring(e.length):&quot;&quot;;l=b.contextDataMapping[h];if(&quot;string&quot;==typeof l)for(q=l.split(&quot;,&quot;),s=0;s&lt;q.length;s++)l=\nq[s],&quot;a.contentType&quot;==h?(k&amp;&amp;(k+=&quot;,&quot;+l),d[l]=g[h]):&quot;view&quot;==a||&quot;segmentView&quot;==a||&quot;clicked&quot;==a||&quot;complete&quot;==a||&quot;timePlayed&quot;==a||&quot;CPM&quot;==a?(f&amp;&amp;(f+=&quot;,&quot;+l),&quot;timePlayed&quot;==a||&quot;CPM&quot;==a?g[h]&amp;&amp;(d.events2+=(d.events2?&quot;,&quot;:&quot;&quot;)+l+&quot;=&quot;+g[h]):g[h]&amp;&amp;(d.events2+=(d.events2?&quot;,&quot;:&quot;&quot;)+l)):&quot;segment&quot;==a&amp;&amp;g[h+&quot;Num&quot;]?(k&amp;&amp;(k+=&quot;,&quot;+l),d[l]=g[h+&quot;Num&quot;]+&quot;:&quot;+g[h]):(k&amp;&amp;(k+=&quot;,&quot;+l),d[l]=g[h]);else if(&quot;milestones&quot;==a||&quot;offsetMilestones&quot;==a)h=h.substring(0,h.length-1),g[h]&amp;&amp;b.contextDataMapping[h+&quot;s&quot;][g[h]]&amp;&amp;(f&amp;&amp;(f+=&quot;,&quot;+b.contextDataMapping[h+\n&quot;s&quot;][g[h]]),d.events2+=(d.events2?&quot;,&quot;:&quot;&quot;)+b.contextDataMapping[h+&quot;s&quot;][g[h]]);g[h]&amp;&amp;(g[h]=0);&quot;segment&quot;==a&amp;&amp;g[h+&quot;Num&quot;]&amp;&amp;(g[h+&quot;Num&quot;]=0)}d.linkTrackVars=k;d.linkTrackEvents=f};b.i=function(d,c,e,k,f){var a={},l=(new Date).getTime()/1E3,g,h,q=b.trackVars,s=b.trackEvents,t=b.trackSeconds,u=b.trackMilestones,v=b.trackOffsetMilestones,w=b.segmentByMilestones,x=b.segmentByOffsetMilestones,p,n,r=1,m={},y;b.channel||(b.channel=b.s.w.location.hostname);if(a=d&amp;&amp;b.list&amp;&amp;b.list[d]?b.list[d]:0)if(a.l&amp;&amp;(t=b.adTrackSeconds,\nu=b.adTrackMilestones,v=b.adTrackOffsetMilestones,w=b.adSegmentByMilestones,x=b.adSegmentByOffsetMilestones),0&gt;e&amp;&amp;(e=1==a.k&amp;&amp;0&lt;a.u?l-a.u+a.c:a.c),0&lt;a.length&amp;&amp;(e=e&lt;a.length?e:a.length),0&gt;e&amp;&amp;(e=0),a.offset=e,0&lt;a.length&amp;&amp;(a.e=a.offset/a.length*100,a.e=100&lt;a.e?100:a.e),0&gt;a.c&amp;&amp;(a.c=e),y=a.D,m.name=d,m.ad=a.l,m.length=a.length,m.openTime=new Date,m.openTime.setTime(1E3*a.timestamp),m.offset=a.offset,m.percent=a.e,m.playerName=a.playerName,m.mediaEvent=0&gt;a.g?&quot;OPEN&quot;:1==c?&quot;PLAY&quot;:2==c?&quot;STOP&quot;:3==c?&quot;MONITOR&quot;:\n4==c?&quot;TRACK&quot;:5==c?&quot;COMPLETE&quot;:7==c?&quot;CLICK&quot;:&quot;CLOSE&quot;,2&lt;c||c!=a.k&amp;&amp;(2!=c||1==a.k)){f||(k=a.m,f=a.f);if(c){1==c&amp;&amp;(a.c=e);if((3&gt;=c||5&lt;=c)&amp;&amp;0&lt;=a.g&amp;&amp;(r=!1,q=s=&quot;None&quot;,a.g!=e)){h=a.g;h&gt;e&amp;&amp;(h=a.c,h&gt;e&amp;&amp;(h=e));p=u?u.split(&quot;,&quot;):0;if(0&lt;a.length&amp;&amp;p&amp;&amp;e&gt;=h)for(n=0;n&lt;p.length;n++)(g=p[n]?parseFloat(&quot;&quot;+p[n]):0)&amp;&amp;h/a.length*100&lt;g&amp;&amp;a.e&gt;=g&amp;&amp;(r=!0,n=p.length,m.mediaEvent=&quot;MILESTONE&quot;,a.p=m.milestone=g);if((p=v?v.split(&quot;,&quot;):0)&amp;&amp;e&gt;=h)for(n=0;n&lt;p.length;n++)(g=p[n]?parseFloat(&quot;&quot;+p[n]):0)&amp;&amp;h&lt;g&amp;&amp;e&gt;=g&amp;&amp;(r=!0,n=p.length,m.mediaEvent=\n&quot;OFFSET_MILESTONE&quot;,a.q=m.offsetMilestone=g)}if(a.L||!f){if(w&amp;&amp;u&amp;&amp;0&lt;a.length){if(p=u.split(&quot;,&quot;))for(p.push(&quot;100&quot;),n=h=0;n&lt;p.length;n++)if(g=p[n]?parseFloat(&quot;&quot;+p[n]):0)a.e&lt;g&amp;&amp;(k=n+1,f=&quot;M:&quot;+h+&quot;-&quot;+g,n=p.length),h=g}else if(x&amp;&amp;v&amp;&amp;(p=v.split(&quot;,&quot;)))for(p.push(&quot;&quot;+(0&lt;a.length?a.length:&quot;E&quot;)),n=h=0;n&lt;p.length;n++)if((g=p[n]?parseFloat(&quot;&quot;+p[n]):0)||&quot;E&quot;==p[n]){if(e&lt;g||&quot;E&quot;==p[n])k=n+1,f=&quot;O:&quot;+h+&quot;-&quot;+g,n=p.length;h=g}f&amp;&amp;(a.L=!0)}(f||a.f)&amp;&amp;f!=a.f&amp;&amp;(a.F=!0,a.f||(a.m=k,a.f=f),0&lt;=a.g&amp;&amp;(r=!0));(2&lt;=c||100&lt;=a.e)&amp;&amp;a.c&lt;e&amp;&amp;\n(a.C+=e-a.c,a.a+=e-a.c);if(2&gt;=c||3==c&amp;&amp;!a.k)a.n+=(1==c||3==c?&quot;S&quot;:&quot;E&quot;)+Math.floor(e),a.k=3==c?1:c;!r&amp;&amp;0&lt;=a.g&amp;&amp;3&gt;=c&amp;&amp;(t=t?t:0)&amp;&amp;a.a&gt;=t&amp;&amp;(r=!0,m.mediaEvent=&quot;SECONDS&quot;);a.u=l;a.c=e}if(!c||3&gt;=c&amp;&amp;100&lt;=a.e)2!=a.k&amp;&amp;(a.n+=&quot;E&quot;+Math.floor(e)),c=0,q=s=&quot;None&quot;,m.mediaEvent=&quot;CLOSE&quot;;7==c&amp;&amp;(r=m.clicked=a.r=!0);if(5==c||b.completeByCloseOffset&amp;&amp;(!c||100&lt;=a.e)&amp;&amp;0&lt;a.length&amp;&amp;e&gt;=a.length-b.completeCloseOffsetThreshold)r=m.complete=a.complete=!0;l=m.mediaEvent;&quot;MILESTONE&quot;==l?l+=&quot;_&quot;+m.milestone:&quot;OFFSET_MILESTONE&quot;==l&amp;&amp;(l+=\n&quot;_&quot;+m.offsetMilestone);a.I[l]?m.eventFirstTime=!1:(m.eventFirstTime=!0,a.I[l]=1);m.event=m.mediaEvent;m.timePlayed=a.C;m.segmentNum=a.m;m.segment=a.f;m.segmentLength=a.B;b.monitor&amp;&amp;4!=c&amp;&amp;b.monitor(b.s,m);b.Heartbeat&amp;&amp;b.Heartbeat.enabled&amp;&amp;0&lt;=a.g&amp;&amp;(r=!1);0==c&amp;&amp;b.M(d);r&amp;&amp;a.D==y&amp;&amp;(d={contextData:{}},d.linkTrackVars=q,d.linkTrackEvents=s,d.linkTrackVars||(d.linkTrackVars=&quot;&quot;),d.linkTrackEvents||(d.linkTrackEvents=&quot;&quot;),b.P(d,a),d.linkTrackVars||(d[&quot;!linkTrackVars&quot;]=1),d.linkTrackEvents||(d[&quot;!linkTrackEvents&quot;]=\n1),b.s.track(d),a.F?(a.m=k,a.f=f,a.A=!0,a.F=!1):0&lt;a.a&amp;&amp;(a.A=!1),a.n=&quot;&quot;,a.p=a.q=0,a.a-=Math.floor(a.a),a.g=e,a.D++)}return a};b.O=function(d,c,e,k,f){var a=0;if(d&amp;&amp;(!b.autoTrackMediaLengthRequired||c&amp;&amp;0&lt;c)){if(b.list&amp;&amp;b.list[d])a=1;else if(1==e||3==e)b.open(d,c,&quot;HTML5 Video&quot;,f),a=1;a&amp;&amp;b.i(d,e,k,-1,0)}};b.attach=function(d){var c,e,k;d&amp;&amp;d.tagName&amp;&amp;&quot;VIDEO&quot;==d.tagName.toUpperCase()&amp;&amp;(b.o||(b.o=function(c,a,d){var e,h;b.autoTrack&amp;&amp;(e=c.currentSrc,(h=c.duration)||(h=-1),0&gt;d&amp;&amp;(d=c.currentTime),b.O(e,h,a,\nd,c))}),c=function(){b.o(d,1,-1)},e=function(){b.o(d,1,-1)},b.j(d,&quot;play&quot;,c),b.j(d,&quot;pause&quot;,e),b.j(d,&quot;seeking&quot;,e),b.j(d,&quot;seeked&quot;,c),b.j(d,&quot;ended&quot;,function(){b.o(d,0,-1)}),b.j(d,&quot;timeupdate&quot;,c),k=function(){d.paused||d.ended||d.seeking||b.o(d,3,-1);setTimeout(k,1E3)},k())};b.j=function(b,c,e){b.attachEvent?b.attachEvent(&quot;on&quot;+c,e):b.addEventListener&amp;&amp;b.addEventListener(c,e,!1)};void 0==b.completeByCloseOffset&amp;&amp;(b.completeByCloseOffset=1);void 0==b.completeCloseOffsetThreshold&amp;&amp;(b.completeCloseOffsetThreshold=\n1);b.Heartbeat={};b.N=function(){var d,c;if(b.autoTrack&amp;&amp;(d=b.s.d.getElementsByTagName(&quot;VIDEO&quot;)))for(c=0;c&lt;d.length;c++)b.attach(d[c])};b.j(q,&quot;load&quot;,b.N)}\n\n/*\n==========END MEDIA MODULE==========\n*/\n\n\n/***** MEDIA MODULE CONFIGURATION FOR MILESTONE TRACKING START*****/\n\ns.loadModule(&quot;Media&quot;)\ns.Media.onLoad = function(s,m) {\n\ts.Media.autoTrack= false;\n\t/*Track Milestone 10%, 25%, 50%, 75%, 95%\n\t* Delete unwanted milestone if necessary\n\t*/\n\ts.Media.trackMilestones=&quot;10,25,50,75,95&quot;;\n\ts.Media.playerName= &quot;TUI Brightcove HTML5 Player&quot;;\n\ts.Media.segmentByMilestones = true;\n\ts.Media.trackUsingContextData = true;\n\t/* Add reserved context data variables as needed to populate default metrics\n\t*   a.media.progress10, a.media.progress25, a.media.progress50 ,a.media.progress75, a.media.progress95\n\t*\ta.media.friendlyname --&gt; to populate Video Name report\n\t*/\n\ts.Media.trackVars=&quot;contextData.a.media.progress10,contextData.a.media.progress25,contextData.a.media.progress50,contextData.a.media.progress75,contextData.a.media.progress95,contextData.a.media.friendlyname&quot;;\n};\n\n/*\n* USE MEDIA MONITOR TO SEND THE ADDITIONAL a.media.progressXX variables: needed as no processing rules are created by default to handle media.milestone\n*/\n\ns.Media.monitor = function (s,media){\n\t\n\t\t\n\t//Reset Variables\n\ts.contextData['a.media.progress10'] = s.contextData['a.media.progress25'] = s.contextData['a.media.progress50'] = s.contextData['a.media.progress75'] = s.contextData['a.media.progress95'] = s.contextData['a.media.friendlyname'] =  '';\n\t\n\ts.contextData['a.media.friendlyname'] = '' //assign custom friendly name if needed\n\t//if no custom friendly name\n\tif(!s.contextData['a.media.friendlyname']){\n\t\t//default to media.name\n\t\ts.contextData['a.media.friendlyname'] = media.name;\n\t}\n\t\n\t//If MILESTONE EVENT\n\tif(media.event==&quot;MILESTONE&quot;) {\n\t\t//Check which milestone has been reached: media.milestone\n\t\tswitch (media.milestone) {\n\t\t\t//When the 10% milestone is reached add a.media.progress10 to the Adobe Analytics request\n\t\t\tcase 10:\n\t\t\t\ts.contextData['a.media.progress10'] = true;\n\t\t\t\ts.Media.track(media.name);\n\t\t\t\tbreak;\n\t\t\t//When the 25% milestone is reached add a.media.progress25 to the Adobe Analytics request\n\t\t\tcase 25:\n\t\t\t\ts.contextData['a.media.progress25'] = true;\n\t\t\t\ts.Media.track(media.name);\n\t\t\t\tbreak;\n\t\t\t//When the 50% milestone is reached add a.media.progress50 to the Adobe Analytics request\n\t\t\tcase 50:\n\t\t\t\ts.contextData['a.media.progress50'] = true;\n\t\t\t\ts.Media.track(media.name);\n\t\t\t\tbreak;\n\t\t\t//When the 75% milestone is reached add a.media.progress75 to the Adobe Analytics request\n\t\t\tcase 75:\n\t\t\t\ts.contextData['a.media.progress75'] = true;\n\t\t\t\ts.Media.track(media.name);\n\t\t\t\tbreak;\n\t\t\t//When the 95% milestone is reached add a.media.progress95 to the Adobe Analytics request\n\t\t\tcase 95:\n\t\t\t\ts.contextData['a.media.progress95'] = true;\n\t\t\t\ts.Media.track(media.name);\n\t\t\t\tbreak;\n\t\t\t//When any other % milestone is reached do nothing\n\t\t\tdefault:\n\t\t\t\tbreak;\n\t\t}\n\t}\n}\n/***** MEDIA MODULE CONFIGURATION FOR MILESTONE TRACKING END*****/\n","name":"qa"}}},"labels":"","constructor":"","scope":"6,5","status":"active","advExecOption":"alr","type":"new","blockPubTargetsLogic":"true","publishedTargets":"dev","sort":"9","notes":"","selectedTargets":{"qa":"true","dev":"true","prod":"true"},"extType":"Advanced Javascript Code","_id":"23","publish_revisions":{"svr_save_timestamps":{"prod":"202101271235","dev":"202104211136","qa":"202104211136"},"last_modified":"202104211136"}},"24":{"title":"Copy b to utag.data when possible","id":"100036","_ignoreError":"false","code":"if (typeof b === 'object' &amp;&amp; utag &amp;&amp; typeof utag.data === 'object') {\n  var keys = Object.keys(b)\n  var values = Object.values(b)\n  keys.forEach((key, index) =&gt; {\n    var value = values[index]\n    utag.data[key] = value\n  })\n}","initialize":"","labels":"","status":"inactive","scope":"global","constructor":"","advExecOption":"blr","type":"new","notes":"","scopevars":"","sort":"3","selectedTargets":{"qa":"true","prod":"false","dev":"true"},"_id":"24","extType":"Javascript Code","publish_revisions":{"svr_save_timestamps":{"dev":"202104211136","qa":"202104211136"},"last_modified":"202104211136"}},"25":{"_ignoreError":"false","id":"100036","title":"Test Alternative to DOM Ready (to solve timing issues)","advExecOption":"blr","constructor":"","161900181134000017_filter":"dom_ready","scope":"global","status":"active","initialize":"","labels":"","161900181134000017_source":"js.ut.event","code":"console.log('dom_ready b.pageCategory contents to confirm Foundation is working - &quot;' + b.pageCategory + '&quot;')","publishedTargets":"dev","type":"new","161900181134000017_filtertype":"equals_ignore_case","publish_revisions":{"svr_save_timestamps":{"dev":"202104211136"},"last_modified":"202104211136"},"extType":"Javascript Code","_id":"25","selectedTargets":{"qa":"false","prod":"false","dev":"true"},"sort":"4","notes":"","scopevars":""},"26":{"161900142374300016_setoption":"code","161900142374300016_set":"js.pageCategory","title":"UDO - Foundation","id":"100003","status":"active","constructor":"","scope":"global","advExecOption":"blr","initialize":"","publishedTargets":"dev","type":"new","_id":"26","extType":"Set Data Values","publish_revisions":{"last_modified":"202104211136","svr_save_timestamps":{"dev":"202104211136","qa":"202104211136"}},"161900142374300016_settovar":"","notes":"","161900142374300016_settotext":"b['page.pageCategory']","sort":"2","selectedTargets":{"prod":"true","dev":"true","qa":"true"}}},"labels":{"1":{"name":"GTM_Listerners","color":"tempting-turquoise"}},"createManifest":"false","settings":{"datacloud_revision":"1618837227526","lastdefineid":"322","lastcustomizeid":"0","account":"services-caleb","profileid":"tui-listener-staging","lastlabelid":"0","lastmanageid":"13","creation":"202009281219","revision":"202104211136","datacloud_profile":"main","lastloadruleid":"1","minorrevision":"202104211136","library":"NONE"},"versionorigin":"202104211120","manage":{"1":{"config_account_id":"","advconfig_src":"","advconfig_send":"yes","notes":"","sort":"1","new_flag":"true","selectedTargets":{"qa":"false","prod":"false","dev":"false"},"_id":"1","lastTemplateUpdate":"1609789336170","tag_id":"21012","publish_revisions":{"svr_save_timestamps":{"qa":"202101151252","prod":"202101151252","dev":"202101131210"},"last_modified":"202101131210"},"title":"Uniqodo","id":"1","advconfig_wait":"yes","advconfig_bundle":"no","advconfig_loadtype":"","tag_name":"Uniqodo","loadrule":"all","advconfig_optout":"yes","labels":"","status":"inactive","scope":"all","loadrule_join_operator":"all"},"2":{"config_tracklinks":"true","config_namespace":"tuiuk","labels":"","config_sobject":"s","advconfig_bundle":"no","id":"2","publish_revisions":{"last_modified":"202101151252","svr_save_timestamps":{"prod":"202101151252","dev":"202101151252","qa":"202101151252"}},"config_viewthroughmaxtries":"3","_id":"2","map":{"1":{"key":"tui","variable":"pageName, channel, prop48, eVar48","type":"static.text"},"2":{"dsID":"225","key":"event_name","variable":"linkName","type":"js"},"3":{"key":"map_eVar230","dsID":"226","type":"js","variable":"eVar230"},"4":{"variable":"combineLinkVar","type":"static.js","key":"true"},"5":{"type":"js","variable":"linkTrackEvents","dsID":"224","key":"adobeLinkTrackEvents"},"6":{"dsID":"223","key":"adobeLinkTrackVars","type":"js","variable":"linkTrackVars"}},"sort":"6","advconfig_send":"yes","config_runviewthrough":"no","advconfig_src":"","loadrule_join_operator":"all","status":"inactive","scope":"all","config_reportsuite":"tuiukdev","config_server":"tuiuk.d1.sc.omtrdc.net","config_serversecure":"tuiuk.d1.sc.omtrdc.net","advconfig_optout":"yes","advconfig_loadtype":"","tag_name":"Adobe Analytics AppMeasurement for JS","loadrule":"all","advconfig_wait":"yes","config_tagdevicetype":"standard","title":"Adobe Analytics AppMeasurement for JS","config_cloudid":"41E27DA552A6473A0A490D4D@AdobeOrg","lastTemplateUpdate":"1610711410308","tag_id":"19063","selectedTargets":{"prod":"false","dev":"true","qa":"true"},"config_runclearvars":"yes","notes":"daf","config_viewthroughinterval":"100","config_detectserial":"yes","new_flag":"true","config_internalfilters":"javascript:,firstchoice.co.uk,thomson.co.uk,falconholidays.ie,tui.co.uk,tuiholidays.ie,i.4see.mobi,survey.foreseeresults.com,tuiretailagents.thomson.co.uk,falconretailagents.falconholidays.ie,tuiretailhish-live.thomsonuk.dnsroot.biz,falconretailhish-live.thomsonuk.dnsroot.biz,money4travel.com,inbro.net,tuitickets.com,amazonaws.com,tuiprjuat.co.uk,firstchoiceprjuat.co.uk,tuiholidaysprjuat.ie,thomsonuk.dnsroot.biz","config_tagversion":"am2140"},"3":{"notes":"","sort":"0","new_flag":"true","selectedTargets":{"qa":"true","dev":"true","prod":"true"},"_id":"3","tag_id":"1191","lastTemplateUpdate":"1610630558252","publish_revisions":{"last_modified":"202101141323","svr_save_timestamps":{"qa":"202101151252","prod":"202101151252","dev":"202101141323"}},"config_tagversion":"aid511","advconfig_src":"","config_adobe_org_id":"41E27DA552A6473A0A490D4D@AdobeOrg","config_marketingCloudServerSecure":"","publishedTargets":"dev","advconfig_send":"yes","advconfig_optout":"yes","labels":"","status":"active","scope":"all","loadrule_join_operator":"all","config_marketingCloudServer":"","config_trackingServer":"","config_trackingServerSecure":"","title":"Adobe Experience Cloud ID Service","id":"3","advconfig_bundle":"yes","advconfig_wait":"no","advconfig_loadtype":"","tag_name":"Adobe Experience Cloud ID Service","loadrule":"all"},"5":{"publish_revisions":{"svr_save_timestamps":{"dev":"202101191346","prod":"202101271235","qa":"202101191346"},"last_modified":"202101191345"},"config_viewthroughmaxtries":"3","_id":"5","sort":"7","map":{"1":{"key":"tui","variable":"pageName, channel, prop48, eVar48","type":"static.text"},"2":{"key":"event_name","dsID":"225","variable":"linkName","type":"js"},"3":{"variable":"eVar230","type":"js","key":"map_eVar230","dsID":"226"},"4":{"key":"true","variable":"combineLinkVar","type":"static.js"},"5":{"key":"adobeLinkTrackEvents","dsID":"224","variable":"linkTrackEvents","type":"js"},"6":{"variable":"linkTrackVars","type":"js","dsID":"223","key":"adobeLinkTrackVars"},"7":{"key":"hardcoded_true","variable":"hardcoded_true:event500, hardcoded_true:event501, hardcoded_true:event502","type":"static.text"}},"advconfig_send":"yes","config_runviewthrough":"no","copiedFromTag":"2","advconfig_src":"","config_tracklinks":"true","config_namespace":"tuiuk","labels":"","config_sobject":"s","advconfig_bundle":"no","id":"5","config_cloudid":"41E27DA552A6473A0A490D4D@AdobeOrg","tag_id":"19063","lastTemplateUpdate":"1610714936882","config_runclearvars":"yes","selectedTargets":{"qa":"true","prod":"true","dev":"true"},"new_flag":"true","config_viewthroughinterval":"100","notes":"daf","config_detectserial":"yes","publishedTargets":"dev","config_internalfilters":"javascript:,firstchoice.co.uk,thomson.co.uk,falconholidays.ie,tui.co.uk,tuiholidays.ie,i.4see.mobi,survey.foreseeresults.com,tuiretailagents.thomson.co.uk,falconretailagents.falconholidays.ie,tuiretailhish-live.thomsonuk.dnsroot.biz,falconretailhish-live.thomsonuk.dnsroot.biz,money4travel.com,inbro.net,tuitickets.com,amazonaws.com,tuiprjuat.co.uk,firstchoiceprjuat.co.uk,tuiholidaysprjuat.ie,thomsonuk.dnsroot.biz","config_tagversion":"am2220","loadrule_join_operator":"all","scope":"2","status":"active","config_reportsuite":"tuiukdev","config_server":"tuiuk.d1.sc.omtrdc.net","advconfig_optout":"yes","config_serversecure":"tuiuk.d1.sc.omtrdc.net","tag_name":"Adobe Analytics AppMeasurement for JS","loadrule":"2","advconfig_loadtype":"","advconfig_wait":"yes","title":"Adobe Analytics AppMeasurement for JS - Marketplace","config_tagdevicetype":"standard"},"6":{"config_internalfilters":"javascript:,firstchoice.co.uk,thomson.co.uk,falconholidays.ie,tui.co.uk,tuiholidays.ie,i.4see.mobi,survey.foreseeresults.com,tuiretailagents.thomson.co.uk,falconretailagents.falconholidays.ie,tuiretailhish-live.thomsonuk.dnsroot.biz,falconretailhish-live.thomsonuk.dnsroot.biz,money4travel.com,inbro.net,tuitickets.com,amazonaws.com,tuiprjuat.co.uk,firstchoiceprjuat.co.uk,tuiholidaysprjuat.ie,thomsonuk.dnsroot.biz","publishedTargets":"dev","config_tagversion":"am2220","lastTemplateUpdate":"1610715725093","tag_id":"19063","config_cloudid":"41E27DA552A6473A0A490D4D@AdobeOrg","notes":"daf","config_viewthroughinterval":"100","config_detectserial":"yes","new_flag":"true","selectedTargets":{"qa":"true","prod":"true","dev":"true"},"config_runclearvars":"yes","advconfig_wait":"yes","advconfig_loadtype":"","loadrule":"3","tag_name":"Adobe Analytics AppMeasurement for JS","config_tagdevicetype":"standard","title":"Adobe Analytics AppMeasurement for JS - Fixed","status":"active","scope":"3","loadrule_join_operator":"all","advconfig_optout":"yes","config_serversecure":"tuiuk.d1.sc.omtrdc.net","config_reportsuite":"tuiukdev","config_server":"tuiuk.d1.sc.omtrdc.net","advconfig_send":"yes","advconfig_src":"","copiedFromTag":"5","config_runviewthrough":"no","_id":"6","config_viewthroughmaxtries":"3","publish_revisions":{"svr_save_timestamps":{"prod":"202101271235","dev":"202101191346","qa":"202101191346"},"last_modified":"202101191345"},"map":{"1":{"type":"static.text","variable":"pageName, channel, prop48, eVar48","key":"tui"},"2":{"key":"event_name","dsID":"225","variable":"linkName","type":"js"},"3":{"type":"js","variable":"eVar230","dsID":"226","key":"map_eVar230"},"4":{"key":"true","variable":"combineLinkVar","type":"static.js"},"5":{"key":"adobeLinkTrackEvents","dsID":"224","variable":"linkTrackEvents","type":"js"},"6":{"type":"js","variable":"linkTrackVars","key":"adobeLinkTrackVars","dsID":"223"}},"sort":"8","advconfig_bundle":"no","config_sobject":"s","id":"6","config_namespace":"tuiuk","config_tracklinks":"true","labels":""},"9":{"advconfig_src":"","config_send_page_view":"true","config_clear_global_vars":"false","publishedTargets":"dev","advconfig_send":"yes","new_flag":"true","sort":"9","config_data_layer_name":"","notes":"","config_gaobject":"","selectedTargets":{"prod":"true","dev":"true","qa":"true"},"_id":"9","lastTemplateUpdate":"1611747012452","tag_id":"7142","config_tracking_id":"G-R1P4W35ZRQ","publish_revisions":{"last_modified":"202101271135","svr_save_timestamps":{"qa":"202101271235","dev":"202101271135","prod":"202101271235"}},"title":"Google Analytics 4 (gtag.js) (BETA)","id":"9","advconfig_wait":"yes","advconfig_bundle":"no","tag_name":"Google Analytics 4 (gtag.js) (BETA)","loadrule":"all","advconfig_loadtype":"","advconfig_optout":"yes","labels":"","scope":"all","status":"active","loadrule_join_operator":"all"},"10":{"labels":"","advconfig_bundle":"no","config_use_amp_client_id":"false","id":"10","_id":"10","config_cross_track_domains":"","config_cross_track":"false","publish_revisions":{"svr_save_timestamps":{"qa":"202101271235","prod":"202101271235","dev":"202101271201"},"last_modified":"202101271150"},"config_data_layer_name":"","sort":"2","config_allow_display_features":"false","advconfig_send":"yes","advconfig_src":"","scope":"5","status":"active","loadrule_join_operator":"all","advconfig_optout":"yes","config_transport_type":"default","config_enhanced_link_attribution":"false","advconfig_wait":"yes","tag_name":"Google Analytics (gtag.js)","loadrule":"5","advconfig_loadtype":"","title":"Google Analytics (gtag.js) - Tag 1, Marketplace","config_anonymize_ip":"false","tag_id":"7133","lastTemplateUpdate":"1611747032611","config_tracking_id":"UA-107596466-3","new_flag":"true","config_allow_anchor":"false","notes":"","config_optimize_id":"","config_gaobject":"","selectedTargets":{"qa":"true","prod":"true","dev":"true"},"config_clear_global_vars":"false","publishedTargets":"dev","config_screen_view":"false"},"11":{"advconfig_bundle":"no","config_use_amp_client_id":"false","id":"11","labels":"","config_allow_display_features":"false","advconfig_send":"yes","advconfig_src":"","copiedFromTag":"10","config_cross_track_domains":"","_id":"11","config_cross_track":"false","publish_revisions":{"svr_save_timestamps":{"prod":"202101271235","dev":"202101271214","qa":"202101271235"},"last_modified":"202101271214"},"config_data_layer_name":"","sort":"3","advconfig_wait":"yes","config_enhanced_link_attribution":"false","advconfig_loadtype":"","tag_name":"Google Analytics (gtag.js)","loadrule":"5","title":"Google Analytics (gtag.js) - Tag 2, Marketplace","status":"active","scope":"5","loadrule_join_operator":"all","advconfig_optout":"yes","config_transport_type":"default","config_clear_global_vars":"false","publishedTargets":"dev","config_screen_view":"false","tag_id":"7133","lastTemplateUpdate":"1611747032611","config_anonymize_ip":"false","config_tracking_id":"UA-107596466-1","notes":"","config_allow_anchor":"false","new_flag":"true","config_gaobject":"","selectedTargets":{"dev":"true","prod":"true","qa":"true"},"config_optimize_id":""},"12":{"copiedFromTag":"10","advconfig_src":"","advconfig_send":"yes","config_allow_display_features":"false","config_data_layer_name":"","sort":"4","config_cross_track":"false","publish_revisions":{"last_modified":"202101271214","svr_save_timestamps":{"qa":"202101271235","prod":"202101271235","dev":"202101271214"}},"_id":"12","config_cross_track_domains":"","id":"12","config_use_amp_client_id":"false","advconfig_bundle":"no","labels":"","config_screen_view":"false","publishedTargets":"dev","config_clear_global_vars":"false","selectedTargets":{"qa":"true","dev":"true","prod":"true"},"config_gaobject":"","config_optimize_id":"","notes":"","config_allow_anchor":"false","new_flag":"true","config_tracking_id":"UA-107596466-3","tag_id":"7133","lastTemplateUpdate":"1611748831012","config_anonymize_ip":"false","title":"Google Analytics (gtag.js) - Tag 1, Fixed","advconfig_loadtype":"","tag_name":"Google Analytics (gtag.js)","loadrule":"6","advconfig_wait":"yes","config_enhanced_link_attribution":"false","config_transport_type":"default","advconfig_optout":"yes","loadrule_join_operator":"all","status":"active","scope":"6"},"13":{"advconfig_send":"yes","config_allow_display_features":"false","copiedFromTag":"11","advconfig_src":"","publish_revisions":{"svr_save_timestamps":{"qa":"202101271235","prod":"202101271235","dev":"202101271214"},"last_modified":"202101271214"},"config_cross_track":"false","_id":"13","config_cross_track_domains":"","sort":"5","config_data_layer_name":"","advconfig_bundle":"no","id":"13","config_use_amp_client_id":"false","labels":"","publishedTargets":"dev","config_clear_global_vars":"false","config_screen_view":"false","config_tracking_id":"UA-107596466-1","lastTemplateUpdate":"1611748856367","tag_id":"7133","config_anonymize_ip":"false","config_gaobject":"","selectedTargets":{"qa":"true","prod":"true","dev":"true"},"config_optimize_id":"","notes":"","new_flag":"true","config_allow_anchor":"false","advconfig_loadtype":"","tag_name":"Google Analytics (gtag.js)","loadrule":"6","advconfig_wait":"yes","config_enhanced_link_attribution":"false","title":"Google Analytics (gtag.js) - Tag 2, Fixed","loadrule_join_operator":"all","status":"active","scope":"6","config_transport_type":"default","advconfig_optout":"yes"}},"define":{"138":{"title":"","description":"","name":"utag_main_tealium_test_session","type":"cp","labels":"","_id":"138","publish_revisions":{"svr_save_timestamps":{"prod":"202101271235","dev":"202104211136","qa":"202104211136"},"last_modified":"202104211136"}},"139":{"description":"Should be 'true' or 'false'","title":"","labels":"","type":"qp","name":"tealium_test","_id":"139","publish_revisions":{"svr_save_timestamps":{"qa":"202104211136","prod":"202101271235","dev":"202104211136"},"last_modified":"202104211136"}},"140":{"publish_revisions":{"last_modified":"202104211136","svr_save_timestamps":{"qa":"202104211136","prod":"202101271235","dev":"202104211136"}},"_id":"140","name":"utagdb","type":"cp","labels":"","title":"","description":""},"141":{"_id":"141","publish_revisions":{"svr_save_timestamps":{"qa":"202104211136","dev":"202104211136","prod":"202101271235"},"last_modified":"202104211136"},"title":"","description":"","name":"page_type","type":"js","labels":""},"222":{"_id":"222","publish_revisions":{"last_modified":"202104211136","svr_save_timestamps":{"qa":"202104211136","prod":"202101271235","dev":"202104211136"}},"title":"","description":"","name":"ut.event","type":"js","labels":""},"223":{"_id":"223","publish_revisions":{"svr_save_timestamps":{"qa":"202104211136","prod":"202101271235","dev":"202104211136"},"last_modified":"202104211136"},"description":"","title":"","type":"js","labels":"","name":"adobeLinkTrackVars"},"224":{"publish_revisions":{"last_modified":"202104211136","svr_save_timestamps":{"prod":"202101271235","dev":"202104211136","qa":"202104211136"}},"_id":"224","name":"adobeLinkTrackEvents","type":"js","labels":"","title":"","description":""},"225":{"publish_revisions":{"svr_save_timestamps":{"qa":"202104211136","dev":"202104211136","prod":"202101271235"},"last_modified":"202104211136"},"_id":"225","type":"js","labels":"","name":"event_name","description":"","title":""},"226":{"_id":"226","publish_revisions":{"last_modified":"202104211136","svr_save_timestamps":{"dev":"202104211136","prod":"202101271235","qa":"202104211136"}},"description":"","title":"","type":"js","labels":"","name":"map_eVar230"},"228":{"_id":"228","publish_revisions":{"last_modified":"202104211136","svr_save_timestamps":{"prod":"202101271235","dev":"202104211136","qa":"202104211136"}},"title":"","description":"","name":"mapToAdobeLinkTrackVars","type":"js","labels":""},"229":{"title":"","description":"","name":"mapToAdobeLinkTrackEvents","type":"js","labels":"","_id":"229","publish_revisions":{"last_modified":"202104211136","svr_save_timestamps":{"qa":"202104211136","dev":"202104211136","prod":"202101271235"}}},"230":{"_id":"230","publish_revisions":{"last_modified":"202104211136","svr_save_timestamps":{"qa":"202104211136","prod":"202101271235","dev":"202104211136"}},"title":"","description":"","name":"adobe_template_version","type":"qp","labels":""},"231":{"description":"","title":"","type":"qp","labels":"","name":"ga_template_version","_id":"231","publish_revisions":{"svr_save_timestamps":{"qa":"202104211136","prod":"202101271235","dev":"202104211136"},"last_modified":"202104211136"}},"322":{"title":"","description":"","name":"pageCategory","type":"js","_id":"322","publish_revisions":{"last_modified":"202104211136","svr_save_timestamps":{"dev":"202104211136","qa":"202104211136"}}},"323":{"type":"js","name":"event","description":"","title":"","publish_revisions":{"last_modified":"202104211136","svr_save_timestamps":{"qa":"202104211136","dev":"202104211136"}},"_id":"323"},"324":{"_id":"324","name":"Account Value Strings","type":"va","description":"Should contain account numbers and their value band","context":"visitor","imported":"AudienceStream","settings":{"origin_id":"5217","origin_name":"Account Value Strings","origin_type":"property_lists","origin_context":"visitor","account":"services-caleb","profileid":"main"}},"325":{"_id":"325","name":"Active browser type","type":"va","description":"The browser actively being used by the visitor","context":"current_visit","imported":"AudienceStream","settings":{"origin_id":"44","origin_name":"Active browser type","origin_type":"properties","origin_context":"current_visit","account":"services-caleb","profileid":"main"}},"326":{"_id":"326","name":"Active browser version","type":"va","description":"The browser version actively being used by the visitor","context":"current_visit","imported":"AudienceStream","settings":{"origin_id":"48","origin_name":"Active browser version","origin_type":"properties","origin_context":"current_visit","account":"services-caleb","profileid":"main"}},"327":{"_id":"327","name":"Active device","type":"va","description":"The device actively being used by the visitor","context":"current_visit","imported":"AudienceStream","settings":{"origin_id":"46","origin_name":"Active device","origin_type":"properties","origin_context":"current_visit","account":"services-caleb","profileid":"main"}},"328":{"_id":"328","name":"Active operating system","type":"va","description":"The operating system actively being used by the visitor","context":"current_visit","imported":"AudienceStream","settings":{"origin_id":"45","origin_name":"Active operating system","origin_type":"properties","origin_context":"current_visit","account":"services-caleb","profileid":"main"}},"329":{"_id":"329","name":"Active platform","type":"va","description":"The platform actively being used by the visitor","context":"current_visit","imported":"AudienceStream","settings":{"origin_id":"47","origin_name":"Active platform","origin_type":"properties","origin_context":"current_visit","account":"services-caleb","profileid":"main"}},"330":{"_id":"330","name":"Average visit duration in minutes","type":"va","description":"Average visit duration in minutes","context":"visitor","imported":"AudienceStream","settings":{"origin_id":"26","origin_name":"Average visit duration in minutes","origin_type":"metrics","origin_context":"visitor","account":"services-caleb","profileid":"main"}},"331":{"_id":"331","name":"Average visits per week","type":"va","description":"Average visits per week","context":"visitor","imported":"AudienceStream","settings":{"origin_id":"29","origin_name":"Average visits per week","origin_type":"metrics","origin_context":"visitor","account":"services-caleb","profileid":"main"}},"332":{"_id":"332","name":"Batch Tester","type":"va","description":"Testing the batch webhook","context":"visitor","imported":"AudienceStream","settings":{"origin_id":"5189","origin_name":"Batch Tester","origin_type":"badges","origin_context":"visitor","account":"services-caleb","profileid":"main"}},"333":{"_id":"333","name":"Blue","type":"va","description":"","context":"visitor","imported":"AudienceStream","settings":{"origin_id":"5067","origin_name":"Blue","origin_type":"badges","origin_context":"visitor","account":"services-caleb","profileid":"main"}},"334":{"_id":"334","name":"Brown","type":"va","description":"","context":"visitor","imported":"AudienceStream","settings":{"origin_id":"5055","origin_name":"Brown","origin_type":"badges","origin_context":"visitor","account":"services-caleb","profileid":"main"}},"335":{"_id":"335","name":"Cookie Sync ID - Assigned Rule","type":"va","description":"","context":"visitor","imported":"AudienceStream","settings":{"origin_id":"5075","origin_name":"Cookie Sync ID - Assigned Rule","origin_type":"properties","origin_context":"visitor","account":"services-caleb","profileid":"main"}},"336":{"_id":"336","name":"Cookie Sync ID - No Rule","type":"va","description":"","context":"visitor","imported":"AudienceStream","settings":{"origin_id":"5079","origin_name":"Cookie Sync ID - No Rule","origin_type":"properties","origin_context":"visitor","account":"services-caleb","profileid":"main"}},"337":{"_id":"337","name":"Counter (Last Seen)","type":"va","description":"","context":"visitor","imported":"AudienceStream","settings":{"origin_id":"5193","origin_name":"Counter (Last Seen)","origin_type":"properties","origin_context":"visitor","account":"services-caleb","profileid":"main"}},"338":{"_id":"338","name":"Direct visit","type":"va","description":"The user navigated directly to the site","context":"current_visit","imported":"AudienceStream","settings":{"origin_id":"14","origin_name":"Direct visit","origin_type":"flags","origin_context":"current_visit","account":"services-caleb","profileid":"main"}},"339":{"_id":"339","name":"Entry URL","type":"va","description":"URL of the first page visited","context":"current_visit","imported":"AudienceStream","settings":{"origin_id":"5","origin_name":"Entry URL","origin_type":"properties","origin_context":"current_visit","account":"services-caleb","profileid":"main"}},"340":{"_id":"340","name":"Event count","type":"va","description":"Total number of events in visit","context":"current_visit","imported":"AudienceStream","settings":{"origin_id":"7","origin_name":"Event count","origin_type":"metrics","origin_context":"current_visit","account":"services-caleb","profileid":"main"}},"341":{"_id":"341","name":"Exit URL","type":"va","description":"URL of the last page visited","context":"current_visit","imported":"AudienceStream","settings":{"origin_id":"6","origin_name":"Exit URL","origin_type":"properties","origin_context":"current_visit","account":"services-caleb","profileid":"main"}},"342":{"_id":"342","name":"Fan","type":"va","description":"More than two total visits and more direct visits than refers","context":"visitor","imported":"AudienceStream","settings":{"origin_id":"30","origin_name":"Fan","origin_type":"badges","origin_context":"visitor","account":"services-caleb","profileid":"main"}},"343":{"_id":"343","name":"First 'test_value' only","type":"va","description":"","context":"visitor","imported":"AudienceStream","settings":{"origin_id":"5183","origin_name":"First 'test_value' only","origin_type":"properties","origin_context":"visitor","account":"services-caleb","profileid":"main"}},"344":{"_id":"344","name":"First visit","type":"va","description":"Date of first visit","context":"visitor","imported":"AudienceStream","settings":{"origin_id":"23","origin_name":"First visit","origin_type":"dates","origin_context":"visitor","account":"services-caleb","profileid":"main"}},"345":{"_id":"345","name":"Frequent visitor","type":"va","description":"Two or more average visits per week","context":"visitor","imported":"AudienceStream","settings":{"origin_id":"31","origin_name":"Frequent visitor","origin_type":"badges","origin_context":"visitor","account":"services-caleb","profileid":"main"}},"346":{"_id":"346","name":"Full entry URL (with attribution)","type":"va","description":"","context":"current_visit","imported":"AudienceStream","settings":{"origin_id":"5090","origin_name":"Full entry URL (with attribution)","origin_type":"properties","origin_context":"current_visit","account":"services-caleb","profileid":"main"}},"347":{"_id":"347","name":"Google GID","type":"va","description":"From the Google Cookie Match, saved here as string ","context":"visitor","imported":"AudienceStream","settings":{"origin_id":"5038","origin_name":"Google GID","origin_type":"properties","origin_context":"visitor","account":"services-caleb","profileid":"main"}},"348":{"_id":"348","name":"Green","type":"va","description":"","context":"visitor","imported":"AudienceStream","settings":{"origin_id":"5063","origin_name":"Green","origin_type":"badges","origin_context":"visitor","account":"services-caleb","profileid":"main"}},"349":{"_id":"349","name":"GUID - Compromised Profile","type":"va","description":"","context":"visitor","imported":"AudienceStream","settings":{"origin_id":"5179","origin_name":"GUID - Compromised Profile","origin_type":"badges","origin_context":"visitor","account":"services-caleb","profileid":"main"}},"350":{"_id":"350","name":"GUID - Compromised profile and a new visit [bln]","type":"va","description":"","context":"visitor","imported":"AudienceStream","settings":{"origin_id":"5340","origin_name":"GUID - Compromised profile and a new visit [bln]","origin_type":"flags","origin_context":"visitor","account":"services-caleb","profileid":"main"}},"351":{"_id":"351","name":"GUID - Count Has Changed This Visit","type":"va","description":"","context":"current_visit","imported":"AudienceStream","settings":{"origin_id":"5332","origin_name":"GUID - Count Has Changed This Visit","origin_type":"flags","origin_context":"current_visit","account":"services-caleb","profileid":"main"}},"352":{"_id":"352","name":"GUID - Count of seen [num]","type":"va","description":"","context":"visitor","imported":"AudienceStream","settings":{"origin_id":"5175","origin_name":"GUID - Count of seen [num]","origin_type":"metrics","origin_context":"visitor","account":"services-caleb","profileid":"main"}},"353":{"_id":"353","name":"GUID - Healthy Profile","type":"va","description":"","context":"visitor","imported":"AudienceStream","settings":{"origin_id":"5177","origin_name":"GUID - Healthy Profile","origin_type":"badges","origin_context":"visitor","account":"services-caleb","profileid":"main"}},"354":{"_id":"354","name":"GUID - Incomplete Profile","type":"va","description":"Should not use this profile, it's been used on a shared device and only contains partial information","context":"visitor","imported":"AudienceStream","settings":{"origin_id":"5334","origin_name":"GUID - Incomplete Profile","origin_type":"badges","origin_context":"visitor","account":"services-caleb","profileid":"main"}},"355":{"_id":"355","name":"GUID - Last seen [str]","type":"va","description":"","context":"visitor","imported":"AudienceStream","settings":{"origin_id":"5169","origin_name":"GUID - Last seen [str]","origin_type":"properties","origin_context":"visitor","account":"services-caleb","profileid":"main"}},"356":{"_id":"356","name":"GUID - None","type":"va","description":"","context":"visitor","imported":"AudienceStream","settings":{"origin_id":"5181","origin_name":"GUID - None","origin_type":"badges","origin_context":"visitor","account":"services-caleb","profileid":"main"}},"357":{"_id":"357","name":"Has Cookie Sync ID - With Rule","type":"va","description":"","context":"visitor","imported":"AudienceStream","settings":{"origin_id":"5077","origin_name":"Has Cookie Sync ID - With Rule","origin_type":"badges","origin_context":"visitor","account":"services-caleb","profileid":"main"}},"358":{"_id":"358","name":"Has Cookie Sync ID - Without Rule","type":"va","description":"","context":"visitor","imported":"AudienceStream","settings":{"origin_id":"5081","origin_name":"Has Cookie Sync ID - Without Rule","origin_type":"badges","origin_context":"visitor","account":"services-caleb","profileid":"main"}},"359":{"_id":"359","name":"Hyphen Lover","type":"va","description":"","context":"visitor","imported":"AudienceStream","settings":{"origin_id":"5088","origin_name":"Hyphen Lover","origin_type":"badges","origin_context":"visitor","account":"services-caleb","profileid":"main"}},"360":{"_id":"360","name":"Import - Age","type":"va","description":"","context":"visitor","imported":"AudienceStream","settings":{"origin_id":"5165","origin_name":"Import - Age","origin_type":"metrics","origin_context":"visitor","account":"services-caleb","profileid":"main"}},"361":{"_id":"361","name":"Import - Alpha","type":"va","description":"","context":"visitor","imported":"AudienceStream","settings":{"origin_id":"5161","origin_name":"Import - Alpha","origin_type":"properties","origin_context":"visitor","account":"services-caleb","profileid":"main"}},"362":{"_id":"362","name":"Import - Bool","type":"va","description":"","context":"visitor","imported":"AudienceStream","settings":{"origin_id":"5167","origin_name":"Import - Bool","origin_type":"flags","origin_context":"visitor","account":"services-caleb","profileid":"main"}},"363":{"_id":"363","name":"Import - Row Number","type":"va","description":"","context":"visitor","imported":"AudienceStream","settings":{"origin_id":"5163","origin_name":"Import - Row Number","origin_type":"metrics","origin_context":"visitor","account":"services-caleb","profileid":"main"}},"364":{"_id":"364","name":"Last 'test_value'","type":"va","description":"","context":"visitor","imported":"AudienceStream","settings":{"origin_id":"5187","origin_name":"Last 'test_value'","origin_type":"properties","origin_context":"visitor","account":"services-caleb","profileid":"main"}},"365":{"_id":"365","name":"Last conversion partner name","type":"va","description":"","context":"visitor","imported":"AudienceStream","settings":{"origin_id":"5034","origin_name":"Last conversion partner name","origin_type":"properties","origin_context":"visitor","account":"services-caleb","profileid":"main"}},"366":{"_id":"366","name":"Last event time","type":"va","description":"","context":"visitor","imported":"AudienceStream","settings":{"origin_id":"5318","origin_name":"Last event time","origin_type":"dates","origin_context":"visitor","account":"services-caleb","profileid":"main"}},"367":{"_id":"367","name":"Last event URL","type":"va","description":"Last event URL for visitor","context":"visitor","imported":"AudienceStream","settings":{"origin_id":"17","origin_name":"Last event URL","origin_type":"properties","origin_context":"visitor","account":"services-caleb","profileid":"main"}},"368":{"_id":"368","name":"Last UDO String","type":"va","description":"","context":"visitor","imported":"AudienceStream","settings":{"origin_id":"5145","origin_name":"Last UDO String","origin_type":"properties","origin_context":"visitor","account":"services-caleb","profileid":"main"}},"369":{"_id":"369","name":"Last visit","type":"va","description":"Date of last visit","context":"visitor","imported":"AudienceStream","settings":{"origin_id":"24","origin_name":"Last visit","origin_type":"dates","origin_context":"visitor","account":"services-caleb","profileid":"main"}},"370":{"_id":"370","name":"Last-seen tealium_event [str]","type":"va","description":"","context":"visitor","imported":"AudienceStream","settings":{"origin_id":"5324","origin_name":"Last-seen tealium_event [str]","origin_type":"properties","origin_context":"visitor","account":"services-caleb","profileid":"main"}},"371":{"_id":"371","name":"Last-seen Trace Id","type":"va","description":"","context":"visitor","imported":"AudienceStream","settings":{"origin_id":"5320","origin_name":"Last-seen Trace Id","origin_type":"properties","origin_context":"visitor","account":"services-caleb","profileid":"main"}},"372":{"_id":"372","name":"Lifetime browser types used (favorite)","type":"va","description":"Captures the favorite metric for Metric Set: Lifetime browser types used","context":"visitor","imported":"AudienceStream","settings":{"origin_id":"56","origin_name":"Lifetime browser types used (favorite)","origin_type":"properties","origin_context":"visitor","account":"services-caleb","profileid":"main"}},"373":{"_id":"373","name":"Lifetime browser versions used (favorite)","type":"va","description":"Captures the favorite metric for Metric Set: Lifetime browser versions used","context":"visitor","imported":"AudienceStream","settings":{"origin_id":"62","origin_name":"Lifetime browser versions used (favorite)","origin_type":"properties","origin_context":"visitor","account":"services-caleb","profileid":"main"}},"374":{"_id":"374","name":"Lifetime devices used (favorite)","type":"va","description":"Captures the favorite metric for Metric Set: Lifetime devices used","context":"visitor","imported":"AudienceStream","settings":{"origin_id":"54","origin_name":"Lifetime devices used (favorite)","origin_type":"properties","origin_context":"visitor","account":"services-caleb","profileid":"main"}},"375":{"_id":"375","name":"Lifetime event count","type":"va","description":"Total number of events triggered by user","context":"visitor","imported":"AudienceStream","settings":{"origin_id":"22","origin_name":"Lifetime event count","origin_type":"metrics","origin_context":"visitor","account":"services-caleb","profileid":"main"}},"376":{"_id":"376","name":"Lifetime operating systems used (favorite)","type":"va","description":"Captures the favorite metric for Metric Set: Lifetime operating systems used","context":"visitor","imported":"AudienceStream","settings":{"origin_id":"58","origin_name":"Lifetime operating systems used (favorite)","origin_type":"properties","origin_context":"visitor","account":"services-caleb","profileid":"main"}},"377":{"_id":"377","name":"Lifetime order total","type":"va","description":"","context":"visitor","imported":"AudienceStream","settings":{"origin_id":"5028","origin_name":"Lifetime order total","origin_type":"metrics","origin_context":"visitor","account":"services-caleb","profileid":"main"}},"378":{"_id":"378","name":"Lifetime order total by partner name (favorite)","type":"va","description":"Captures the favorite number for Tally: Lifetime order total by partner name","context":"visitor","imported":"AudienceStream","settings":{"origin_id":"5031","origin_name":"Lifetime order total by partner name (favorite)","origin_type":"properties","origin_context":"visitor","account":"services-caleb","profileid":"main"}},"379":{"_id":"379","name":"Lifetime platforms used (favorite)","type":"va","description":"Captures the favorite metric for Metric Set: Lifetime platforms used","context":"visitor","imported":"AudienceStream","settings":{"origin_id":"60","origin_name":"Lifetime platforms used (favorite)","origin_type":"properties","origin_context":"visitor","account":"services-caleb","profileid":"main"}},"380":{"_id":"380","name":"LIfetime Test Stream Values (favorite)","type":"va","description":"Captures the favorite number for Tally: LIfetime Test Stream Values","context":"visitor","imported":"AudienceStream","settings":{"origin_id":"5132","origin_name":"LIfetime Test Stream Values (favorite)","origin_type":"properties","origin_context":"visitor","account":"services-caleb","profileid":"main"}},"381":{"_id":"381","name":"Lifetime visit count","type":"va","description":"Total number of times user has visited site","context":"visitor","imported":"AudienceStream","settings":{"origin_id":"21","origin_name":"Lifetime visit count","origin_type":"metrics","origin_context":"visitor","account":"services-caleb","profileid":"main"}},"382":{"_id":"382","name":"Light Blue","type":"va","description":"","context":"visitor","imported":"AudienceStream","settings":{"origin_id":"5065","origin_name":"Light Blue","origin_type":"badges","origin_context":"visitor","account":"services-caleb","profileid":"main"}},"383":{"_id":"383","name":"Most Recent GCLID","type":"va","description":"This setup ignores the edge case where a user could click two ads from this campaign within the same session - it will only send the last GCLID in those cases.","context":"visitor","imported":"AudienceStream","settings":{"origin_id":"5312","origin_name":"Most Recent GCLID","origin_type":"properties","origin_context":"visitor","account":"services-caleb","profileid":"main"}},"384":{"_id":"384","name":"Most Recent GCLID has changed this visit","type":"va","description":"","context":"visitor","imported":"AudienceStream","settings":{"origin_id":"5314","origin_name":"Most Recent GCLID has changed this visit","origin_type":"flags","origin_context":"visitor","account":"services-caleb","profileid":"main"}},"385":{"_id":"385","name":"NO BOUNCERS HERE","type":"va","description":"","context":"visitor","imported":"AudienceStream","settings":{"origin_id":"5322","origin_name":"NO BOUNCERS HERE","origin_type":"badges","origin_context":"visitor","account":"services-caleb","profileid":"main"}},"386":{"_id":"386","name":"Optin (imported)","type":"va","description":"","context":"visitor","imported":"AudienceStream","settings":{"origin_id":"5149","origin_name":"Optin (imported)","origin_type":"properties","origin_context":"visitor","account":"services-caleb","profileid":"main"}},"387":{"_id":"387","name":"Orange","type":"va","description":"","context":"visitor","imported":"AudienceStream","settings":{"origin_id":"5059","origin_name":"Orange","origin_type":"badges","origin_context":"visitor","account":"services-caleb","profileid":"main"}},"388":{"_id":"388","name":"Pink","type":"va","description":"","context":"visitor","imported":"AudienceStream","settings":{"origin_id":"5069","origin_name":"Pink","origin_type":"badges","origin_context":"visitor","account":"services-caleb","profileid":"main"}},"389":{"_id":"389","name":"Product Prices Purchases - Last Order Imported (favorite)","type":"va","description":"Captures the favorite number for Tally: Product Prices Purchases - Last Order Imported","context":"current_visit","imported":"AudienceStream","settings":{"origin_id":"5120","origin_name":"Product Prices Purchases - Last Order Imported (favorite)","origin_type":"properties","origin_context":"current_visit","account":"services-caleb","profileid":"main"}},"390":{"_id":"390","name":"Product Purchase Count (Lifetime) (favorite)","type":"va","description":"Captures the favorite number for Tally: Product Purchase Count (Lifetime)","context":"visitor","imported":"AudienceStream","settings":{"origin_id":"5118","origin_name":"Product Purchase Count (Lifetime) (favorite)","origin_type":"properties","origin_context":"visitor","account":"services-caleb","profileid":"main"}},"391":{"_id":"391","name":"Red","type":"va","description":"","context":"visitor","imported":"AudienceStream","settings":{"origin_id":"5057","origin_name":"Red","origin_type":"badges","origin_context":"visitor","account":"services-caleb","profileid":"main"}},"392":{"_id":"392","name":"Referred visit","type":"va","description":"The user was referred from another site","context":"current_visit","imported":"AudienceStream","settings":{"origin_id":"13","origin_name":"Referred visit","origin_type":"flags","origin_context":"current_visit","account":"services-caleb","profileid":"main"}},"393":{"_id":"393","name":"Referrer","type":"va","description":"","context":"current_visit","imported":"AudienceStream","settings":{"origin_id":"5092","origin_name":"Referrer","origin_type":"properties","origin_context":"current_visit","account":"services-caleb","profileid":"main"}},"394":{"_id":"394","name":"Returning visitor","type":"va","description":"Return visitor","context":"visitor","imported":"AudienceStream","settings":{"origin_id":"27","origin_name":"Returning visitor","origin_type":"flags","origin_context":"visitor","account":"services-caleb","profileid":"main"}},"395":{"_id":"395","name":"Spend per Product (Lifetime) (favorite)","type":"va","description":"Captures the favorite number for Tally: Spend per Product (Lifetime)","context":"visitor","imported":"AudienceStream","settings":{"origin_id":"5122","origin_name":"Spend per Product (Lifetime) (favorite)","origin_type":"properties","origin_context":"visitor","account":"services-caleb","profileid":"main"}},"396":{"_id":"396","name":"Tealium Test Visit","type":"va","description":"Set via query parameter &quot;tealium_test_visit=true&quot;","context":"current_visit","imported":"AudienceStream","settings":{"origin_id":"5125","origin_name":"Tealium Test Visit","origin_type":"flags","origin_context":"current_visit","account":"services-caleb","profileid":"main"}},"397":{"_id":"397","name":"Tealium Visitor ID (Last Seen)","type":"va","description":"3rd party wins if present","context":"visitor","imported":"AudienceStream","settings":{"origin_id":"5129","origin_name":"Tealium Visitor ID (Last Seen)","origin_type":"properties","origin_context":"visitor","account":"services-caleb","profileid":"main"}},"398":{"_id":"398","name":"tealium_cf_visit_ttl","type":"va","description":"","context":"current_visit","imported":"AudienceStream","settings":{"origin_id":"82","origin_name":"tealium_cf_visit_ttl","origin_type":"properties","origin_context":"current_visit","account":"services-caleb","profileid":"main"}},"399":{"_id":"399","name":"Test Date","type":"va","description":"Expects format 2020-08-27T13:13:47.395Z ","context":"visitor","imported":"AudienceStream","settings":{"origin_id":"5195","origin_name":"Test Date","origin_type":"dates","origin_context":"visitor","account":"services-caleb","profileid":"main"}},"400":{"_id":"400","name":"Test Tally (favorite)","type":"va","description":"Captures the favorite number for Tally: Test Tally","context":"visitor","imported":"AudienceStream","settings":{"origin_id":"5093","origin_name":"Test Tally (favorite)","origin_type":"properties","origin_context":"visitor","account":"services-caleb","profileid":"main"}},"401":{"_id":"401","name":"test_tiq_string values (favorite)","type":"va","description":"Captures the favorite number for Tally: test_tiq_string values","context":"visitor","imported":"AudienceStream","settings":{"origin_id":"5136","origin_name":"test_tiq_string values (favorite)","origin_type":"properties","origin_context":"visitor","account":"services-caleb","profileid":"main"}},"402":{"_id":"402","name":"test_udo_string values (favorite)","type":"va","description":"Captures the favorite number for Tally: test_udo_string values","context":"visitor","imported":"AudienceStream","settings":{"origin_id":"5138","origin_name":"test_udo_string values (favorite)","origin_type":"properties","origin_context":"visitor","account":"services-caleb","profileid":"main"}},"403":{"_id":"403","name":"Tester","type":"va","description":"","context":"visitor","imported":"AudienceStream","settings":{"origin_id":"5141","origin_name":"Tester","origin_type":"badges","origin_context":"visitor","account":"services-caleb","profileid":"main"}},"404":{"_id":"404","name":"Total direct visits","type":"va","description":"Total direct visits","context":"visitor","imported":"AudienceStream","settings":{"origin_id":"15","origin_name":"Total direct visits","origin_type":"metrics","origin_context":"visitor","account":"services-caleb","profileid":"main"}},"405":{"_id":"405","name":"Total referred visits","type":"va","description":"Total referred visits","context":"visitor","imported":"AudienceStream","settings":{"origin_id":"16","origin_name":"Total referred visits","origin_type":"metrics","origin_context":"visitor","account":"services-caleb","profileid":"main"}},"406":{"_id":"406","name":"Total time spent on site in minutes","type":"va","description":"Sum duration of all user visits","context":"visitor","imported":"AudienceStream","settings":{"origin_id":"25","origin_name":"Total time spent on site in minutes","origin_type":"metrics","origin_context":"visitor","account":"services-caleb","profileid":"main"}},"407":{"_id":"407","name":"Unbadged","type":"va","description":"The visitor has not been assigned any badges","context":"visitor","imported":"AudienceStream","settings":{"origin_id":"32","origin_name":"Unbadged","origin_type":"badges","origin_context":"visitor","account":"services-caleb","profileid":"main"}},"408":{"_id":"408","name":"Visit duration","type":"va","description":"Visit duration in minutes","context":"current_visit","imported":"AudienceStream","settings":{"origin_id":"12","origin_name":"Visit duration","origin_type":"metrics","origin_context":"current_visit","account":"services-caleb","profileid":"main"}},"409":{"_id":"409","name":"Visit end","type":"va","description":"Visit end date","context":"current_visit","imported":"AudienceStream","settings":{"origin_id":"11","origin_name":"Visit end","origin_type":"dates","origin_context":"current_visit","account":"services-caleb","profileid":"main"}},"410":{"_id":"410","name":"Visit start","type":"va","description":"Visit start date","context":"current_visit","imported":"AudienceStream","settings":{"origin_id":"10","origin_name":"Visit start","origin_type":"dates","origin_context":"current_visit","account":"services-caleb","profileid":"main"}},"411":{"_id":"411","name":"Weeks since first visit","type":"va","description":"Weeks elapsed since first visit","context":"visitor","imported":"AudienceStream","settings":{"origin_id":"28","origin_name":"Weeks since first visit","origin_type":"metrics","origin_context":"visitor","account":"services-caleb","profileid":"main"}},"412":{"_id":"412","name":"Weeks since first visit temp","type":"va","description":"Temporary store for computer value","context":"current_visit","imported":"AudienceStream","settings":{"origin_id":"80","origin_name":"Weeks since first visit temp","origin_type":"metrics","origin_context":"current_visit","account":"services-caleb","profileid":"main"}},"413":{"_id":"413","name":"Yellow","type":"va","description":"","context":"visitor","imported":"AudienceStream","settings":{"origin_id":"5061","origin_name":"Yellow","origin_type":"badges","origin_context":"visitor","account":"services-caleb","profileid":"main"}}},"datacloud_merge":"true","datacloud_profile_name":"main","datacloud_revision":"1625226277606","experiments":[]}
