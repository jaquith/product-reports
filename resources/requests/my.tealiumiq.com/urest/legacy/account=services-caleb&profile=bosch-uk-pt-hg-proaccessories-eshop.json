{"lastmanageid":"2","test":{},"importable_library":"NONE","revision":"201708091402","publish":{"enable_utf8_encoding":"yes","smartFTP":{"prod":"preMCDN","dev":"preMCDN","qa":"preMCDN"},"minify":"yes"},"linkedProfiles":"{ \"lib-bosch-cookies\" : { \"rev\" : \"201708091315\" , \"env\" : \"Prod\"}}","label_relationships":null,"profile":"bosch-uk-pt-hg-proaccessories-eshop","publish_history":{"201708091402":{"status":"qa,prod","size":"34","201708091402":{"linkedProfiles":"{ \"lib-bosch-cookies\" : { \"rev\" : \"201708091315\" , \"env\" : \"Prod\"}}","title":"Initial publish - 2017/08/09 14:02","lastcustomizeid":"0","history":"[ { \"action\" : \"added_variable\" , \"data\" : { \"id\" : \"1\" , \"name\" : \"allow_required_cookies\" , \"type\" : \"js\" , \"imported\" : \"prod\" , \"library\" : \"lib-bosch-cookies\" , \"kind\" : \"Variable\" , \"operation\" : \"added\" , \"container\" : \"defineObjectsList\" , \"tab_name\" : \"define\"}} , { \"action\" : \"added_variable\" , \"data\" : { \"id\" : \"2\" , \"name\" : \"allow_comfort_cookies\" , \"type\" : \"js\" , \"imported\" : \"prod\" , \"library\" : \"lib-bosch-cookies\" , \"kind\" : \"Variable\" , \"operation\" : \"added\" , \"container\" : \"defineObjectsList\" , \"tab_name\" : \"define\"}} , { \"action\" : \"added_variable\" , \"data\" : { \"id\" : \"3\" , \"name\" : \"allow_statistics_cookies\" , \"type\" : \"js\" , \"imported\" : \"prod\" , \"library\" : \"lib-bosch-cookies\" , \"kind\" : \"Variable\" , \"operation\" : \"added\" , \"container\" : \"defineObjectsList\" , \"tab_name\" : \"define\"}} , { \"action\" : \"added_variable\" , \"data\" : { \"id\" : \"4\" , \"name\" : \"allow_targeting_cookies\" , \"type\" : \"js\" , \"imported\" : \"prod\" , \"library\" : \"lib-bosch-cookies\" , \"kind\" : \"Variable\" , \"operation\" : \"added\" , \"container\" : \"defineObjectsList\" , \"tab_name\" : \"define\"}} , { \"action\" : \"added_loadrule\" , \"data\" : { \"id\" : \"2\" , \"name\" : \"COOKIE MANAGER: User has allowed 'required' cookies\" , \"imported\" : \"prod\" , \"library\" : \"lib-bosch-cookies\" , \"kind\" : \"Loadrule\" , \"operation\" : \"added\" , \"container\" : \"loadrules_content_150228733726700002\" , \"tab_name\" : \"loadrules\"}} , { \"action\" : \"added_loadrule\" , \"data\" : { \"id\" : \"3\" , \"name\" : \"COOKIE MANAGER: User has allowed 'comfort' cookies - Copy\" , \"imported\" : \"prod\" , \"library\" : \"lib-bosch-cookies\" , \"kind\" : \"Loadrule\" , \"operation\" : \"added\" , \"container\" : \"loadrules_content_150228733752600003\" , \"tab_name\" : \"loadrules\"}} , { \"action\" : \"added_loadrule\" , \"data\" : { \"id\" : \"4\" , \"name\" : \"COOKIE MANAGER: User has allowed 'statistics' cookies\" , \"imported\" : \"prod\" , \"library\" : \"lib-bosch-cookies\" , \"kind\" : \"Loadrule\" , \"operation\" : \"added\" , \"container\" : \"loadrules_content_150228733779700004\" , \"tab_name\" : \"loadrules\"}} , { \"action\" : \"added_loadrule\" , \"data\" : { \"id\" : \"5\" , \"name\" : \"COOKIE MANAGER: User has allowed 'targeting' cookies\" , \"imported\" : \"prod\" , \"library\" : \"lib-bosch-cookies\" , \"kind\" : \"Loadrule\" , \"operation\" : \"added\" , \"container\" : \"loadrules_content_150228733803400005\" , \"tab_name\" : \"loadrules\"}} , { \"action\" : \"added_tag\" , \"data\" : { \"id\" : \"2\" , \"tag_name\" : \"Tealium Custom Container\" , \"imported\" : \"prod\" , \"library\" : \"lib-bosch-cookies\" , \"name\" : \"Tealium Custom Container\" , \"kind\" : \"Tag\" , \"operation\" : \"added\" , \"container\" : \"manage_content_150228733829600006\" , \"tab_name\" : \"manage\"}} , { \"action\" : \"added_extension\" , \"data\" : { \"id\" : \"1\" , \"name\" : \"PermissionsCheck 1: Configuration (DUPLICATE AND EDIT)\" , \"type\" : \"100036\" , \"imported\" : \"prod\" , \"library\" : \"lib-bosch-cookies\" , \"kind\" : \"Extension\" , \"operation\" : \"added\" , \"container\" : \"customizations_1\" , \"tab_name\" : \"customizations\"}} , { \"action\" : \"added_extension\" , \"data\" : { \"id\" : \"2\" , \"name\" : \"PermissionsCheck 2: Read config and set permissions on load\" , \"type\" : \"100036\" , \"imported\" : \"prod\" , \"library\" : \"lib-bosch-cookies\" , \"kind\" : \"Extension\" , \"operation\" : \"added\" , \"container\" : \"customizations_2\" , \"tab_name\" : \"customizations\"}} , { \"action\" : \"added_extension\" , \"data\" : { \"id\" : \"3\" , \"name\" : \"PermissionsCheck 3: Respect permissions on utag.view() and utag.link()\" , \"type\" : \"100036\" , \"imported\" : \"prod\" , \"library\" : \"lib-bosch-cookies\" , \"kind\" : \"Extension\" , \"operation\" : \"added\" , \"container\" : \"customizations_3\" , \"tab_name\" : \"customizations\"}} , { \"action\" : \"added_extension\" , \"data\" : { \"id\" : \"4\" , \"name\" : \"PermissionsCheck 1: Configuration (DUPLICATE AND EDIT)\" , \"type\" : \"100036\" , \"library\" : \"\" , \"kind\" : \"Extension\" , \"operation\" : \"added\" , \"container\" : \"customizations_4\" , \"tab_name\" : \"customizations\"}} , { \"action\" : \"toggled_extension\" , \"data\" : { \"id\" : 4 , \"name\" : \"PermissionsCheck 1: Configuration (DUPLICATE AND EDIT)\" , \"type\" : \"100036\" , \"status\" : \"active\" , \"kind\" : \"Extension\" , \"operation\" : \"toggled\" , \"container\" : \"customizations_4\" , \"tab_name\" : \"customizations\"}}]","datacloudLinkedProfiles":"{}","lastmanageid":"","status":"dev","publishedTags":"[ \"2\"]","operator":"caleb.jaquith@tealium.com","notes":"Update","versionorigin":"201708091358","action":"Published to dev"},"title":"Initial publish - 2017/08/09 14:02"},"201708100826":{"size":"34","status":"prod,qa,dev","title":"Initial publish - 2017/08/10 08:26","201708100826":{"linkedProfiles":"{ \"lib-bosch-cookies\" : { \"rev\" : \"201708091315\" , \"env\" : \"Prod\"}}","datacloudLinkedProfiles":"{}","history":"[ ]","title":"Initial publish - 2017/08/10 08:26","lastcustomizeid":"0","publishedTags":"[ \"2\"]","operator":"caleb.jaquith@tealium.com","lastmanageid":"2","status":"prod,qa,dev","action":"Published to dev","notes":"To Prod","versionorigin":"201708091402"}},"201708091358":{"status":"Not Published","size":"26","201708091358":{"lastmanageid":"","status":"prod,qa,dev","operator":"caleb.jaquith@tealium.com","publishedTags":"[ ]","versionorigin":"","notes":"Initial publish on profile creation","action":"Published to dev","linkedProfiles":"{ }","history":"","title":"Initial publish","lastcustomizeid":"","datacloudLinkedProfiles":"{}"},"title":"Initial publish"}},"account":"services-caleb","lastcustomizeid":"0","history":"[ ]","profile_action_type":"SaveAs","define":{"1":{"imported":"prod","type":"js","title":"","description":"Generated by the COOKIE MANAGER extensions","_id":"1","name":"allow_required_cookies","labels":"","settings":{"lastmanageid":"1","origin_id":"1","lastloadruleid":"1","revision":"201708091315","creation":"201708010813","library":"optional","minorrevision":"201708091315","lastdefineid":"4","account":"services-caleb","profileid":"lib-bosch-cookies","lastcustomizeid":"0"}},"2":{"description":"Generated by the COOKIE MANAGER extensions","title":"","type":"js","imported":"prod","settings":{"profileid":"lib-bosch-cookies","account":"services-caleb","lastcustomizeid":"0","lastdefineid":"4","library":"optional","minorrevision":"201708091315","lastloadruleid":"1","creation":"201708010813","revision":"201708091315","lastmanageid":"1","origin_id":"2"},"labels":"","name":"allow_comfort_cookies","_id":"2"},"3":{"title":"","description":"Generated by the COOKIE MANAGER extensions","type":"js","imported":"prod","settings":{"lastcustomizeid":"0","account":"services-caleb","profileid":"lib-bosch-cookies","lastdefineid":"4","minorrevision":"201708091315","library":"optional","revision":"201708091315","creation":"201708010813","lastloadruleid":"1","origin_id":"3","lastmanageid":"1"},"name":"allow_statistics_cookies","labels":"","_id":"3"},"4":{"_id":"4","settings":{"library":"optional","minorrevision":"201708091315","lastmanageid":"1","origin_id":"4","lastloadruleid":"1","creation":"201708010813","revision":"201708091315","account":"services-caleb","profileid":"lib-bosch-cookies","lastcustomizeid":"0","lastdefineid":"4"},"labels":"","name":"allow_targeting_cookies","imported":"prod","description":"Generated by the COOKIE MANAGER extensions","title":"","type":"js"},"5":{"_id":"5","name":"Account Value Strings","type":"va","description":"Should contain account numbers and their value band","context":"visitor","imported":"AudienceStream","settings":{"origin_id":"5217","origin_name":"Account Value Strings","origin_type":"property_lists","origin_context":"visitor","account":"services-caleb","profileid":"main"}},"6":{"_id":"6","name":"Active browser type","type":"va","description":"The browser actively being used by the visitor","context":"current_visit","imported":"AudienceStream","settings":{"origin_id":"44","origin_name":"Active browser type","origin_type":"properties","origin_context":"current_visit","account":"services-caleb","profileid":"main"}},"7":{"_id":"7","name":"Active browser version","type":"va","description":"The browser version actively being used by the visitor","context":"current_visit","imported":"AudienceStream","settings":{"origin_id":"48","origin_name":"Active browser version","origin_type":"properties","origin_context":"current_visit","account":"services-caleb","profileid":"main"}},"8":{"_id":"8","name":"Active device","type":"va","description":"The device actively being used by the visitor","context":"current_visit","imported":"AudienceStream","settings":{"origin_id":"46","origin_name":"Active device","origin_type":"properties","origin_context":"current_visit","account":"services-caleb","profileid":"main"}},"9":{"_id":"9","name":"Active operating system","type":"va","description":"The operating system actively being used by the visitor","context":"current_visit","imported":"AudienceStream","settings":{"origin_id":"45","origin_name":"Active operating system","origin_type":"properties","origin_context":"current_visit","account":"services-caleb","profileid":"main"}},"10":{"_id":"10","name":"Active platform","type":"va","description":"The platform actively being used by the visitor","context":"current_visit","imported":"AudienceStream","settings":{"origin_id":"47","origin_name":"Active platform","origin_type":"properties","origin_context":"current_visit","account":"services-caleb","profileid":"main"}},"11":{"_id":"11","name":"Average visit duration in minutes","type":"va","description":"Average visit duration in minutes","context":"visitor","imported":"AudienceStream","settings":{"origin_id":"26","origin_name":"Average visit duration in minutes","origin_type":"metrics","origin_context":"visitor","account":"services-caleb","profileid":"main"}},"12":{"_id":"12","name":"Average visits per week","type":"va","description":"Average visits per week","context":"visitor","imported":"AudienceStream","settings":{"origin_id":"29","origin_name":"Average visits per week","origin_type":"metrics","origin_context":"visitor","account":"services-caleb","profileid":"main"}},"13":{"_id":"13","name":"Batch Tester","type":"va","description":"Testing the batch webhook","context":"visitor","imported":"AudienceStream","settings":{"origin_id":"5189","origin_name":"Batch Tester","origin_type":"badges","origin_context":"visitor","account":"services-caleb","profileid":"main"}},"14":{"_id":"14","name":"Blue","type":"va","description":"","context":"visitor","imported":"AudienceStream","settings":{"origin_id":"5067","origin_name":"Blue","origin_type":"badges","origin_context":"visitor","account":"services-caleb","profileid":"main"}},"15":{"_id":"15","name":"Brown","type":"va","description":"","context":"visitor","imported":"AudienceStream","settings":{"origin_id":"5055","origin_name":"Brown","origin_type":"badges","origin_context":"visitor","account":"services-caleb","profileid":"main"}},"16":{"_id":"16","name":"Cookie Sync ID - Assigned Rule","type":"va","description":"","context":"visitor","imported":"AudienceStream","settings":{"origin_id":"5075","origin_name":"Cookie Sync ID - Assigned Rule","origin_type":"properties","origin_context":"visitor","account":"services-caleb","profileid":"main"}},"17":{"_id":"17","name":"Cookie Sync ID - No Rule","type":"va","description":"","context":"visitor","imported":"AudienceStream","settings":{"origin_id":"5079","origin_name":"Cookie Sync ID - No Rule","origin_type":"properties","origin_context":"visitor","account":"services-caleb","profileid":"main"}},"18":{"_id":"18","name":"Counter (Last Seen)","type":"va","description":"","context":"visitor","imported":"AudienceStream","settings":{"origin_id":"5193","origin_name":"Counter (Last Seen)","origin_type":"properties","origin_context":"visitor","account":"services-caleb","profileid":"main"}},"19":{"_id":"19","name":"Direct visit","type":"va","description":"The user navigated directly to the site","context":"current_visit","imported":"AudienceStream","settings":{"origin_id":"14","origin_name":"Direct visit","origin_type":"flags","origin_context":"current_visit","account":"services-caleb","profileid":"main"}},"20":{"_id":"20","name":"Entry URL","type":"va","description":"URL of the first page visited","context":"current_visit","imported":"AudienceStream","settings":{"origin_id":"5","origin_name":"Entry URL","origin_type":"properties","origin_context":"current_visit","account":"services-caleb","profileid":"main"}},"21":{"_id":"21","name":"Event count","type":"va","description":"Total number of events in visit","context":"current_visit","imported":"AudienceStream","settings":{"origin_id":"7","origin_name":"Event count","origin_type":"metrics","origin_context":"current_visit","account":"services-caleb","profileid":"main"}},"22":{"_id":"22","name":"Exit URL","type":"va","description":"URL of the last page visited","context":"current_visit","imported":"AudienceStream","settings":{"origin_id":"6","origin_name":"Exit URL","origin_type":"properties","origin_context":"current_visit","account":"services-caleb","profileid":"main"}},"23":{"_id":"23","name":"Fan","type":"va","description":"More than two total visits and more direct visits than refers","context":"visitor","imported":"AudienceStream","settings":{"origin_id":"30","origin_name":"Fan","origin_type":"badges","origin_context":"visitor","account":"services-caleb","profileid":"main"}},"24":{"_id":"24","name":"First 'test_value' only","type":"va","description":"","context":"visitor","imported":"AudienceStream","settings":{"origin_id":"5183","origin_name":"First 'test_value' only","origin_type":"properties","origin_context":"visitor","account":"services-caleb","profileid":"main"}},"25":{"_id":"25","name":"First visit","type":"va","description":"Date of first visit","context":"visitor","imported":"AudienceStream","settings":{"origin_id":"23","origin_name":"First visit","origin_type":"dates","origin_context":"visitor","account":"services-caleb","profileid":"main"}},"26":{"_id":"26","name":"Frequent visitor","type":"va","description":"Two or more average visits per week","context":"visitor","imported":"AudienceStream","settings":{"origin_id":"31","origin_name":"Frequent visitor","origin_type":"badges","origin_context":"visitor","account":"services-caleb","profileid":"main"}},"27":{"_id":"27","name":"Full entry URL (with attribution)","type":"va","description":"","context":"current_visit","imported":"AudienceStream","settings":{"origin_id":"5090","origin_name":"Full entry URL (with attribution)","origin_type":"properties","origin_context":"current_visit","account":"services-caleb","profileid":"main"}},"28":{"_id":"28","name":"Google GID","type":"va","description":"From the Google Cookie Match, saved here as string ","context":"visitor","imported":"AudienceStream","settings":{"origin_id":"5038","origin_name":"Google GID","origin_type":"properties","origin_context":"visitor","account":"services-caleb","profileid":"main"}},"29":{"_id":"29","name":"Green","type":"va","description":"","context":"visitor","imported":"AudienceStream","settings":{"origin_id":"5063","origin_name":"Green","origin_type":"badges","origin_context":"visitor","account":"services-caleb","profileid":"main"}},"30":{"_id":"30","name":"GUID - Compromised Profile","type":"va","description":"","context":"visitor","imported":"AudienceStream","settings":{"origin_id":"5179","origin_name":"GUID - Compromised Profile","origin_type":"badges","origin_context":"visitor","account":"services-caleb","profileid":"main"}},"31":{"_id":"31","name":"GUID - Compromised profile and a new visit [bln]","type":"va","description":"","context":"visitor","imported":"AudienceStream","settings":{"origin_id":"5340","origin_name":"GUID - Compromised profile and a new visit [bln]","origin_type":"flags","origin_context":"visitor","account":"services-caleb","profileid":"main"}},"32":{"_id":"32","name":"GUID - Count Has Changed This Visit","type":"va","description":"","context":"current_visit","imported":"AudienceStream","settings":{"origin_id":"5332","origin_name":"GUID - Count Has Changed This Visit","origin_type":"flags","origin_context":"current_visit","account":"services-caleb","profileid":"main"}},"33":{"_id":"33","name":"GUID - Count of seen [num]","type":"va","description":"","context":"visitor","imported":"AudienceStream","settings":{"origin_id":"5175","origin_name":"GUID - Count of seen [num]","origin_type":"metrics","origin_context":"visitor","account":"services-caleb","profileid":"main"}},"34":{"_id":"34","name":"GUID - Healthy Profile","type":"va","description":"","context":"visitor","imported":"AudienceStream","settings":{"origin_id":"5177","origin_name":"GUID - Healthy Profile","origin_type":"badges","origin_context":"visitor","account":"services-caleb","profileid":"main"}},"35":{"_id":"35","name":"GUID - Incomplete Profile","type":"va","description":"Should not use this profile, it's been used on a shared device and only contains partial information","context":"visitor","imported":"AudienceStream","settings":{"origin_id":"5334","origin_name":"GUID - Incomplete Profile","origin_type":"badges","origin_context":"visitor","account":"services-caleb","profileid":"main"}},"36":{"_id":"36","name":"GUID - Last seen [str]","type":"va","description":"","context":"visitor","imported":"AudienceStream","settings":{"origin_id":"5169","origin_name":"GUID - Last seen [str]","origin_type":"properties","origin_context":"visitor","account":"services-caleb","profileid":"main"}},"37":{"_id":"37","name":"GUID - None","type":"va","description":"","context":"visitor","imported":"AudienceStream","settings":{"origin_id":"5181","origin_name":"GUID - None","origin_type":"badges","origin_context":"visitor","account":"services-caleb","profileid":"main"}},"38":{"_id":"38","name":"Has Cookie Sync ID - With Rule","type":"va","description":"","context":"visitor","imported":"AudienceStream","settings":{"origin_id":"5077","origin_name":"Has Cookie Sync ID - With Rule","origin_type":"badges","origin_context":"visitor","account":"services-caleb","profileid":"main"}},"39":{"_id":"39","name":"Has Cookie Sync ID - Without Rule","type":"va","description":"","context":"visitor","imported":"AudienceStream","settings":{"origin_id":"5081","origin_name":"Has Cookie Sync ID - Without Rule","origin_type":"badges","origin_context":"visitor","account":"services-caleb","profileid":"main"}},"40":{"_id":"40","name":"Hyphen Lover","type":"va","description":"","context":"visitor","imported":"AudienceStream","settings":{"origin_id":"5088","origin_name":"Hyphen Lover","origin_type":"badges","origin_context":"visitor","account":"services-caleb","profileid":"main"}},"41":{"_id":"41","name":"Import - Age","type":"va","description":"","context":"visitor","imported":"AudienceStream","settings":{"origin_id":"5165","origin_name":"Import - Age","origin_type":"metrics","origin_context":"visitor","account":"services-caleb","profileid":"main"}},"42":{"_id":"42","name":"Import - Alpha","type":"va","description":"","context":"visitor","imported":"AudienceStream","settings":{"origin_id":"5161","origin_name":"Import - Alpha","origin_type":"properties","origin_context":"visitor","account":"services-caleb","profileid":"main"}},"43":{"_id":"43","name":"Import - Bool","type":"va","description":"","context":"visitor","imported":"AudienceStream","settings":{"origin_id":"5167","origin_name":"Import - Bool","origin_type":"flags","origin_context":"visitor","account":"services-caleb","profileid":"main"}},"44":{"_id":"44","name":"Import - Row Number","type":"va","description":"","context":"visitor","imported":"AudienceStream","settings":{"origin_id":"5163","origin_name":"Import - Row Number","origin_type":"metrics","origin_context":"visitor","account":"services-caleb","profileid":"main"}},"45":{"_id":"45","name":"Last 'test_value'","type":"va","description":"","context":"visitor","imported":"AudienceStream","settings":{"origin_id":"5187","origin_name":"Last 'test_value'","origin_type":"properties","origin_context":"visitor","account":"services-caleb","profileid":"main"}},"46":{"_id":"46","name":"Last conversion partner name","type":"va","description":"","context":"visitor","imported":"AudienceStream","settings":{"origin_id":"5034","origin_name":"Last conversion partner name","origin_type":"properties","origin_context":"visitor","account":"services-caleb","profileid":"main"}},"47":{"_id":"47","name":"Last event time","type":"va","description":"","context":"visitor","imported":"AudienceStream","settings":{"origin_id":"5318","origin_name":"Last event time","origin_type":"dates","origin_context":"visitor","account":"services-caleb","profileid":"main"}},"48":{"_id":"48","name":"Last event URL","type":"va","description":"Last event URL for visitor","context":"visitor","imported":"AudienceStream","settings":{"origin_id":"17","origin_name":"Last event URL","origin_type":"properties","origin_context":"visitor","account":"services-caleb","profileid":"main"}},"49":{"_id":"49","name":"Last UDO String","type":"va","description":"","context":"visitor","imported":"AudienceStream","settings":{"origin_id":"5145","origin_name":"Last UDO String","origin_type":"properties","origin_context":"visitor","account":"services-caleb","profileid":"main"}},"50":{"_id":"50","name":"Last visit","type":"va","description":"Date of last visit","context":"visitor","imported":"AudienceStream","settings":{"origin_id":"24","origin_name":"Last visit","origin_type":"dates","origin_context":"visitor","account":"services-caleb","profileid":"main"}},"51":{"_id":"51","name":"Last-seen tealium_event [str]","type":"va","description":"","context":"visitor","imported":"AudienceStream","settings":{"origin_id":"5324","origin_name":"Last-seen tealium_event [str]","origin_type":"properties","origin_context":"visitor","account":"services-caleb","profileid":"main"}},"52":{"_id":"52","name":"Last-seen Trace Id","type":"va","description":"","context":"visitor","imported":"AudienceStream","settings":{"origin_id":"5320","origin_name":"Last-seen Trace Id","origin_type":"properties","origin_context":"visitor","account":"services-caleb","profileid":"main"}},"53":{"_id":"53","name":"Lifetime browser types used (favorite)","type":"va","description":"Captures the favorite metric for Metric Set: Lifetime browser types used","context":"visitor","imported":"AudienceStream","settings":{"origin_id":"56","origin_name":"Lifetime browser types used (favorite)","origin_type":"properties","origin_context":"visitor","account":"services-caleb","profileid":"main"}},"54":{"_id":"54","name":"Lifetime browser versions used (favorite)","type":"va","description":"Captures the favorite metric for Metric Set: Lifetime browser versions used","context":"visitor","imported":"AudienceStream","settings":{"origin_id":"62","origin_name":"Lifetime browser versions used (favorite)","origin_type":"properties","origin_context":"visitor","account":"services-caleb","profileid":"main"}},"55":{"_id":"55","name":"Lifetime devices used (favorite)","type":"va","description":"Captures the favorite metric for Metric Set: Lifetime devices used","context":"visitor","imported":"AudienceStream","settings":{"origin_id":"54","origin_name":"Lifetime devices used (favorite)","origin_type":"properties","origin_context":"visitor","account":"services-caleb","profileid":"main"}},"56":{"_id":"56","name":"Lifetime event count","type":"va","description":"Total number of events triggered by user","context":"visitor","imported":"AudienceStream","settings":{"origin_id":"22","origin_name":"Lifetime event count","origin_type":"metrics","origin_context":"visitor","account":"services-caleb","profileid":"main"}},"57":{"_id":"57","name":"Lifetime operating systems used (favorite)","type":"va","description":"Captures the favorite metric for Metric Set: Lifetime operating systems used","context":"visitor","imported":"AudienceStream","settings":{"origin_id":"58","origin_name":"Lifetime operating systems used (favorite)","origin_type":"properties","origin_context":"visitor","account":"services-caleb","profileid":"main"}},"58":{"_id":"58","name":"Lifetime order total","type":"va","description":"","context":"visitor","imported":"AudienceStream","settings":{"origin_id":"5028","origin_name":"Lifetime order total","origin_type":"metrics","origin_context":"visitor","account":"services-caleb","profileid":"main"}},"59":{"_id":"59","name":"Lifetime order total by partner name (favorite)","type":"va","description":"Captures the favorite number for Tally: Lifetime order total by partner name","context":"visitor","imported":"AudienceStream","settings":{"origin_id":"5031","origin_name":"Lifetime order total by partner name (favorite)","origin_type":"properties","origin_context":"visitor","account":"services-caleb","profileid":"main"}},"60":{"_id":"60","name":"Lifetime platforms used (favorite)","type":"va","description":"Captures the favorite metric for Metric Set: Lifetime platforms used","context":"visitor","imported":"AudienceStream","settings":{"origin_id":"60","origin_name":"Lifetime platforms used (favorite)","origin_type":"properties","origin_context":"visitor","account":"services-caleb","profileid":"main"}},"61":{"_id":"61","name":"LIfetime Test Stream Values (favorite)","type":"va","description":"Captures the favorite number for Tally: LIfetime Test Stream Values","context":"visitor","imported":"AudienceStream","settings":{"origin_id":"5132","origin_name":"LIfetime Test Stream Values (favorite)","origin_type":"properties","origin_context":"visitor","account":"services-caleb","profileid":"main"}},"62":{"_id":"62","name":"Lifetime visit count","type":"va","description":"Total number of times user has visited site","context":"visitor","imported":"AudienceStream","settings":{"origin_id":"21","origin_name":"Lifetime visit count","origin_type":"metrics","origin_context":"visitor","account":"services-caleb","profileid":"main"}},"63":{"_id":"63","name":"Light Blue","type":"va","description":"","context":"visitor","imported":"AudienceStream","settings":{"origin_id":"5065","origin_name":"Light Blue","origin_type":"badges","origin_context":"visitor","account":"services-caleb","profileid":"main"}},"64":{"_id":"64","name":"Most Recent GCLID","type":"va","description":"This setup ignores the edge case where a user could click two ads from this campaign within the same session - it will only send the last GCLID in those cases.","context":"visitor","imported":"AudienceStream","settings":{"origin_id":"5312","origin_name":"Most Recent GCLID","origin_type":"properties","origin_context":"visitor","account":"services-caleb","profileid":"main"}},"65":{"_id":"65","name":"Most Recent GCLID has changed this visit","type":"va","description":"","context":"visitor","imported":"AudienceStream","settings":{"origin_id":"5314","origin_name":"Most Recent GCLID has changed this visit","origin_type":"flags","origin_context":"visitor","account":"services-caleb","profileid":"main"}},"66":{"_id":"66","name":"NO BOUNCERS HERE","type":"va","description":"","context":"visitor","imported":"AudienceStream","settings":{"origin_id":"5322","origin_name":"NO BOUNCERS HERE","origin_type":"badges","origin_context":"visitor","account":"services-caleb","profileid":"main"}},"67":{"_id":"67","name":"Optin (imported)","type":"va","description":"","context":"visitor","imported":"AudienceStream","settings":{"origin_id":"5149","origin_name":"Optin (imported)","origin_type":"properties","origin_context":"visitor","account":"services-caleb","profileid":"main"}},"68":{"_id":"68","name":"Orange","type":"va","description":"","context":"visitor","imported":"AudienceStream","settings":{"origin_id":"5059","origin_name":"Orange","origin_type":"badges","origin_context":"visitor","account":"services-caleb","profileid":"main"}},"69":{"_id":"69","name":"Pink","type":"va","description":"","context":"visitor","imported":"AudienceStream","settings":{"origin_id":"5069","origin_name":"Pink","origin_type":"badges","origin_context":"visitor","account":"services-caleb","profileid":"main"}},"70":{"_id":"70","name":"Product Prices Purchases - Last Order Imported (favorite)","type":"va","description":"Captures the favorite number for Tally: Product Prices Purchases - Last Order Imported","context":"current_visit","imported":"AudienceStream","settings":{"origin_id":"5120","origin_name":"Product Prices Purchases - Last Order Imported (favorite)","origin_type":"properties","origin_context":"current_visit","account":"services-caleb","profileid":"main"}},"71":{"_id":"71","name":"Product Purchase Count (Lifetime) (favorite)","type":"va","description":"Captures the favorite number for Tally: Product Purchase Count (Lifetime)","context":"visitor","imported":"AudienceStream","settings":{"origin_id":"5118","origin_name":"Product Purchase Count (Lifetime) (favorite)","origin_type":"properties","origin_context":"visitor","account":"services-caleb","profileid":"main"}},"72":{"_id":"72","name":"Red","type":"va","description":"","context":"visitor","imported":"AudienceStream","settings":{"origin_id":"5057","origin_name":"Red","origin_type":"badges","origin_context":"visitor","account":"services-caleb","profileid":"main"}},"73":{"_id":"73","name":"Referred visit","type":"va","description":"The user was referred from another site","context":"current_visit","imported":"AudienceStream","settings":{"origin_id":"13","origin_name":"Referred visit","origin_type":"flags","origin_context":"current_visit","account":"services-caleb","profileid":"main"}},"74":{"_id":"74","name":"Referrer","type":"va","description":"","context":"current_visit","imported":"AudienceStream","settings":{"origin_id":"5092","origin_name":"Referrer","origin_type":"properties","origin_context":"current_visit","account":"services-caleb","profileid":"main"}},"75":{"_id":"75","name":"Returning visitor","type":"va","description":"Return visitor","context":"visitor","imported":"AudienceStream","settings":{"origin_id":"27","origin_name":"Returning visitor","origin_type":"flags","origin_context":"visitor","account":"services-caleb","profileid":"main"}},"76":{"_id":"76","name":"Spend per Product (Lifetime) (favorite)","type":"va","description":"Captures the favorite number for Tally: Spend per Product (Lifetime)","context":"visitor","imported":"AudienceStream","settings":{"origin_id":"5122","origin_name":"Spend per Product (Lifetime) (favorite)","origin_type":"properties","origin_context":"visitor","account":"services-caleb","profileid":"main"}},"77":{"_id":"77","name":"Tealium Test Visit","type":"va","description":"Set via query parameter &quot;tealium_test_visit=true&quot;","context":"current_visit","imported":"AudienceStream","settings":{"origin_id":"5125","origin_name":"Tealium Test Visit","origin_type":"flags","origin_context":"current_visit","account":"services-caleb","profileid":"main"}},"78":{"_id":"78","name":"Tealium Visitor ID (Last Seen)","type":"va","description":"3rd party wins if present","context":"visitor","imported":"AudienceStream","settings":{"origin_id":"5129","origin_name":"Tealium Visitor ID (Last Seen)","origin_type":"properties","origin_context":"visitor","account":"services-caleb","profileid":"main"}},"79":{"_id":"79","name":"tealium_cf_visit_ttl","type":"va","description":"","context":"current_visit","imported":"AudienceStream","settings":{"origin_id":"82","origin_name":"tealium_cf_visit_ttl","origin_type":"properties","origin_context":"current_visit","account":"services-caleb","profileid":"main"}},"80":{"_id":"80","name":"Test Date","type":"va","description":"Expects format 2020-08-27T13:13:47.395Z ","context":"visitor","imported":"AudienceStream","settings":{"origin_id":"5195","origin_name":"Test Date","origin_type":"dates","origin_context":"visitor","account":"services-caleb","profileid":"main"}},"81":{"_id":"81","name":"Test Tally (favorite)","type":"va","description":"Captures the favorite number for Tally: Test Tally","context":"visitor","imported":"AudienceStream","settings":{"origin_id":"5093","origin_name":"Test Tally (favorite)","origin_type":"properties","origin_context":"visitor","account":"services-caleb","profileid":"main"}},"82":{"_id":"82","name":"test_tiq_string values (favorite)","type":"va","description":"Captures the favorite number for Tally: test_tiq_string values","context":"visitor","imported":"AudienceStream","settings":{"origin_id":"5136","origin_name":"test_tiq_string values (favorite)","origin_type":"properties","origin_context":"visitor","account":"services-caleb","profileid":"main"}},"83":{"_id":"83","name":"test_udo_string values (favorite)","type":"va","description":"Captures the favorite number for Tally: test_udo_string values","context":"visitor","imported":"AudienceStream","settings":{"origin_id":"5138","origin_name":"test_udo_string values (favorite)","origin_type":"properties","origin_context":"visitor","account":"services-caleb","profileid":"main"}},"84":{"_id":"84","name":"Tester","type":"va","description":"","context":"visitor","imported":"AudienceStream","settings":{"origin_id":"5141","origin_name":"Tester","origin_type":"badges","origin_context":"visitor","account":"services-caleb","profileid":"main"}},"85":{"_id":"85","name":"Total direct visits","type":"va","description":"Total direct visits","context":"visitor","imported":"AudienceStream","settings":{"origin_id":"15","origin_name":"Total direct visits","origin_type":"metrics","origin_context":"visitor","account":"services-caleb","profileid":"main"}},"86":{"_id":"86","name":"Total referred visits","type":"va","description":"Total referred visits","context":"visitor","imported":"AudienceStream","settings":{"origin_id":"16","origin_name":"Total referred visits","origin_type":"metrics","origin_context":"visitor","account":"services-caleb","profileid":"main"}},"87":{"_id":"87","name":"Total time spent on site in minutes","type":"va","description":"Sum duration of all user visits","context":"visitor","imported":"AudienceStream","settings":{"origin_id":"25","origin_name":"Total time spent on site in minutes","origin_type":"metrics","origin_context":"visitor","account":"services-caleb","profileid":"main"}},"88":{"_id":"88","name":"Unbadged","type":"va","description":"The visitor has not been assigned any badges","context":"visitor","imported":"AudienceStream","settings":{"origin_id":"32","origin_name":"Unbadged","origin_type":"badges","origin_context":"visitor","account":"services-caleb","profileid":"main"}},"89":{"_id":"89","name":"Visit duration","type":"va","description":"Visit duration in minutes","context":"current_visit","imported":"AudienceStream","settings":{"origin_id":"12","origin_name":"Visit duration","origin_type":"metrics","origin_context":"current_visit","account":"services-caleb","profileid":"main"}},"90":{"_id":"90","name":"Visit end","type":"va","description":"Visit end date","context":"current_visit","imported":"AudienceStream","settings":{"origin_id":"11","origin_name":"Visit end","origin_type":"dates","origin_context":"current_visit","account":"services-caleb","profileid":"main"}},"91":{"_id":"91","name":"Visit start","type":"va","description":"Visit start date","context":"current_visit","imported":"AudienceStream","settings":{"origin_id":"10","origin_name":"Visit start","origin_type":"dates","origin_context":"current_visit","account":"services-caleb","profileid":"main"}},"92":{"_id":"92","name":"Weeks since first visit","type":"va","description":"Weeks elapsed since first visit","context":"visitor","imported":"AudienceStream","settings":{"origin_id":"28","origin_name":"Weeks since first visit","origin_type":"metrics","origin_context":"visitor","account":"services-caleb","profileid":"main"}},"93":{"_id":"93","name":"Weeks since first visit temp","type":"va","description":"Temporary store for computer value","context":"current_visit","imported":"AudienceStream","settings":{"origin_id":"80","origin_name":"Weeks since first visit temp","origin_type":"metrics","origin_context":"current_visit","account":"services-caleb","profileid":"main"}},"94":{"_id":"94","name":"Yellow","type":"va","description":"","context":"visitor","imported":"AudienceStream","settings":{"origin_id":"5061","origin_name":"Yellow","origin_type":"badges","origin_context":"visitor","account":"services-caleb","profileid":"main"}}},"manage":{"2":{"publishedTargets":"dev","advconfig_send":"yes","advconfig_src":"","_id":"2","tag_id":"20010","publish_revisions":{"last_modified":"201708091402","svr_save_timestamps":{"qa":"201708100826","dev":"201708091402","prod":"201708100826"}},"notes":"","new_flag":"true","sort":"0","selectedTargets":{"prod":"false","dev":"true","qa":"true"},"advconfig_wait":"yes","advconfig_bundle":"no","advconfig_loadtype":"","imported":"prod","tag_name":"Tealium Custom Container","loadrule":"4","title":"Sample 'statistics' tag","id":"2","libraryId":"1","status":"active","scope":"4","settings":{"lastcustomizeid":"0","profileid":"lib-bosch-cookies","account":"services-caleb","lastdefineid":"4","minorrevision":"201708091315","library":"optional","revision":"201708091315","creation":"201708010813","lastloadruleid":"1","origin_id":"2","lastmanageid":"1"},"advconfig_optout":"yes","labels":""}},"versionorigin":"201708091402","settings":{"minorrevision":"201708100826","library":"NONE","revision":"201708100826","creation":"201708091358","lastloadruleid":"1","lastmanageid":"2","lastcustomizeid":"0","profileid":"bosch-uk-pt-hg-proaccessories-eshop","account":"services-caleb","lastdefineid":"4"},"createManifest":"false","loadrules":{"2":{"0":{"input_0":"js.allow_required_cookies","operator_0":"equals","filter_0":"true"},"status":"active","_id":"2","endDate":"------------","sort":"1","editable":"false","settings":{"minorrevision":"201708091315","library":"optional","origin_id":"2","lastmanageid":"1","creation":"201708010813","revision":"201708091315","lastloadruleid":"1","lastcustomizeid":"0","account":"services-caleb","profileid":"lib-bosch-cookies","lastdefineid":"4"},"labels":"","imported":"prod","containerId":"loadrules_content_150235359931900038","title":"COOKIE MANAGER: User has allowed 'required' cookies","oldId":"2","startDate":"------------","id":"2"},"3":{"0":{"filter_0":"true","input_0":"js.allow_comfort_cookies","operator_0":"equals"},"_id":"3","status":"active","endDate":"------------","settings":{"library":"optional","minorrevision":"201708091315","lastloadruleid":"1","creation":"201708010813","revision":"201708091315","lastmanageid":"1","origin_id":"3","profileid":"lib-bosch-cookies","account":"services-caleb","lastcustomizeid":"0","lastdefineid":"4"},"sort":"2","editable":"false","labels":"","imported":"prod","oldId":"3","title":"COOKIE MANAGER: User has allowed 'comfort' cookies - Copy","containerId":"loadrules_content_150235359932000039","id":"3","startDate":"------------"},"4":{"0":{"input_0":"js.allow_statistics_cookies","operator_0":"equals","filter_0":"true"},"imported":"prod","id":"4","startDate":"------------","title":"COOKIE MANAGER: User has allowed 'statistics' cookies","containerId":"loadrules_content_150235359932100040","oldId":"4","endDate":"------------","status":"active","_id":"4","labels":"","sort":"3","editable":"false","settings":{"lastmanageid":"1","origin_id":"4","lastloadruleid":"1","creation":"201708010813","revision":"201708091315","library":"optional","minorrevision":"201708091315","lastdefineid":"4","account":"services-caleb","profileid":"lib-bosch-cookies","lastcustomizeid":"0"}},"5":{"0":{"operator_0":"equals","input_0":"js.allow_targeting_cookies","filter_0":"true"},"sort":"4","editable":"false","settings":{"lastcustomizeid":"0","account":"services-caleb","profileid":"lib-bosch-cookies","lastdefineid":"4","minorrevision":"201708091315","library":"optional","origin_id":"5","lastmanageid":"1","revision":"201708091315","creation":"201708010813","lastloadruleid":"1"},"labels":"","_id":"5","status":"active","endDate":"------------","title":"COOKIE MANAGER: User has allowed 'targeting' cookies","containerId":"loadrules_content_150235359932200041","oldId":"5","id":"5","startDate":"------------","imported":"prod"}},"customizations":{"1":{"imported":"prod","_ignoreError":"false","type":"new","id":"100036","title":"PermissionsCheck 1: Configuration (DUPLICATE AND EDIT)","advExecOption":"alr","status":"inactive","_id":"1","scope":"preload","labels":"","settings":{"account":"services-caleb","profileid":"lib-bosch-cookies","lastcustomizeid":"0","lastdefineid":"4","library":"optional","minorrevision":"201708091315","lastloadruleid":"1","creation":"201708010813","revision":"201708091315","lastmanageid":"1","origin_id":"1"},"code":"// Scope       : Pre Loader\n// Execution   : n/a\n// Condition   : n/a\n// Description : PermissionsCheck 1: Set values to identify the permissions cookie, REQUIRED\n\n// ********\n// INSTRUCTIONS\n// ********\n// - Duplicate this extension to create an editable version,\n// - Make sure to move it above COOKIE MANAGER 2 in the TiQ UI\n// - Only edit the values for settings between lines 27 and 54\n// - Please read all comments and variable names closely to ensure tags fire as expected.\n\n// stay out of the global namespace\n(function () {\n  // initialize\n  window.tealium_cookie_check = window.tealium || {};\n  window.tealium_cookie_check.cookieConfig = {};\n  // shorter name\n  var config = window.tealium_cookie_check.cookieConfig;\n\n  // ********\n  // START COOKIE MANAGER CONFIG\n  // ********\n\n  // the name of the cookie set by the Bosch Cookie Manager\n  config.cookie_name = &quot;www_boschcarservice_com_cookies&quot;; // case-sensitive\n\n  // enter cookie value set for new users who haven't interacted with the Cookie Manager at all\n  config.default_cookie_value = &quot;_pcbc%3A0&quot;;\n\n  // the opt_in level set by default for new users with the default_cookie_value set\n  // supports: &quot;opt-out&quot;, &quot;required&quot;, &quot;comfort&quot;, &quot;statistics&quot;, &quot;targeting&quot;\n  config.default_opt_in_level = &quot;required&quot;;\n\n  // enter the cookie value set for users who have COMPLETELY opted out of cookies\n  // mandatory your site offers a full opt-out, otherwise leave blank\n  config.cookie_value_for_full_opt_out = &quot;&quot;;\n\n  // enter cookie value set for users who allow 'required' cookies (lowest permission level)\n  // can be left blank if this level of opt-in isn't one of the options offered by your site\n  config.cookie_value_for_required_opt_in = &quot;_pcbc%3A1&quot;;\n\n  // enter cookie value set for users who allow 'comfort' cookies\n  // can be left blank if this level of opt-in isn't one of the options offered by your site\n  config.cookie_value_for_comfort_opt_in = &quot;_pcbc%3A2&quot;;\n\n  // enter cookie value set for users who allow 'statistics' cookies\n  // can be left blank if this level of opt-in isn't one of the options offered by your site\n  config.cookie_value_for_statistics_opt_in = &quot;_pcbc%3A3&quot;;\n\n  // enter cookie value set for users who allow 'targeting' cookies (highest permission level)\n  // can be left blank if this level of opt-in isn't offered by your site\n  config.cookie_value_for_targeting_opt_in = &quot;_pcbc%3A4&quot;;\n\n  // ********\n  // END COOKIE MANAGER CONFIG\n  // ********\n\n}());\n","notes":"Make sure this is defined before the COOKIE MANAGER 2 extension or no tag will load","scopevars":"","sort":"0"},"2":{"_ignoreError":"false","imported":"prod","title":"PermissionsCheck 2: Read config and set permissions on load","type":"new","id":"100036","scope":"preload","status":"active","_id":"2","advExecOption":"alr","sort":"2","code":"// Scope       : Pre Loader\n// Execution   : n/a\n// Condition   : n/a\n// Description : PermissionsCheck 2: Read the previously set cookie configuration and set universal permissions\n//               to be used in TiQ Load Rules\n\n\n(function () {\n\n  // allows global configuration / muting of console logging to aid debugging\n  function logger(message) {\n      console.info(&quot;**TiQ PermissionsCheck** - &quot; + message);\n  }\n\n  // stolen from utag.loader.lh, same logic used in TiQ to get the domain (not defined yet in Pre Loader)\n  function getDomain(a, b, c) {\n    a = &quot;&quot; + location.hostname;\n    b = a.split(&quot;.&quot;);\n    c = (/\\.co\\.|\\.com\\.|\\.org\\.|\\.edu\\.|\\.net\\.|\\.asn\\./.test(a)) ? 3 : 2;\n    return b.splice(b.length - c, c).join(&quot;.&quot;);\n  }\n\n  // utility function\n  function writeCookie (name, value, days) {\n    var expires = &quot;&quot;;\n    if (days) {\n      var date = new Date();\n      date.setTime(date.getTime() + (days * 24 * 60 * 60 * 1000));\n      expires = &quot;; expires=&quot;+date.toGMTString();\n    }\n    document.cookie = name + &quot;=&quot; + encodeURIComponent(value) + expires + &quot;;domain=&quot; + getDomain() + &quot;;path=/&quot;;\n    return true;\n  }\n\n  // utility function\n  function readCookie (name) {\n    var reString = '(?:(?:^|.*;\\\\s*)' + name + '\\\\s*\\\\=\\\\s*([^;]*).*$)|^.*$';\n    var re = new RegExp(reString);\n    var cookieValue = document.cookie.replace(re, &quot;$1&quot;);\n    if (!cookieValue) return undefined;\n    return decodeURIComponent(cookieValue);\n  }\n\n  // utility function\n  function eraseCookie (name) {\n    document.cookie = name + '=deleted;expires=Thu, 01 Jan 1970 00:00:01 GMT;domain=' + getDomain() + ';path=/;';\n  }\n\n  // stops EVERYTHING from working in TiQ - erases utag_main cookie and stops all tags from loading\n  function blockAndDeleteTealiumCookie () {\n    window.utag_cfg_ovrd = window.utag_cfg_ovrd || {};\n    window.utag_cfg_ovrd.nocookie=true;\n    eraseCookie(&quot;utag_main&quot;);\n  };\n\n  // stops EVERYTHING from working in TiQ - erases utag_main cookie and stops all tags from loading\n  function blockTealiumLoad () {\n    window.utag_cfg_ovrd = window.utag_cfg_ovrd || {};\n    window.utag_cfg_ovrd.noload=true;\n  };\n\n\n  function getConfigValue (config, prop) {\n    // if config or requested property not found, return undefined\n    if (typeof config == &quot;undefined&quot; || config.hasOwnProperty(prop) == false) return undefined;\n    // otherwise, return the user input from the config extension\n    return config[prop];\n  }\n\n  function hasConfigValue (config, prop) {\n    return typeof getConfigValue(config, prop) != &quot;undefined&quot;;\n  }\n\n  // checks if the user cookie value is an exact match for a target config settings, returns boolean\n  function isMatch(config, userCookieValue, targetConfigSetting) {\n    // user cookie is blank, return false\n    if (userCookieValue == &quot;&quot;) return false;\n    // config is missing or empty, return false\n    if (typeof config[targetConfigSetting] == &quot;undefined&quot; || config[targetConfigSetting] == &quot;&quot;) return false;\n    // STRICTLY compare the values, return the appropriate boolean\n    return decodeURIComponent(userCookieValue) === decodeURIComponent(config[targetConfigSetting]);\n  }\n\n  function generatePermissions (userCookieValue, config, udo) {\n      // the names of the config settings, in order of ASCENDING permission to track\n      var permissionsHierarchy = [&quot;required&quot;, &quot;comfort&quot;, &quot;statistics&quot;, &quot;targeting&quot;];\n      var match = &quot;false&quot;;\n      // check each permission config for a match with the user cookie in DESCENDING order, stop when a match is found\n      for (var i = permissionsHierarchy.length - 1, configVal, permissionName; i &gt;= 0; i--) {\n        configPermissionName = &quot;cookie_value_for_&quot; + permissionsHierarchy[i] + &quot;_opt_in&quot;;\n        udoPermissionName = &quot;allow_&quot; + permissionsHierarchy[i] + &quot;_cookies&quot;;\n        if (isMatch(config, userCookieValue, configPermissionName)) {\n          match = &quot;true&quot;;\n          udo.user_permissions_level = permissionsHierarchy[i];\n        }\n        // change the permission for the matching value AND any lower-level permissions\n        if (match == &quot;true&quot;) {\n          udo[udoPermissionName] = &quot;true&quot;;\n        }\n      }\n      // indicate whether a match was found\n      udo.user_permissions_cookie_value_matches_config = match;\n      return udo;\n  }\n\n  //********\n  // Transform the profile-specific config settings into UNIVERSAL Bosch Permissions\n  //********\n\n  // get the config object\n  var config = window.tealium_cookie_check.cookieConfig;\n\n  var isMisconfigured = typeof config == &quot;undefined&quot; ||\n                        typeof config.cookie_name == &quot;undefined&quot; || config.cookie_name == &quot;&quot;;\n  var userCookieValue = readCookie(config.cookie_name);\n  var userHasCookieValue = typeof userCookieValue != &quot;undefined&quot; &amp;&amp; userCookieValue != &quot;&quot;;\n\n  // don't do ANYTHING if:\n  // - the config object is missing or\n  // - config.cookie_name is empty or missing or\n  // - the named cookie isn't found or\n  // - the named cookie is found but has an empty value\n  if (isMisconfigured || !userHasCookieValue) {\n    blockAndDeleteTealiumCookie();\n    blockTealiumLoad();\n    if (isMisconfigured) {\n      logger(&quot;Missing config (or config.cookie_name) - kill TiQ load and remove 'utag_main' cookie&quot;);\n    }\n    if (!userHasCookieValue) logger(&quot;Missing cookie (or empty cookie value) - kill TiQ and remove 'utag_main' cookie&quot;);\n    return;\n  }\n\n  // if the cookie value is the DEFAULT, set the userCookieValue to the one for the DEFAULT permission level\n  var hasDefaultCookieValue = (isMatch(config, userCookieValue, &quot;default_cookie_value&quot;));\n  if (hasDefaultCookieValue) {\n    var defaultLevel = getConfigValue(config, &quot;default_opt_in_level&quot;);\n    userCookieValue = getConfigValue(config, &quot;cookie_value_for_&quot; + defaultLevel + &quot;_opt_in&quot;);\n  }\n\n  // check if the user has opted out (also applies for users with default cookies and an 'opt-out' default setting)\n  var userHasOptedOut = isMatch(config, userCookieValue, &quot;cookie_value_for_full_opt_out&quot;);\n\n  // don't do ANYTHING if\n  // - the cookie value is missing (or empty) OR\n  // - the user has explicitly OR implicitly opted-out\n  if (userHasOptedOut) {\n      blockAndDeleteTealiumCookie();\n      blockTealiumLoad();\n      logger(&quot;User has opted out (or was opted out by default) - kill TiQ load and remove 'utag_main' cookie&quot;);\n      return;\n  }\n\n  // initilize, err on the side of caution\n  var udo = window.utag_data = window.utag_data || {};\n  // use strings instead of booleans to make friendlier for TiQ Load Rules\n  udo.allow_required_cookies = &quot;false&quot;;\n  udo.allow_comfort_cookies = &quot;false&quot;;\n  udo.allow_statistics_cookies = &quot;false&quot;;\n  udo.allow_targeting_cookies = &quot;false&quot;;\n\n\n  // set the permissions based on the user input and cookie config\n  udo = generatePermissions(userCookieValue, config, udo);\n\n  // check if the cookie value matched any of the configured ones, warn if not matched\n  if (udo.user_permissions_cookie_value_matches_config == &quot;false&quot;) {\n    blockAndDeleteTealiumCookie();\n    blockTealiumLoad();\n    logger(&quot;Cookie value '&quot; + userCookieValue + &quot;' doesn't match any configured options for cookie '&quot; + config.cookie_name + &quot;' - kill TiQ load and remove 'utag_main' cookie&quot;);\n    return;\n  }\n\n  else logger(&quot;Set user permissions to '&quot; + udo.user_permissions_level + &quot;'&quot;);\n\n}());\n","scopevars":"","notes":"** COOKIE MANAGER 1 extension must be properly configured and fired BEFORE this extension, otherwise all users will be considered opted-out and no tracking will fire from TiQ at all.\n\n** Produces utag_data variables with string boolean values to be used in Load Rules on the library level.  Example for a user who has allowed 'statistics' tracking:\n\n      utag_data.allow_required_cookies = &quot;true&quot;;\n      utag_data.allow_comfort_cookies = &quot;true&quot;;\n      utag_data.allow_statistics_cookies = &quot;false&quot;;\n      utag_data.allow_targeting_cookies = &quot;false&quot;;","settings":{"lastloadruleid":"1","creation":"201708010813","revision":"201708091315","lastmanageid":"1","origin_id":"2","library":"optional","minorrevision":"201708091315","lastdefineid":"4","account":"services-caleb","profileid":"lib-bosch-cookies","lastcustomizeid":"0"},"labels":""},"3":{"id":"100036","type":"new","title":"PermissionsCheck 3: Respect permissions on utag.view() and utag.link()","imported":"prod","_ignoreError":"false","labels":"","code":"// Scope       : All Tags\n// Execution   : Before Load Rules\n// Condition   : n/a\n// Description : COOKIE MANAGER 3: Get the permissions for utag.view and utag.link views\n\n// assumes that if this rule is missing, the rest are too\n// this will already be set on the initial utag.view that's called automatically on utag.js load\nif (typeof b[&quot;allow_required_cookies&quot;] == &quot;undefined&quot;) {\n  // get the user_permissions_level from utag.data\n  b[&quot;allow_required_cookies&quot;] = utag.data[&quot;allow_required_cookies&quot;];\n  b[&quot;allow_comfort_cookies&quot;] = utag.data[&quot;allow_comfort_cookies&quot;];\n  b[&quot;allow_statistics_cookies&quot;] = utag.data[&quot;allow_statistics_cookies&quot;];\n  b[&quot;allow_targeting_cookies&quot;] = utag.data[&quot;allow_targeting_cookies&quot;];\n}\n","notes":"","settings":{"creation":"201708010813","revision":"201708091315","lastloadruleid":"1","origin_id":"3","lastmanageid":"1","minorrevision":"201708091315","library":"optional","lastdefineid":"4","lastcustomizeid":"0","profileid":"lib-bosch-cookies","account":"services-caleb"},"scopevars":"","sort":"3","advExecOption":"blr","_id":"3","status":"active","scope":"global"},"4":{"sort":"1","notes":"Make sure this is defined before the COOKIE MANAGER 2 extension or no tag will load","code":"// Scope       : Pre Loader\n// Execution   : n/a\n// Condition   : n/a\n// Description : PermissionsCheck 1: Set values to identify the permissions cookie, REQUIRED\n\n// ********\n// INSTRUCTIONS\n// ********\n// - Duplicate this extension to create an editable version,\n// - Make sure to move it above COOKIE MANAGER 2 in the TiQ UI\n// - Only edit the values for settings between lines 27 and 54\n// - Please read all comments and variable names closely to ensure tags fire as expected.\n\n// stay out of the global namespace\n(function () {\n  // initialize\n  window.tealium_cookie_check = window.tealium || {};\n  window.tealium_cookie_check.cookieConfig = {};\n  // shorter name\n  var config = window.tealium_cookie_check.cookieConfig;\n\n  // ********\n  // START COOKIE MANAGER CONFIG\n  // ********\n\n  // the name of the cookie set by the Bosch Cookie Manager\n  config.cookie_name = &quot;www_bosch-professional_com_cookies&quot;; // case-sensitive\n\n  // enter cookie value set for new users who haven't interacted with the Cookie Manager at all\n  config.default_cookie_value = &quot;&quot;;\n\n  // the opt_in level set by default for new users with the default_cookie_value set\n  // supports: &quot;opt-out&quot;, &quot;required&quot;, &quot;comfort&quot;, &quot;statistics&quot;, &quot;targeting&quot;\n  config.default_opt_in_level = &quot;&quot;;\n\n  // enter the cookie value set for users who have COMPLETELY opted out of cookies\n  // mandatory your site offers a full opt-out, otherwise leave blank\n  config.cookie_value_for_full_opt_out = &quot;0&quot;;\n\n  // enter cookie value set for users who allow 'required' cookies (lowest permission level)\n  // can be left blank if this level of opt-in isn't one of the options offered by your site\n  config.cookie_value_for_required_opt_in = &quot;&quot;;\n\n  // enter cookie value set for users who allow 'comfort' cookies\n  // can be left blank if this level of opt-in isn't one of the options offered by your site\n  config.cookie_value_for_comfort_opt_in = &quot;&quot;;\n\n  // enter cookie value set for users who allow 'statistics' cookies\n  // can be left blank if this level of opt-in isn't one of the options offered by your site\n  config.cookie_value_for_statistics_opt_in = &quot;&quot;;\n\n  // enter cookie value set for users who allow 'targeting' cookies (highest permission level)\n  // can be left blank if this level of opt-in isn't offered by your site\n  config.cookie_value_for_targeting_opt_in = &quot;1&quot;;\n\n  // ********\n  // END COOKIE MANAGER CONFIG\n  // ********\n\n}());\n","scopevars":"","labels":"","scope":"preload","status":"active","_id":"4","advExecOption":"alr","title":"PermissionsCheck 1: Configuration","type":"new","id":"100036","_ignoreError":"false"}},"title":"Initial publish - 2017/08/10 08:26","datacloudLinkedProfiles":"{}","email":"caleb.jaquith@tealium.com","datacloud_merge":"true","datacloud_profile_name":"main","datacloud_revision":"1625226277606"}
